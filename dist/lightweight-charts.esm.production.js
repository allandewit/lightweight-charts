/*!
 * @license
 * TradingView Lightweight Charts v3.8.0-dev+202112201911
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
import{bindToDevicePixelRatio as t}from"fancy-canvas/coordinate-space";var i,n;function s(t,i){var n,s=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(s)}function h(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(n,i+h),t.lineTo(s,i+h),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(i||(i={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(n||(n={}));var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},r(t,i)};function e(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var u=function(){return u=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},u.apply(this,arguments)};function a(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))}function o(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function l(t){if(void 0===t)throw new Error("Value is undefined");return t}function f(t){if(null===t)throw new Error("Value is null");return t}function c(t){return f(l(t))}function v(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var s=0,h=i;s<h.length;s++){var r=h[s];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:v(t[e],r[e]))}return t}function _(t){return"number"==typeof t&&isFinite(t)}function d(t){return"number"==typeof t&&t%1==0}function w(t){return"string"==typeof t}function M(t){return"boolean"==typeof t}function b(t){var i,n,s,h=t;if(!h||"object"!=typeof h)return h;for(n in i=Array.isArray(h)?[]:{},h)h.hasOwnProperty(n)&&(s=h[n],i[n]=s&&"object"==typeof s?b(s):s);return i}function m(t){return null!==t}function p(t){return null===t?void 0:t}var g=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,s){this.t.forEach((function(h){t.save(),h.h(t,i,n,s),t.restore()}))},t}(),y=function(){function t(){}return t.prototype.h=function(t,i,n,s){t.save(),t.scale(i,i),this.u(t,n,s),t.restore()},t.prototype.o=function(t,i,n,s){t.save(),t.scale(i,i),this.l(t,n,s),t.restore()},t.prototype.l=function(t,i,n){},t}(),k=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,s=function(s){t.beginPath();for(var h=i.to-1;h>=i.from;--h){var r=n.m[h];t.moveTo(r.p,r.g),t.arc(r.p,r.g,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,s(n.C+2),t.fillStyle=n.N,s(n.C)}},i}(y);function C(){return{m:[{p:0,g:0,S:0,D:0}],N:"",k:"",C:0,M:null}}var N={from:0,to:1},x=function(){function t(t,i){this.T=new g,this.A=[],this.B=[],this.L=!0,this.F=t,this.O=i,this.T.i(this.A)}return t.prototype.V=function(t){var i=this.F.P();i.length!==this.A.length&&(this.B=i.map(C),this.A=this.B.map((function(t){var i=new k;return i._(t),i})),this.T.i(this.A)),this.L=!0},t.prototype.W=function(t,i,n){return this.L&&(this.R(t),this.L=!1),this.T},t.prototype.R=function(t){var i=this,n=this.F.P(),s=this.O.I(),h=this.F.U();n.forEach((function(n,r){var e,u=i.B[r],a=n.j(s);if(null!==a&&n.q()){var o=f(n.H());u.N=a.Y,u.C=a.C,u.m[0].D=a.D,u.m[0].g=n.$().K(a.D,o.X),u.k=null!==(e=a.Z)&&void 0!==e?e:i.F.J(u.m[0].g/t),u.m[0].S=s,u.m[0].p=h.G(s),u.M=N}else u.M=null}))},t}(),S=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,n,r){if(null!==this.tt){var e=this.tt.it.q,u=this.tt.nt.q;if(e||u){t.save();var a=Math.round(this.tt.p*i),o=Math.round(this.tt.g*i),l=Math.ceil(this.tt.st*i),f=Math.ceil(this.tt.ht*i);t.lineCap="butt",e&&a>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,s(t,this.tt.it.ut),function(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(i+h,n),t.lineTo(i+h,s),t.stroke()}(t,a,0,f)),u&&o>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,s(t,this.tt.nt.ut),h(t,o,0,l)),t.restore()}}},t}(),D=function(){function t(t){this.L=!0,this.at={it:{rt:1,ut:0,et:"",q:!1},nt:{rt:1,ut:0,et:"",q:!1},st:0,ht:0,p:0,g:0},this.ot=new S(this.at),this.lt=t}return t.prototype.V=function(){this.L=!0},t.prototype.W=function(t,i){return this.L&&(this.R(),this.L=!1),this.ot},t.prototype.R=function(){var t=this.lt.q(),i=f(this.lt.ft()),n=i.vt().ct().crosshair,s=this.at;s.nt.q=t&&this.lt._t(i),s.it.q=t&&this.lt.dt(),s.nt.rt=n.horzLine.width,s.nt.ut=n.horzLine.style,s.nt.et=n.horzLine.color,s.it.rt=n.vertLine.width,s.it.ut=n.vertLine.style,s.it.et=n.vertLine.color,s.st=i.wt(),s.ht=i.Mt(),s.p=this.lt.bt(),s.g=this.lt.gt()},t}(),T={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function A(t){return t<0?0:t>255?255:Math.round(t)||0}function B(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var L=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,F=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,E=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,O=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function V(t){var i;if((t=t.toLowerCase())in T&&(t=T[t]),i=O.exec(t)||E.exec(t))return[A(parseInt(i[1],10)),A(parseInt(i[2],10)),A(parseInt(i[3],10)),B(i.length<5?1:parseFloat(i[4]))];if(i=F.exec(t))return[A(parseInt(i[1],16)),A(parseInt(i[2],16)),A(parseInt(i[3],16)),1];if(i=L.exec(t))return[A(17*parseInt(i[1],16)),A(17*parseInt(i[2],16)),A(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function P(t){var i,n=V(t);return{yt:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),kt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function W(t,i,n,s,h,r){t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+h-r,s-2*r,r),t.fillRect(i,n,r,h),t.fillRect(i+s-r,n,r,h)}function z(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function R(t,i,n,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,h),t.restore()}function I(t,i,n,s,h,r,e){t.save(),t.globalCompositeOperation="copy";var u=t.createLinearGradient(0,0,0,h);u.addColorStop(0,r),u.addColorStop(1,e),t.fillStyle=u,t.fillRect(i,n,s,h),t.restore()}var U,j=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.Ct=i},t.prototype.h=function(t,i,n,s,h,r){if(this.tt.q){t.font=i.Nt;var e=this.tt.xt||!this.tt.St?i.Dt:0,u=i.Tt,a=i.At,o=i.Bt,l=i.Lt,f=i.Ft,c=this.tt.Et,v=Math.ceil(n.Ot(t,c)),_=i.Vt,d=i.Pt+a+o,w=Math.ceil(.5*d),M=u+v+l+f+e,b=this.Ct.Wt;this.Ct.zt&&(b=this.Ct.zt);var m,p,g=(b=Math.round(b))-w,y=g+d,k="right"===h,C=k?s:0,N=Math.ceil(s*r),x=C;if(t.fillStyle=this.Ct.yt,t.lineWidth=1,t.lineCap="butt",c){k?(m=C-e,p=(x=C-M)+f):(x=C+M,m=C+e,p=C+u+e+l);var S=Math.max(1,Math.floor(r)),D=Math.max(1,Math.floor(u*r)),T=k?N:0,A=Math.round(g*r),B=Math.round(x*r),L=Math.round(b*r)-Math.floor(.5*r),F=L+S+(L-A),E=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(T,A),t.lineTo(B,A),t.lineTo(B,F),t.lineTo(T,F),t.fill(),t.fillStyle=this.tt.Z,t.fillRect(k?N-D:0,A,D,F-A),this.tt.xt&&(t.fillStyle=this.Ct.et,t.fillRect(T,L,E-T,S)),t.textAlign="left",t.fillStyle=this.Ct.et,z(t,r,(function(){t.fillText(c,p,y-o-_)})),t.restore()}}},t.prototype.Mt=function(t,i){return this.tt.q?t.Pt+t.At+t.Bt:0},t}(),q=function(){function t(t){this.Rt={Wt:0,et:"#FFF",yt:"#000"},this.It={Et:"",q:!1,xt:!0,St:!1,Z:""},this.Ut={Et:"",q:!1,xt:!1,St:!0,Z:""},this.L=!0,this.jt=new(t||j)(this.It,this.Rt),this.qt=new(t||j)(this.Ut,this.Rt)}return t.prototype.Et=function(){return this.It.Et},t.prototype.Wt=function(){return this.Ht(),this.Rt.Wt},t.prototype.V=function(){this.L=!0},t.prototype.Mt=function(t,i){return void 0===i&&(i=!1),Math.max(this.jt.Mt(t,i),this.qt.Mt(t,i))},t.prototype.Yt=function(){return this.Rt.zt||0},t.prototype.Kt=function(t){this.Rt.zt=t},t.prototype.$t=function(){return this.Ht(),this.It.q||this.Ut.q},t.prototype.Xt=function(){return this.Ht(),this.It.q},t.prototype.W=function(t){return this.Ht(),this.It.xt=this.It.xt&&t.ct().drawTicks,this.Ut.xt=this.Ut.xt&&t.ct().drawTicks,this.jt._(this.It,this.Rt),this.qt._(this.Ut,this.Rt),this.jt},t.prototype.Zt=function(){return this.Ht(),this.jt._(this.It,this.Rt),this.qt._(this.Ut,this.Rt),this.qt},t.prototype.Ht=function(){this.L&&(this.It.xt=!0,this.Ut.xt=!1,this.Jt(this.It,this.Ut,this.Rt))},t}(),H=function(t){function i(i,n,s){var h=t.call(this)||this;return h.lt=i,h.Gt=n,h.Qt=s,h}return e(i,t),i.prototype.Jt=function(t,i,n){t.q=!1;var s=this.lt.ct().horzLine;if(s.labelVisible){var h=this.Gt.H();if(this.lt.q()&&!this.Gt.ti()&&null!==h){var r=P(s.labelBackgroundColor);n.yt=r.yt,n.et=r.kt;var e=this.Qt(this.Gt);n.Wt=e.Wt,t.Et=this.Gt.ii(e.D,h),t.q=!0}}},i}(q),Y=/[1-9]/g,K=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var s=this;if(null!==this.tt&&!1!==this.tt.q&&0!==this.tt.Et.length){t.font=i.Nt;var h=Math.round(i.ni.Ot(t,this.tt.Et,Y));if(!(h<=0)){t.save();var r=i.si,e=h+2*r,u=e/2,a=this.tt.wt,o=this.tt.Wt,l=Math.floor(o-u)+.5;l<0?(o+=Math.abs(0-l),l=Math.floor(o-u)+.5):l+e>a&&(o-=Math.abs(a-(l+e)),l=Math.floor(o-u)+.5);var c=l+e,v=0+i.Tt+i.At+i.Pt+i.Bt;t.fillStyle=this.tt.yt;var _=Math.round(l*n),d=Math.round(0*n),w=Math.round(c*n),M=Math.round(v*n);t.fillRect(_,d,w-_,M-d);var b=Math.round(this.tt.Wt*n),m=d,p=Math.round((m+i.Tt+i.Dt)*n);t.fillStyle=this.tt.et;var g=Math.max(1,Math.floor(n)),y=Math.floor(.5*n);t.fillRect(b-y,m,g,p-m);var k=v-i.Vt-i.Bt;t.textAlign="left",t.fillStyle=this.tt.et,z(t,n,(function(){t.fillText(f(s.tt).Et,l+r,k)})),t.restore()}}},t}(),$=function(){function t(t,i,n){this.L=!0,this.ot=new K,this.at={q:!1,yt:"#4c525e",et:"white",Et:"",wt:0,Wt:NaN},this.O=t,this.hi=i,this.Qt=n}return t.prototype.V=function(){this.L=!0},t.prototype.W=function(){return this.L&&(this.R(),this.L=!1),this.ot._(this.at),this.ot},t.prototype.R=function(){var t=this.at;t.q=!1;var i=this.O.ct().vertLine;if(i.labelVisible){var n=this.hi.U();if(!n.ti()){var s=n.ri(this.O.I());t.wt=n.wt();var h=this.Qt();if(h.S){t.Wt=h.Wt,t.Et=n.ei(f(s)),t.q=!0;var r=P(i.labelBackgroundColor);t.yt=r.yt,t.et=r.kt}}}},t}(),X=function(){function t(){this.ui=null,this.ai=0}return t.prototype.oi=function(){return this.ai},t.prototype.li=function(t){this.ai=t},t.prototype.$=function(){return this.ui},t.prototype.fi=function(t){this.ui=t},t.prototype.ci=function(){return[]},t.prototype.q=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(U||(U={}));var Z=function(t){function i(i,n){var s=t.call(this)||this;s.vi=null,s._i=NaN,s.di=0,s.wi=!0,s.Mi=new Map,s.bi=!1,s.mi=NaN,s.pi=NaN,s.gi=NaN,s.yi=NaN,s.hi=i,s.ki=n,s.Ci=new x(i,s);var h,r;s.Ni=(h=function(){return s._i},r=function(){return s.pi},function(t){var i=r(),n=h();if(t===f(s.vi).xi())return{D:n,Wt:i};var e=f(t.H());return{D:t.Si(i,e),Wt:i}});var e=function(t,i){return function(){return{S:s.hi.U().ri(t()),Wt:i()}}}((function(){return s.di}),(function(){return s.bt()}));return s.Di=new $(s,i,e),s.Ti=new D(s),s}return e(i,t),i.prototype.ct=function(){return this.ki},i.prototype.Ai=function(t,i){this.gi=t,this.yi=i},i.prototype.Bi=function(){this.gi=NaN,this.yi=NaN},i.prototype.Li=function(){return this.gi},i.prototype.Fi=function(){return this.yi},i.prototype.Ei=function(t,i,n){this.bi||(this.bi=!0),this.wi=!0,this.Oi(t,i,n)},i.prototype.I=function(){return this.di},i.prototype.bt=function(){return this.mi},i.prototype.gt=function(){return this.pi},i.prototype.q=function(){return this.wi},i.prototype.Vi=function(){this.wi=!1,this.Pi(),this._i=NaN,this.mi=NaN,this.pi=NaN,this.vi=null,this.Bi()},i.prototype.Wi=function(t){return null!==this.vi?[this.Ti,this.Ci]:[]},i.prototype._t=function(t){return t===this.vi&&this.ki.horzLine.visible},i.prototype.dt=function(){return this.ki.vertLine.visible},i.prototype.zi=function(t,i){this.wi&&this.vi===t||this.Mi.clear();var n=[];return this.vi===t&&n.push(this.Ri(this.Mi,i,this.Ni)),n},i.prototype.ci=function(){return this.wi?[this.Di]:[]},i.prototype.ft=function(){return this.vi},i.prototype.Ii=function(){this.Ti.V(),this.Mi.forEach((function(t){return t.V()})),this.Di.V(),this.Ci.V()},i.prototype.Ui=function(t){return t&&!t.xi().ti()?t.xi():null},i.prototype.Oi=function(t,i,n){this.ji(t,i,n)&&this.Ii()},i.prototype.ji=function(t,i,n){var s=this.mi,h=this.pi,r=this._i,e=this.di,u=this.vi,a=this.Ui(n);this.di=t,this.mi=isNaN(t)?NaN:this.hi.U().G(t),this.vi=n;var o=null!==a?a.H():null;return null!==a&&null!==o?(this._i=i,this.pi=a.K(i,o)):(this._i=NaN,this.pi=NaN),s!==this.mi||h!==this.pi||e!==this.di||r!==this._i||u!==this.vi},i.prototype.Pi=function(){var t=this.hi.P().map((function(t){return t.Hi().qi()})).filter(m),i=0===t.length?null:Math.max.apply(Math,t);this.di=null!==i?i:NaN},i.prototype.Ri=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new H(this,i,n),t.set(i,s)),s},i}(X),J=".";function G(t,i){if(!_(t))return"n/a";if(!d(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var Q=function(){function t(t,i){if(i||(i=1),_(t)&&d(t)||(t=100),t<0)throw new TypeError("invalid base");this.Gt=t,this.Yi=i,this.Ki()}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),i+this.$i(t)},t.prototype.Ki=function(){if(this.Xi=0,this.Gt>0&&this.Yi>0)for(var t=this.Gt;t>1;)t/=10,this.Xi++},t.prototype.$i=function(t){var i=this.Gt/this.Yi,n=Math.floor(t),s="",h=void 0!==this.Xi?this.Xi:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.Xi);r>=i&&(r-=i,n+=1),s=J+G(+r.toFixed(this.Xi)*this.Yi,h)}else n=Math.round(n*i)/i,h>0&&(s=J+G(0,h));return n.toFixed(0)+s},t}(),tt=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return e(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(Q),it=function(){function t(){this.Zi=[]}return t.prototype.Ji=function(t,i,n){var s={Gi:t,Qi:i,tn:!0===n};this.Zi.push(s)},t.prototype.nn=function(t){var i=this.Zi.findIndex((function(i){return t===i.Gi}));i>-1&&this.Zi.splice(i,1)},t.prototype.sn=function(t){this.Zi=this.Zi.filter((function(i){return i.Qi===t}))},t.prototype.hn=function(t,i){var n=a([],this.Zi,!0);this.Zi=this.Zi.filter((function(t){return!t.tn})),n.forEach((function(n){return n.Gi(t,i)}))},t.prototype.rn=function(){return this.Zi.length>0},t.prototype.en=function(){this.Zi=[]},t}(),nt=function(){function t(t,i){this.un=t,this.an=i}return t.prototype.on=function(t){return null!==t&&(this.un===t.un&&this.an===t.an)},t.prototype.ln=function(){return new t(this.un,this.an)},t.prototype.fn=function(){return this.un},t.prototype.cn=function(){return this.an},t.prototype.vn=function(){return this.an-this.un},t.prototype.ti=function(){return this.an===this.un||Number.isNaN(this.an)||Number.isNaN(this.un)},t.prototype._n=function(i){return null===i?this:new t(Math.min(this.fn(),i.fn()),Math.max(this.cn(),i.cn()))},t.prototype.dn=function(t){if(_(t)&&0!==this.an-this.un){var i=.5*(this.an+this.un),n=this.an-i,s=this.un-i;n*=t,s*=t,this.an=i+n,this.un=i+s}},t.prototype.wn=function(t){_(t)&&(this.an+=t,this.un+=t)},t.prototype.Mn=function(){return{minValue:this.un,maxValue:this.an}},t.bn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function st(t,i,n){return Math.min(Math.max(t,i),n)}function ht(t,i,n){return i-t<=n}function rt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function et(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ut(t){var i=Math.ceil(t);return i%2==0?i-1:i}var at={mn:4,pn:1e-4};function ot(t,i){var n=100*(t-i)/i;return i<0?-n:n}function lt(t,i){var n=ot(t.fn(),i),s=ot(t.cn(),i);return new nt(n,s)}function ft(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function ct(t,i){var n=ft(t.fn(),i),s=ft(t.cn(),i);return new nt(n,s)}function vt(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=rt(n+i.pn)+i.mn;return t<0?-s:s}function _t(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.mn)-i.pn;return t<0?-s:s}function dt(t,i){if(null===t)return null;var n=vt(t.fn(),i),s=vt(t.cn(),i);return new nt(n,s)}function wt(t,i){if(null===t)return null;var n=_t(t.fn(),i),s=_t(t.cn(),i);return new nt(n,s)}function Mt(t){if(null===t)return at;var i=Math.abs(t.cn()-t.fn());if(i>=1||i<1e-15)return at;var n=Math.ceil(Math.abs(Math.log10(i))),s=at.mn+n;return{mn:s,pn:1/Math.pow(10,s)}}var bt,mt=function(){function t(t,i){if(this.gn=t,this.yn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.gn))this.kn=[2,2.5,2];else{this.kn=[];for(var n=this.gn;1!==n;){if(n%2==0)this.kn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.kn.push(2,2.5),n/=5}if(this.kn.length>100)throw new Error("something wrong with base")}}}return t.prototype.Cn=function(t,i,n){for(var s,h,r,e=0===this.gn?0:1/this.gn,u=Math.pow(10,Math.max(0,Math.ceil(rt(t-i)))),a=0,o=this.yn[0];;){var l=ht(u,e,1e-14)&&u>e+1e-14,f=ht(u,n*o,1e-14),c=ht(u,1,1e-14);if(!(l&&f&&c))break;u/=o,o=this.yn[++a%this.yn.length]}if(u<=e+1e-14&&(u=e),u=Math.max(1,u),this.kn.length>0&&(s=u,h=1,r=1e-14,Math.abs(s-h)<r))for(a=0,o=this.kn[0];ht(u,n*o,1e-14)&&u>e+1e-14;)u/=o,o=this.kn[++a%this.kn.length];return u},t}(),pt=function(){function t(t,i,n,s){this.Nn=[],this.Gt=t,this.gn=i,this.xn=n,this.Sn=s}return t.prototype.Cn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Gt.Mt(),s=(t-i)*this.Dn()/n,h=new mt(this.gn,[2,2.5,2]),r=new mt(this.gn,[2,2,2.5]),e=new mt(this.gn,[2.5,2,2]),u=[];return u.push(h.Cn(t,i,s),r.Cn(t,i,s),e.Cn(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.Tn=function(){var t=this.Gt,i=t.H();if(null!==i){var n=t.Mt(),s=this.xn(n-1,i),h=this.xn(0,i),r=this.Gt.ct().entireTextOnly?this.An()/2:0,e=r,u=n-1-r,a=Math.max(s,h),o=Math.min(s,h);if(a!==o){for(var l=this.Cn(a,o),f=a%l,c=a>=o?1:-1,v=null,_=0,d=a-(f+=f<0?l:0);d>o;d-=l){var w=this.Sn(d,i,!0);null!==v&&Math.abs(w-v)<this.Dn()||(w<e||w>u||(_<this.Nn.length?(this.Nn[_].Bn=w,this.Nn[_].Ln=t.Fn(d)):this.Nn.push({Bn:w,Ln:t.Fn(d)}),_++,v=w,t.En()&&(l=this.Cn(d*c,o))))}this.Nn.length=_}else this.Nn=[]}else this.Nn=[]},t.prototype.On=function(){return this.Nn},t.prototype.An=function(){return this.Gt.Pt()},t.prototype.Dn=function(){return Math.ceil(2.5*this.An())},t}();function gt(t){return t.slice().sort((function(t,i){return f(t.oi())-f(i.oi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(bt||(bt={}));var yt,kt,Ct=new tt,Nt=new Q(100,1),xt=function(){function t(t,i,n,s){this.Vn=0,this.Pn=null,this.Wn=null,this.zn=null,this.Rn={In:!1,Un:null},this.jn=0,this.qn=0,this.Hn=new it,this.Yn=new it,this.Kn=[],this.$n=null,this.Xn=null,this.Zn=null,this.Jn=null,this.Gn=Nt,this.Qn=Mt(null),this.ts=t,this.ki=i,this.ns=n,this.ss=s,this.hs=new pt(this,100,this.rs.bind(this),this.es.bind(this))}return t.prototype.us=function(){return this.ts},t.prototype.ct=function(){return this.ki},t.prototype.os=function(t){if(v(this.ki,t),this.ls(),void 0!==t.mode&&this.fs({cs:t.mode}),void 0!==t.scaleMargins){var i=l(t.scaleMargins.top),n=l(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this.vs(),this.Xn=null}},t.prototype._s=function(){return this.ki.autoScale},t.prototype.En=function(){return 1===this.ki.mode},t.prototype.ds=function(){return 2===this.ki.mode},t.prototype.ws=function(){return 3===this.ki.mode},t.prototype.cs=function(){return{Ms:this.ki.autoScale,bs:this.ki.invertScale,cs:this.ki.mode}},t.prototype.fs=function(t){var i=this.cs(),n=null;void 0!==t.Ms&&(this.ki.autoScale=t.Ms),void 0!==t.cs&&(this.ki.mode=t.cs,2!==t.cs&&3!==t.cs||(this.ki.autoScale=!0),this.Rn.In=!1),1===i.cs&&t.cs!==i.cs&&(!function(t,i){if(null===t)return!1;var n=_t(t.fn(),i),s=_t(t.cn(),i);return isFinite(n)&&isFinite(s)}(this.Wn,this.Qn)?this.ki.autoScale=!0:null!==(n=wt(this.Wn,this.Qn))&&this.ps(n)),1===t.cs&&t.cs!==i.cs&&null!==(n=dt(this.Wn,this.Qn))&&this.ps(n);var s=i.cs!==this.ki.mode;s&&(2===i.cs||this.ds())&&this.ls(),s&&(3===i.cs||this.ws())&&this.ls(),void 0!==t.bs&&i.bs!==t.bs&&(this.ki.invertScale=t.bs,this.gs()),this.Yn.hn(i,this.cs())},t.prototype.ys=function(){return this.Yn},t.prototype.Pt=function(){return this.ns.fontSize},t.prototype.Mt=function(){return this.Vn},t.prototype.ks=function(t){this.Vn!==t&&(this.Vn=t,this.vs(),this.Xn=null)},t.prototype.Cs=function(){if(this.Pn)return this.Pn;var t=this.Mt()-this.Ns()-this.xs();return this.Pn=t,t},t.prototype.Ss=function(){return this.Ds(),this.Wn},t.prototype.ps=function(t,i){var n=this.Wn;(i||null===n&&null!==t||null!==n&&!n.on(t))&&(this.Xn=null,this.Wn=t)},t.prototype.ti=function(){return this.Ds(),0===this.Vn||!this.Wn||this.Wn.ti()},t.prototype.Ts=function(t){return this.bs()?t:this.Mt()-1-t},t.prototype.K=function(t,i){return this.ds()?t=ot(t,i):this.ws()&&(t=ft(t,i)),this.es(t,i)},t.prototype.As=function(t,i,n){this.Ds();for(var s=this.xs(),h=f(this.Ss()),r=h.fn(),e=h.cn(),u=this.Cs()-1,a=this.bs(),o=u/(e-r),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Bs(),_=l;_<c;_++){var d=t[_],w=d.D;if(!isNaN(w)){var M=w;null!==v&&(M=v(d.D,i));var b=s+o*(M-r),m=a?b:this.Vn-1-b;d.g=m}}},t.prototype.Ls=function(t,i,n){this.Ds();for(var s=this.xs(),h=f(this.Ss()),r=h.fn(),e=h.cn(),u=this.Cs()-1,a=this.bs(),o=u/(e-r),l=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Bs(),_=l;_<c;_++){var d=t[_],w=d.open,M=d.high,b=d.low,m=d.close;null!==v&&(w=v(d.open,i),M=v(d.high,i),b=v(d.low,i),m=v(d.close,i));var p=s+o*(w-r),g=a?p:this.Vn-1-p;d.Fs=g,p=s+o*(M-r),g=a?p:this.Vn-1-p,d.Es=g,p=s+o*(b-r),g=a?p:this.Vn-1-p,d.Os=g,p=s+o*(m-r),g=a?p:this.Vn-1-p,d.Vs=g}},t.prototype.Si=function(t,i){var n=this.rs(t,i);return this.Ps(n,i)},t.prototype.Ps=function(t,i){var n=t;return this.ds()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.ws()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Ws=function(){return this.Kn},t.prototype.zs=function(){if(this.$n)return this.$n;for(var t=[],i=0;i<this.Kn.length;i++){var n=this.Kn[i];null===n.oi()&&n.li(i+1),t.push(n)}return t=gt(t),this.$n=t,this.$n},t.prototype.Rs=function(t){-1===this.Kn.indexOf(t)&&(this.Kn.push(t),this.ls(),this.Is())},t.prototype.Us=function(t){var i=this.Kn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.Kn.splice(i,1),0===this.Kn.length&&(this.fs({Ms:!0}),this.ps(null)),this.ls(),this.Is()},t.prototype.H=function(){for(var t=null,i=0,n=this.Kn;i<n.length;i++){var s=n[i].H();null!==s&&((null===t||s.js<t.js)&&(t=s))}return null===t?null:t.X},t.prototype.bs=function(){return this.ki.invertScale},t.prototype.On=function(){return this.Xn||(this.hs.Tn(),this.Xn=this.hs.On(),this.Hn.hn()),this.Xn},t.prototype.qs=function(){return this.Hn},t.prototype.Hs=function(t){this.ds()||this.ws()||null===this.Zn&&null===this.zn&&(this.ti()||(this.Zn=this.Vn-t,this.zn=f(this.Ss()).ln()))},t.prototype.Ys=function(t){if(!this.ds()&&!this.ws()&&null!==this.Zn){this.fs({Ms:!1}),(t=this.Vn-t)<0&&(t=0);var i=(this.Zn+.2*(this.Vn-1))/(t+.2*(this.Vn-1)),n=f(this.zn).ln();i=Math.max(i,.1),n.dn(i),this.ps(n)}},t.prototype.Ks=function(){this.ds()||this.ws()||(this.Zn=null,this.zn=null)},t.prototype.$s=function(t){this._s()||null===this.Jn&&null===this.zn&&(this.ti()||(this.Jn=t,this.zn=f(this.Ss()).ln()))},t.prototype.Xs=function(t){if(!this._s()&&null!==this.Jn){var i=f(this.Ss()).vn()/(this.Cs()-1),n=t-this.Jn;this.bs()&&(n*=-1);var s=n*i,h=f(this.zn).ln();h.wn(s),this.ps(h,!0),this.Xn=null}},t.prototype.Zs=function(){this._s()||null!==this.Jn&&(this.Jn=null,this.zn=null)},t.prototype.Js=function(){return this.Gn||this.ls(),this.Gn},t.prototype.ii=function(t,i){switch(this.ki.mode){case 2:return this.Js().format(ot(t,i));case 3:return this.Js().format(ft(t,i));default:return this.Gs(t)}},t.prototype.Fn=function(t){switch(this.ki.mode){case 2:case 3:return this.Js().format(t);default:return this.Gs(t)}},t.prototype.Qs=function(t){return this.Gs(t,f(this.th()).Js())},t.prototype.ih=function(t,i){return t=ot(t,i),Ct.format(t)},t.prototype.nh=function(){return this.Kn},t.prototype.sh=function(t){this.Rn={Un:t,In:!1}},t.prototype.Ii=function(){this.Kn.forEach((function(t){return t.Ii()}))},t.prototype.ls=function(){this.Xn=null;var t=this.th(),i=100;null!==t&&(i=Math.round(1/t.hh())),this.Gn=Nt,this.ds()?(this.Gn=Ct,i=100):this.ws()?(this.Gn=new Q(100,1),i=100):null!==t&&(this.Gn=t.Js()),this.hs=new pt(this,i,this.rs.bind(this),this.es.bind(this)),this.hs.Tn()},t.prototype.Is=function(){this.$n=null},t.prototype.th=function(){return this.Kn[0]||null},t.prototype.Ns=function(){return this.bs()?this.ki.scaleMargins.bottom*this.Mt()+this.qn:this.ki.scaleMargins.top*this.Mt()+this.jn},t.prototype.xs=function(){return this.bs()?this.ki.scaleMargins.top*this.Mt()+this.jn:this.ki.scaleMargins.bottom*this.Mt()+this.qn},t.prototype.Ds=function(){this.Rn.In||(this.Rn.In=!0,this.rh())},t.prototype.vs=function(){this.Pn=null},t.prototype.es=function(t,i){if(this.Ds(),this.ti())return 0;t=this.En()&&t?vt(t,this.Qn):t;var n=f(this.Ss()),s=this.xs()+(this.Cs()-1)*(t-n.fn())/n.vn();return this.Ts(s)},t.prototype.rs=function(t,i){if(this.Ds(),this.ti())return 0;var n=this.Ts(t),s=f(this.Ss()),h=s.fn()+s.vn()*((n-this.xs())/(this.Cs()-1));return this.En()?_t(h,this.Qn):h},t.prototype.gs=function(){this.Xn=null,this.hs.Tn()},t.prototype.rh=function(){var t=this.Rn.Un;if(null!==t){for(var i,n,s=null,h=0,r=0,e=0,u=this.nh();e<u.length;e++){var a=u[e];if(a.q()){var o=a.H();if(null!==o){var l=a.eh(t.uh(),t.ah()),c=l&&l.Ss();if(null!==c){switch(this.ki.mode){case 1:c=dt(c,this.Qn);break;case 2:c=lt(c,o.X);break;case 3:c=ct(c,o.X)}if(s=null===s?c:s._n(f(c)),null!==l){var v=l.oh();null!==v&&(h=Math.max(h,v.above),r=Math.max(h,v.below))}}}}}if(h===this.jn&&r===this.qn||(this.jn=h,this.qn=r,this.Xn=null,this.vs()),null!==s){if(s.fn()===s.cn()){var _=this.th(),d=5*(null===_||this.ds()||this.ws()?1:_.hh());this.En()&&(s=wt(s,this.Qn)),s=new nt(s.fn()-d,s.cn()+d),this.En()&&(s=dt(s,this.Qn))}if(this.En()){var w=wt(s,this.Qn),M=Mt(w);if(i=M,n=this.Qn,i.mn!==n.mn||i.pn!==n.pn){var b=null!==this.zn?wt(this.zn,this.Qn):null;this.Qn=M,s=dt(w,M),null!==b&&(this.zn=dt(b,M))}}this.ps(s)}else null===this.Wn&&(this.ps(new nt(-.5,.5)),this.Qn=Mt(null));this.Rn.In=!0}},t.prototype.Bs=function(){var t=this;return this.ds()?ot:this.ws()?ft:this.En()?function(i){return vt(i,t.Qn)}:null},t.prototype.Gs=function(t,i){return void 0===this.ss.priceFormatter?(void 0===i&&(i=this.Js()),i.format(t)):this.ss.priceFormatter(t)},t}();function St(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(yt||(yt={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(kt||(kt={}));var Dt=function(t){return t.getUTCFullYear()};function Tt(t,i,n){return i.replace(/yyyy/g,function(t){return G(Dt(t),4)}(t)).replace(/yy/g,function(t){return G(Dt(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return G(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return G(function(t){return t.getUTCDate()}(t),2)}(t))}var At=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.lh=t,this.fh=i}return t.prototype._h=function(t){return Tt(t,this.lh,this.fh)},t}(),Bt=function(){function t(t){this.dh=t||"%h:%m:%s"}return t.prototype._h=function(t){return this.dh.replace("%h",G(t.getUTCHours(),2)).replace("%m",G(t.getUTCMinutes(),2)).replace("%s",G(t.getUTCSeconds(),2))},t}(),Lt={wh:"yyyy-MM-dd",Mh:"%h:%m:%s",bh:" ",mh:"default"},Ft=function(){function t(t){void 0===t&&(t={});var i=u(u({},Lt),t);this.ph=new At(i.wh,i.mh),this.gh=new Bt(i.Mh),this.yh=i.bh}return t.prototype._h=function(t){return"".concat(this.ph._h(t)).concat(this.yh).concat(this.gh._h(t))},t}();function Et(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(t[u],i)?(s=u+1,r-=e+1):r=e}return s}function Ot(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(i,t[u])?r=e:(s=u+1,r-=e+1)}return s}var Vt=function(){function t(t,i){void 0===i&&(i=50),this.kh=0,this.Ch=1,this.Nh=1,this.xh=new Map,this.Sh=new Map,this.Dh=t,this.Th=i}return t.prototype._h=function(t){var i=void 0===t.Ah?new Date(1e3*t.Bh).getTime():new Date(Date.UTC(t.Ah.year,t.Ah.month-1,t.Ah.day)).getTime(),n=this.xh.get(i);if(void 0!==n)return n.Lh;if(this.kh===this.Th){var s=this.Sh.get(this.Nh);this.Sh.delete(this.Nh),this.xh.delete(l(s)),this.Nh++,this.kh--}var h=this.Dh(t);return this.xh.set(i,{Lh:h,Fh:this.Ch}),this.Sh.set(this.Ch,i),this.kh++,this.Ch++,h},t}(),Pt=function(){function t(t,i){o(t<=i,"right should be >= left"),this.Eh=t,this.Oh=i}return t.prototype.uh=function(){return this.Eh},t.prototype.ah=function(){return this.Oh},t.prototype.Vh=function(){return this.Oh-this.Eh+1},t.prototype.Ph=function(t){return this.Eh<=t&&t<=this.Oh},t.prototype.on=function(t){return this.Eh===t.uh()&&this.Oh===t.ah()},t}();function Wt(t,i){return null===t||null===i?t===i:t.on(i)}var zt,Rt=function(){function t(){this.Wh=new Map,this.xh=null}return t.prototype.zh=function(t,i){this.Rh(i),this.xh=null;for(var n=i;n<t.length;++n){var s=t[n],h=this.Wh.get(s.Ih);void 0===h&&(h=[],this.Wh.set(s.Ih,h)),h.push({Uh:n,S:s.S,jh:s.Ih})}},t.prototype.qh=function(t,i){var n=Math.ceil(i/t);return null!==this.xh&&this.xh.Hh===n||(this.xh={On:this.Yh(n),Hh:n}),this.xh.On},t.prototype.Rh=function(t){if(0!==t){var i=[];this.Wh.forEach((function(n,s){t<=n[0].Uh?i.push(s):n.splice(Et(n,t,(function(i){return i.Uh<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var h=s[n];this.Wh.delete(h)}}else this.Wh.clear()},t.prototype.Yh=function(t){for(var i=[],n=0,s=Array.from(this.Wh.keys()).sort((function(t,i){return i-t}));n<s.length;n++){var h=s[n];if(this.Wh.get(h)){var r=i;i=[];for(var e=r.length,u=0,a=l(this.Wh.get(h)),o=a.length,f=1/0,c=-1/0,v=0;v<o;v++){for(var _=a[v],d=_.Uh;u<e;){var w=r[u],M=w.Uh;if(!(M<d)){f=M;break}u++,i.push(w),c=M,f=1/0}f-d>=t&&d-c>=t&&(i.push(_),c=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),It=function(){function t(t){this.Kh=t}return t.prototype.$h=function(){return null===this.Kh?null:new Pt(Math.floor(this.Kh.uh()),Math.ceil(this.Kh.ah()))},t.prototype.Xh=function(){return this.Kh},t.Zh=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(zt||(zt={}));var Ut,jt=function(){function t(t,i,n){this.Jh=0,this.Gh=null,this.Qh=[],this.Jn=null,this.Zn=null,this.tr=new Rt,this.ir=new Map,this.nr=It.Zh(),this.sr=!0,this.hr=new it,this.rr=new it,this.er=new it,this.ur=null,this.ar=null,this.lr=[],this.ki=i,this.ss=n,this.cr=i.rightOffset,this.vr=i.barSpacing,this.hi=t,this._r()}return t.prototype.ct=function(){return this.ki},t.prototype.dr=function(t){v(this.ss,t),this.wr(),this._r()},t.prototype.os=function(t,i){var n;v(this.ki,t),this.ki.fixLeftEdge&&this.Mr(),this.ki.fixRightEdge&&this.br(),void 0!==t.barSpacing&&this.hi.mr(t.barSpacing),void 0!==t.rightOffset&&this.hi.pr(t.rightOffset),void 0!==t.minBarSpacing&&this.hi.mr(null!==(n=t.barSpacing)&&void 0!==n?n:this.vr),this.wr(),this._r(),this.er.hn()},t.prototype.ri=function(t){var i;return(null===(i=this.Qh[t])||void 0===i?void 0:i.S)||null},t.prototype.gr=function(t,i){if(this.Qh.length<1)return null;if(t.Bh>this.Qh[this.Qh.length-1].S.Bh)return i?this.Qh.length-1:null;var n=Et(this.Qh,t.Bh,(function(t,i){return t.S.Bh<i}));return t.Bh<this.Qh[n].S.Bh?i?n:null:n},t.prototype.ti=function(){return 0===this.Jh||0===this.Qh.length||null===this.Gh},t.prototype.yr=function(){return this.kr(),this.nr.$h()},t.prototype.Cr=function(){return this.kr(),this.nr.Xh()},t.prototype.Nr=function(){var t=this.yr();if(null===t)return null;var i={from:t.uh(),to:t.ah()};return this.Sr(i)},t.prototype.Sr=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=f(this.Dr()),h=f(this.Tr());return{from:f(this.ri(Math.max(s,i))),to:f(this.ri(Math.min(h,n)))}},t.prototype.Ar=function(t){return{from:f(this.gr(t.from,!0)),to:f(this.gr(t.to,!0))}},t.prototype.wt=function(){return this.Jh},t.prototype.Br=function(t){if(isFinite(t)&&!(t<=0)&&this.Jh!==t){if(this.ki.lockVisibleTimeRangeOnResize&&this.Jh){var i=this.vr*t/this.Jh;this.vr=i}if(this.ki.fixLeftEdge){var n=this.yr();if(null!==n)if(n.uh()<=0){var s=this.Jh-t;this.cr-=Math.round(s/this.vr)+1}}this.Jh=t,this.sr=!0,this.Lr(),this.Fr()}},t.prototype.G=function(t){if(this.ti()||!d(t))return 0;var i=this.Er()+this.cr-t;return this.Jh-(i+.5)*this.vr-1},t.prototype.Or=function(t,i){for(var n=this.Er(),s=void 0===i?0:i.from,h=void 0===i?t.length:i.to,r=s;r<h;r++){var e=t[r].S,u=n+this.cr-e,a=this.Jh-(u+.5)*this.vr-1;t[r].p=a}},t.prototype.Vr=function(t){return Math.ceil(this.Pr(t))},t.prototype.pr=function(t){this.sr=!0,this.cr=t,this.Fr(),this.hi.Wr(),this.hi.zr()},t.prototype.Rr=function(){return this.vr},t.prototype.mr=function(t){this.Ir(t),this.Fr(),this.hi.Wr(),this.hi.zr()},t.prototype.Ur=function(){return this.cr},t.prototype.On=function(){if(this.ti())return null;if(null!==this.ar)return this.ar;for(var t=this.vr,i=5*(this.hi.ct().layout.fontSize+4),n=Math.round(i/t),s=f(this.yr()),h=Math.max(s.uh(),s.uh()-n),r=Math.max(s.ah(),s.ah()-n),e=this.tr.qh(t,i),u=this.Dr()+n,a=this.Tr()-n,o=0,l=0,c=e;l<c.length;l++){var v=c[l];if(h<=v.Uh&&v.Uh<=r){var _=void 0;o<this.lr.length?((_=this.lr[o]).Bn=this.G(v.Uh),_.Ln=this.jr(v.S,v.jh),_.jh=v.jh):(_={qr:!1,Bn:this.G(v.Uh),Ln:this.jr(v.S,v.jh),jh:v.jh},this.lr.push(_)),this.vr>i/2?_.qr=!1:_.qr=this.ki.fixLeftEdge&&v.Uh<=u||this.ki.fixRightEdge&&v.Uh>=a,o++}}return this.lr.length=o,this.ar=this.lr,this.lr},t.prototype.Hr=function(){this.sr=!0,this.mr(this.ki.barSpacing),this.pr(this.ki.rightOffset)},t.prototype.Yr=function(t){this.sr=!0,this.Gh=t,this.Fr(),this.Mr()},t.prototype.Kr=function(t,i){var n=this.Pr(t),s=this.Rr(),h=s+i*(s/10);this.mr(h),this.ki.rightBarStaysOnScroll||this.pr(this.Ur()+(n-this.Pr(t)))},t.prototype.Hs=function(t){this.Jn&&this.Zs(),null===this.Zn&&null===this.ur&&(this.ti()||(this.Zn=t,this.$r()))},t.prototype.Ys=function(t){if(null!==this.ur){var i=st(this.Jh-t,0,this.Jh),n=st(this.Jh-f(this.Zn),0,this.Jh);0!==i&&0!==n&&this.mr(this.ur.Rr*i/n)}},t.prototype.Ks=function(){null!==this.Zn&&(this.Zn=null,this.Xr())},t.prototype.$s=function(t){null===this.Jn&&null===this.ur&&(this.ti()||(this.Jn=t,this.$r()))},t.prototype.Xs=function(t){if(null!==this.Jn){var i=(this.Jn-t)/this.Rr();this.cr=f(this.ur).Ur+i,this.sr=!0,this.Fr()}},t.prototype.Zs=function(){null!==this.Jn&&(this.Jn=null,this.Xr())},t.prototype.Zr=function(){this.Jr(this.ki.rightOffset)},t.prototype.Jr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.cr,h=performance.now(),r=function(){var e=(performance.now()-h)/i,u=e>=1,a=u?t:s+(t-s)*e;n.pr(a),u||setTimeout(r,20)};r()},t.prototype.V=function(t,i){this.sr=!0,this.Qh=t,this.tr.zh(t,i),this.Fr()},t.prototype.Gr=function(){return this.hr},t.prototype.Qr=function(){return this.rr},t.prototype.te=function(){return this.er},t.prototype.Er=function(){return this.Gh||0},t.prototype.ie=function(t){var i=t.Vh();this.Ir(this.Jh/i),this.cr=t.ah()-this.Er(),this.Fr(),this.sr=!0,this.hi.Wr(),this.hi.zr()},t.prototype.ne=function(){var t=this.Dr(),i=this.Tr();null!==t&&null!==i&&this.ie(new Pt(t,i+this.ki.rightOffset))},t.prototype.se=function(t){var i=new Pt(t.from,t.to);this.ie(i)},t.prototype.ei=function(t){return void 0!==this.ss.timeFormatter?this.ss.timeFormatter(t.Ah||t.Bh):this.he._h(new Date(1e3*t.Bh))},t.prototype.Dr=function(){return 0===this.Qh.length?null:0},t.prototype.Tr=function(){return 0===this.Qh.length?null:this.Qh.length-1},t.prototype.re=function(t){return(this.Jh-1-t)/this.vr},t.prototype.Pr=function(t){var i=this.re(t),n=this.Er()+this.cr-i;return Math.round(1e6*n)/1e6},t.prototype.Ir=function(t){var i=this.vr;this.vr=t,this.Lr(),i!==this.vr&&(this.sr=!0,this.ee())},t.prototype.kr=function(){if(this.sr)if(this.sr=!1,this.ti())this.ue(It.Zh());else{var t=this.Er(),i=this.Jh/this.vr,n=this.cr+t,s=new Pt(n-i+1,n);this.ue(new It(s))}},t.prototype.Lr=function(){var t=this.ae();if(this.vr<t&&(this.vr=t,this.sr=!0),0!==this.Jh){var i=.5*this.Jh;this.vr>i&&(this.vr=i,this.sr=!0)}},t.prototype.ae=function(){return this.ki.fixLeftEdge&&this.ki.fixRightEdge&&0!==this.Qh.length?this.Jh/this.Qh.length:this.ki.minBarSpacing},t.prototype.Fr=function(){var t=this.oe();this.cr>t&&(this.cr=t,this.sr=!0);var i=this.le();null!==i&&this.cr<i&&(this.cr=i,this.sr=!0)},t.prototype.le=function(){var t=this.Dr(),i=this.Gh;return null===t||null===i?null:t-i-1+(this.ki.fixLeftEdge?this.Jh/this.vr:Math.min(2,this.Qh.length))},t.prototype.oe=function(){return this.ki.fixRightEdge?0:this.Jh/this.vr-Math.min(2,this.Qh.length)},t.prototype.$r=function(){this.ur={Rr:this.Rr(),Ur:this.Ur()}},t.prototype.Xr=function(){this.ur=null},t.prototype.jr=function(t,i){var n=this,s=this.ir.get(i);return void 0===s&&(s=new Vt((function(t){return n.fe(t,i)})),this.ir.set(i,s)),s._h(t)},t.prototype.fe=function(t,i){var n,s=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(i,this.ki.timeVisible,this.ki.secondsVisible);return void 0!==this.ki.tickMarkFormatter?this.ki.tickMarkFormatter(null!==(n=t.Ah)&&void 0!==n?n:t.Bh,s,this.ss.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var h=void 0===t.Ah?new Date(1e3*t.Bh):new Date(Date.UTC(t.Ah.year,t.Ah.month-1,t.Ah.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(n,s)}(t,s,this.ss.locale)},t.prototype.ue=function(t){var i=this.nr;this.nr=t,Wt(i.$h(),this.nr.$h())||this.hr.hn(),Wt(i.Xh(),this.nr.Xh())||this.rr.hn(),this.ee()},t.prototype.ee=function(){this.ar=null},t.prototype.wr=function(){this.ee(),this.ir.clear()},t.prototype._r=function(){var t=this.ss.dateFormat;this.ki.timeVisible?this.he=new Ft({wh:t,Mh:this.ki.secondsVisible?"%h:%m:%s":"%h:%m",bh:"   ",mh:this.ss.locale}):this.he=new At(t,this.ss.locale)},t.prototype.Mr=function(){if(this.ki.fixLeftEdge){var t=this.Dr();if(null!==t){var i=this.yr();if(null!==i){var n=i.uh()-t;if(n<0){var s=this.cr-n-1;this.pr(s)}this.Lr()}}}},t.prototype.br=function(){this.Fr(),this.Lr()},t}();function qt(t){return!_(t)&&!w(t)}function Ht(t){return _(t)}!function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Ut||(Ut={}));var Yt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Kt(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=Yt),"".concat(n).concat(t,"px ").concat(i)}var $t=function(){function t(t){this.ce={Tt:1,Dt:4,Pt:NaN,Nt:"",ve:"",et:"",Bt:0,Lt:0,Ft:0,At:0,Vt:0},this.F=t}return t.prototype.ct=function(){var t=this.ce,i=this._e(),n=this.de();return t.Pt===i&&t.ve===n||(t.Pt=i,t.ve=n,t.Nt=Kt(i,n),t.At=Math.floor(i/3.5),t.Bt=t.At,t.Lt=Math.max(Math.ceil(i/2-t.Dt/2),0),t.Ft=Math.ceil(i/2+t.Dt/2),t.Vt=Math.round(i/10)),t.et=this.we(),this.ce},t.prototype.we=function(){return this.F.ct().layout.textColor},t.prototype._e=function(){return this.F.ct().layout.fontSize},t.prototype.de=function(){return this.F.ct().layout.fontFamily},t}();function Xt(t){return"left"===t||"right"===t}var Zt=function(){function t(t){this.Me=new Map,this.be=!1,this.me=[],this.pe=t}return t.prototype.ge=function(t,i){var n=function(t,i){return void 0===t?i:{ye:Math.max(t.ye,i.ye),Ms:t.Ms||i.Ms}}(this.Me.get(t),i);this.Me.set(t,n)},t.prototype.ke=function(){return this.pe},t.prototype.Ce=function(t){var i=this.Me.get(t);return void 0===i?{ye:this.pe}:{ye:Math.max(this.pe,i.ye),Ms:i.Ms}},t.prototype.Ne=function(){this.me=[{xe:0}]},t.prototype.Se=function(t){this.me=[{xe:1,X:t}]},t.prototype.De=function(){this.me=[{xe:4}]},t.prototype.mr=function(t){this.me.push({xe:2,X:t})},t.prototype.pr=function(t){this.me.push({xe:3,X:t})},t.prototype.Te=function(){return this.me},t.prototype._n=function(t){var i=this;this.be=this.be||t.be,this.me=this.me.concat(t.me);for(var n=0,s=t.me;n<s.length;n++){var h=s[n];this.Ae(h)}this.pe=Math.max(this.pe,t.pe),t.Me.forEach((function(t,n){i.ge(n,t)}))},t.prototype.Ae=function(t){switch(t.xe){case 0:this.Ne();break;case 1:this.Se(t.X);break;case 2:this.mr(t.X);break;case 3:this.pr(t.X);break;case 4:this.De()}},t}(),Jt=function(){function t(t){this.Be=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Le(t):t<999995?i+this.Le(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Le(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Le(t/1e9)+"B")},t.prototype.Le=function(t){var i=Math.pow(10,this.Be);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Be).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Gt(t,i,n,s){if(0!==i.length){var h=i[s.from].p,r=i[s.from].g;t.moveTo(h,r);for(var e=s.from+1;e<s.to;++e){var u=i[e];if(1===n){var a=i[e-1].g,o=u.p;t.lineTo(o,a)}t.lineTo(u.p,u.g)}}}var Qt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.v.rt,s(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],n=this.v.Fe/2;t.moveTo(i.p-n,this.v.Ee),t.lineTo(i.p-n,i.g),t.lineTo(i.p+n,i.g),t.lineTo(i.p+n,this.v.Ee)}else t.moveTo(this.v.m[this.v.M.from].p,this.v.Ee),t.lineTo(this.v.m[this.v.M.from].p,this.v.m[this.v.M.from].g),Gt(t,this.v.m,this.v.Oe,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].p,this.v.Ee),t.lineTo(this.v.m[this.v.M.from].p,this.v.Ee));t.closePath(),t.fillStyle=this.Ve(t),t.fill()}},i}(y),ti=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.Ve=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Pe);return n.addColorStop(0,i.We),n.addColorStop(1,i.ze),n},i}(Qt),ii=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,s(t,this.v.ut),t.strokeStyle=this.Re(t),t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.p-this.v.Fe/2,i.g),t.lineTo(i.p+this.v.Fe/2,i.g)}else Gt(t,this.v.m,this.v.Oe,this.v.M);t.stroke()}},i}(y),ni=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.Re=function(){return this.v.N},i}(ii);function si(t,i){return t.S<i}function hi(t,i){return t<i.S}function ri(t,i,n){var s=i.uh(),h=i.ah(),r=Et(t,s,si),e=Ot(t,h,hi);if(!n)return{from:r,to:e};var u=r,a=e;return r>0&&r<t.length&&t[r].S>=s&&(u=r-1),e>0&&e<t.length&&t[e-1].S<=h&&(a=e+1),{from:u,to:a}}var ei=function(){function t(t,i,n){this.Ie=!0,this.Ue=!0,this.je=!0,this.qe=[],this.He=null,this.Ye=t,this.Ke=i,this.$e=n}return t.prototype.V=function(t){this.Ie=!0,"data"===t&&(this.Ue=!0),"options"===t&&(this.je=!0)},t.prototype.Xe=function(){this.Ue&&(this.Ze(),this.Ue=!1),this.Ie&&(this.Je(),this.Ie=!1),this.je&&(this.Ge(),this.je=!1)},t.prototype.Qe=function(){this.He=null},t.prototype.Je=function(){var t=this.Ye.$(),i=this.Ke.U();if(this.Qe(),!i.ti()&&!t.ti()){var n=i.yr();if(null!==n&&0!==this.Ye.Hi().tu()){var s=this.Ye.H();null!==s&&(this.He=ri(this.qe,n,this.$e),this.iu(t,i,s.X))}}},t}(),ui=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return e(i,t),i.prototype.iu=function(t,i,n){i.Or(this.qe,p(this.He)),t.As(this.qe,n,p(this.He))},i.prototype.nu=function(t,i){return{S:t,D:i,p:NaN,g:NaN}},i.prototype.Ge=function(){},i.prototype.Ze=function(){var t=this,i=this.Ye.su();this.qe=this.Ye.Hi().hu().map((function(n){var s=n.X[3];return t.ru(n.Uh,s,i)}))},i}(ei),ai=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ot=new g,s.eu=new ti,s.uu=new ni,s.ot.i([s.eu,s.uu]),s}return e(i,t),i.prototype.W=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();return this.Xe(),this.eu._({Oe:n.lineType,m:this.qe,ut:n.lineStyle,rt:n.lineWidth,We:n.topColor,ze:n.bottomColor,Ee:t,Pe:t,M:this.He,Fe:this.Ke.U().Rr()}),this.uu._({Oe:n.lineType,m:this.qe,N:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,M:this.He,Fe:this.Ke.U().Rr()}),this.ot},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ui);var oi=function(){function t(){this.tt=null,this.au=0,this.ou=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.Hi.length&&null!==this.tt.M){if(this.au=this.lu(i),this.au>=2)Math.max(1,Math.floor(i))%2!=this.au%2&&this.au--;this.ou=this.tt.fu?Math.min(this.au,Math.floor(i)):this.au;for(var h=null,r=this.ou<=this.au&&this.tt.Rr>=Math.floor(1.5*i),e=this.tt.M.from;e<this.tt.M.to;++e){var u=this.tt.Hi[e];h!==u.et&&(t.fillStyle=u.et,h=u.et);var a=Math.floor(.5*this.ou),o=Math.round(u.p*i),l=o-a,f=this.ou,c=l+f-1,v=Math.min(u.Es,u.Os),_=Math.max(u.Es,u.Os),d=Math.round(v*i)-a,w=Math.round(_*i)+a,M=Math.max(w-d,this.ou);t.fillRect(l,d,f,M);var b=Math.ceil(1.5*this.au);if(r){if(this.tt.cu){var m=o-b,p=Math.max(d,Math.round(u.Fs*i)-a),g=p+f-1;g>d+M-1&&(p=(g=d+M-1)-f+1),t.fillRect(m,p,l-m,g-p+1)}var y=o+b,k=Math.max(d,Math.round(u.Vs*i)-a),C=k+f-1;C>d+M-1&&(k=(C=d+M-1)-f+1),t.fillRect(c+1,k,y-c,C-k+1)}}}},t.prototype.lu=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(f(this.tt).Rr,t)))},t}(),li=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return e(i,t),i.prototype.iu=function(t,i,n){i.Or(this.qe,p(this.He)),t.Ls(this.qe,n,p(this.He))},i.prototype.vu=function(t,i,n){return{S:t,open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3],p:NaN,Fs:NaN,Es:NaN,Os:NaN,Vs:NaN}},i.prototype.Ze=function(){var t=this,i=this.Ye.su();this.qe=this.Ye.Hi().hu().map((function(n){return t.ru(n.Uh,n,i)}))},i}(ei),fi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new oi,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={Hi:this.qe,Rr:this.Ke.U().Rr(),cu:n.openVisible,fu:n.thinBars,M:this.He};return this.ot._(s),this.ot},i.prototype.Ge=function(){var t=this;this.qe.forEach((function(i){i.et=t.Ye.su().du(i.S)._u}))},i.prototype.ru=function(t,i,n){return u(u({},this.vu(t,i,n)),{et:n.du(t)._u})},i}(li),ci=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.Ve=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Pe),s=st(i.Ee/i.Pe,0,1);return n.addColorStop(0,i.wu),n.addColorStop(s,i.Mu),n.addColorStop(s,i.bu),n.addColorStop(1,i.mu),n},i}(Qt),vi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.Re=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Pe),s=st(i.Ee/i.Pe,0,1);return n.addColorStop(0,i.We),n.addColorStop(s,i.We),n.addColorStop(s,i.ze),n.addColorStop(1,i.ze),n},i}(ii),_i=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.pu=new ci,s.gu=new vi,s.T=new g,s.T.i([s.pu,s.gu]),s}return e(i,t),i.prototype.W=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.H();if(null===n)return null;var s=this.Ye.ct();this.Xe();var h=this.Ye.$().K(s.baseValue.price,n.X),r=this.Ke.U().Rr();return this.pu._({m:this.qe,wu:s.topFillColor1,Mu:s.topFillColor2,bu:s.bottomFillColor1,mu:s.bottomFillColor2,rt:s.lineWidth,ut:s.lineStyle,Oe:0,Ee:h,Pe:t,M:this.He,Fe:r}),this.gu._({m:this.qe,We:s.topLineColor,ze:s.bottomLineColor,rt:s.lineWidth,ut:s.lineStyle,Oe:0,Ee:h,Pe:t,M:this.He,Fe:r}),this.T},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ui),di=function(){function t(){this.tt=null,this.au=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.Hi.length&&null!==this.tt.M){if(this.au=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),h=Math.floor(t*i),r=Math.min(s,h);return Math.max(Math.floor(i),r)}(this.tt.Rr,i),this.au>=2)Math.floor(i)%2!=this.au%2&&this.au--;var h=this.tt.Hi;this.tt.yu&&this.ku(t,h,this.tt.M,i),this.tt.Cu&&this.Nu(t,h,this.tt.M,this.tt.Rr,i);var r=this.xu(i);(!this.tt.Cu||this.au>2*r)&&this.Su(t,h,this.tt.M,i)}},t.prototype.ku=function(t,i,n,s){if(null!==this.tt){var h="",r=Math.min(Math.floor(s),Math.floor(this.tt.Rr*s));r=Math.max(Math.floor(s),Math.min(r,this.au));for(var e=Math.floor(.5*r),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Du!==h&&(t.fillStyle=o.Du,h=o.Du);var l=Math.round(Math.min(o.Fs,o.Vs)*s),f=Math.round(Math.max(o.Fs,o.Vs)*s),c=Math.round(o.Es*s),v=Math.round(o.Os*s),_=Math.round(s*o.p)-e,d=_+r-1;null!==u&&(_=Math.max(u+1,_),_=Math.min(_,d));var w=d-_+1;t.fillRect(_,c,w,l-c),t.fillRect(_,f+1,w,v-f),u=d}}},t.prototype.xu=function(t){var i=Math.floor(1*t);this.au<=2*i&&(i=Math.floor(.5*(this.au-1)));var n=Math.max(Math.floor(t),i);return this.au<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.Nu=function(t,i,n,s,h){if(null!==this.tt)for(var r="",e=this.xu(h),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Z!==r&&(t.fillStyle=o.Z,r=o.Z);var l=Math.round(o.p*h)-Math.floor(.5*this.au),f=l+this.au-1,c=Math.round(Math.min(o.Fs,o.Vs)*h),v=Math.round(Math.max(o.Fs,o.Vs)*h);if(null!==u&&(l=Math.max(u+1,l),l=Math.min(l,f)),this.tt.Rr*h>2*e)W(t,l,c,f-l+1,v-c+1,e);else{var _=f-l+1;t.fillRect(l,c,_,v-c+1)}u=f}},t.prototype.Su=function(t,i,n,s){if(null!==this.tt)for(var h="",r=this.xu(s),e=n.from;e<n.to;e++){var u=i[e],a=Math.round(Math.min(u.Fs,u.Vs)*s),o=Math.round(Math.max(u.Fs,u.Vs)*s),l=Math.round(u.p*s)-Math.floor(.5*this.au),f=l+this.au-1;if(u.et!==h){var c=u.et;t.fillStyle=c,h=c}this.tt.Cu&&(l+=r,a+=r,f-=r,o-=r),a>o||t.fillRect(l,a,f-l+1,o-a+1)}},t}(),wi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new di,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={Hi:this.qe,Rr:this.Ke.U().Rr(),yu:n.wickVisible,Cu:n.borderVisible,M:this.He};return this.ot._(s),this.ot},i.prototype.Ge=function(){var t=this;this.qe.forEach((function(i){var n=t.Ye.su().du(i.S);i.et=n._u,i.Du=n.Tu,i.Z=n.Au}))},i.prototype.ru=function(t,i,n){var s=n.du(t);return u(u({},this.vu(t,i,n)),{et:s._u,Du:s.Tu,Z:s.Au})},i}(li),Mi=function(){function t(){this.tt=null,this.Bu=[]}return t.prototype._=function(t){this.tt=t,this.Bu=[]},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.Bu.length||this.Lu(i);for(var h=Math.max(1,Math.floor(i)),r=Math.round(this.tt.Fu*i)-Math.floor(h/2),e=r+h,u=this.tt.M.from;u<this.tt.M.to;u++){var a=this.tt.m[u],o=this.Bu[u-this.tt.M.from],l=Math.round(a.g*i);t.fillStyle=a.et;var f=void 0,c=void 0;l<=r?(f=l,c=e):(f=r,c=l-Math.floor(h/2)+h),t.fillRect(o.uh,f,o.ah-o.uh+1,c-f)}}},t.prototype.Lu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.Rr*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.Rr*t)-i;this.Bu=new Array(this.tt.M.to-this.tt.M.from);for(var s=this.tt.M.from;s<this.tt.M.to;s++){var h,r=this.tt.m[s],e=Math.round(r.p*t),u=void 0,a=void 0;if(n%2)u=e-(h=(n-1)/2),a=e+h;else u=e-(h=n/2),a=e+h-1;this.Bu[s-this.tt.M.from]={uh:u,ah:a,Eu:e,Ou:r.p*t,S:r.S}}for(s=this.tt.M.from+1;s<this.tt.M.to;s++){var o=this.Bu[s-this.tt.M.from],l=this.Bu[s-this.tt.M.from-1];o.S===l.S+1&&(o.uh-l.ah!==i+1&&(l.Eu>l.Ou?l.ah=o.uh-i-1:o.uh=l.ah+i+1))}var f=Math.ceil(this.tt.Rr*t);for(s=this.tt.M.from;s<this.tt.M.to;s++){(o=this.Bu[s-this.tt.M.from]).ah<o.uh&&(o.ah=o.uh);var c=o.ah-o.uh+1;f=Math.min(c,f)}if(i>0&&f<4)for(s=this.tt.M.from;s<this.tt.M.to;s++){(c=(o=this.Bu[s-this.tt.M.from]).ah-o.uh+1)>f&&(o.Eu>o.Ou?o.ah-=1:o.uh+=1)}}else this.Bu=[]},t}();function bi(t){return{m:[],Rr:t,Fu:NaN,M:null}}function mi(t,i,n){return{S:t,D:i,p:NaN,g:NaN,et:n}}var pi=function(t){function i(i,n){var s=t.call(this,i,n,!1)||this;return s.T=new g,s.Vu=bi(0),s.ot=new Mi,s}return e(i,t),i.prototype.W=function(t,i){return this.Ye.q()?(this.Xe(),this.T):null},i.prototype.Ze=function(){var t=this.Ke.U().Rr();this.Vu=bi(t);for(var i=0,n=0,s=this.Ye.ct().color,h=0,r=this.Ye.Hi().hu();h<r.length;h++){var e=r[h],u=e.X[3],a=void 0!==e.et?e.et:s,o=mi(e.Uh,u,a);++i<this.Vu.m.length?this.Vu.m[i]=o:this.Vu.m.push(o),this.qe[n++]={S:e.Uh,p:0}}this.ot._(this.Vu),this.T.i([this.ot])},i.prototype.Ge=function(){},i.prototype.Qe=function(){t.prototype.Qe.call(this),this.Vu.M=null},i.prototype.iu=function(t,i,n){if(null!==this.He){var s=i.Rr(),h=f(i.yr()),r=t.K(this.Ye.ct().base,n);i.Or(this.Vu.m),t.As(this.Vu.m,n),this.Vu.Fu=r,this.Vu.M=ri(this.Vu.m,h,!1),this.Vu.Rr=s,this.ot._(this.Vu)}},i}(ei),gi=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.uu=new ni,s}return e(i,t),i.prototype.W=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={m:this.qe,N:n.color,ut:n.lineStyle,Oe:n.lineType,rt:n.lineWidth,M:this.He,Fe:this.Ke.U().Rr()};return this.uu._(s),this.uu},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ui),yi=/[2-9]/g,ki=function(){function t(t){void 0===t&&(t=50),this.xh=new Map,this.Pu=0,this.Wu=Array.from(new Array(t))}return t.prototype.zu=function(){this.xh.clear(),this.Wu.fill(void 0)},t.prototype.Ot=function(t,i,n){var s=n||yi,h=String(i).replace(s,"0"),r=this.xh.get(h);if(void 0===r){if(0===(r=t.measureText(h).width)&&0!==i.length)return 0;var e=this.Wu[this.Pu];void 0!==e&&this.xh.delete(e),this.Wu[this.Pu]=h,this.Pu=(this.Pu+1)%this.Wu.length,this.xh.set(h,r)}return r},t}(),Ci=function(){function t(t){this.Ru=null,this.ce=null,this.Iu="right",this.Jh=0,this.Uu=t}return t.prototype.ju=function(t,i,n,s){this.Ru=t,this.ce=i,this.Jh=n,this.Iu=s},t.prototype.h=function(t,i){null!==this.ce&&null!==this.Ru&&this.Ru.h(t,this.ce,this.Uu,this.Jh,this.Iu,i)},t}(),Ni=function(){function t(t,i,n){this.qu=t,this.Uu=new ki(50),this.Hu=i,this.F=n,this._e=-1,this.ot=new Ci(this.Uu)}return t.prototype.W=function(t,i){var n=this.F.Yu(this.Hu);if(null===n)return null;var s=n.Ku(this.Hu)?n.$u():this.Hu.$();if(null===s)return null;var h=n.Xu(s);if("overlay"===h)return null;var r=this.F.Zu();return r.Pt!==this._e&&(this._e=r.Pt,this.Uu.zu()),this.ot.ju(this.qu.Zt(),r,i,h),this.ot},t}(),xi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,r){if(null!==this.tt&&!1!==this.tt.q){var e=Math.round(this.tt.g*i);if(!(e<0||e>Math.ceil(this.tt.Mt*i))){var u=Math.ceil(this.tt.wt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),s(t,this.tt.ut),h(t,e,0,u)}}},t}(),Si=function(){function t(t){this.Ju={wt:0,Mt:0,g:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,q:!1},this.Gu=new xi,this.L=!0,this.Ye=t,this.Ke=t.vt(),this.Gu._(this.Ju)}return t.prototype.V=function(){this.L=!0},t.prototype.W=function(t,i){return this.Ye.q()?(this.L&&(this.Qu(t,i),this.L=!1),this.Gu):null},t}(),Di=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Qu=function(t,i){this.Ju.q=!1;var n=this.Ye.$(),s=n.cs().cs;if(2===s||3===s){var h=this.Ye.ct();if(h.baseLineVisible&&this.Ye.q()){var r=this.Ye.H();null!==r&&(this.Ju.q=!0,this.Ju.g=n.K(r.X,r.X),this.Ju.wt=i,this.Ju.Mt=t,this.Ju.et=h.baseLineColor,this.Ju.rt=h.baseLineWidth,this.Ju.ut=h.baseLineStyle)}}},i}(Si),Ti=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.ta=function(){return this.tt},t.prototype.h=function(t,i,n,s){var h=this.tt;if(null!==h){t.save();var r=Math.max(1,Math.floor(i)),e=r%2/2,u=Math.round(h.Ou.x*i)+e,a=h.Ou.y*i;t.fillStyle=h.ia,t.beginPath();var o=Math.max(2,1.5*h.na)*i;t.arc(u,a,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=h.sa,t.beginPath(),t.arc(u,a,h.C*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=h.ha,t.beginPath(),t.arc(u,a,h.C*i+r/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),Ai=[{ra:0,ea:.25,ua:4,aa:10,oa:.25,la:0,fa:.4,ca:.8},{ra:.25,ea:.525,ua:10,aa:14,oa:0,la:0,fa:.8,ca:0},{ra:.525,ea:1,ua:14,aa:14,oa:0,la:0,fa:0,ca:0}];function Bi(t,i,n,s){return function(t,i){if("transparent"===t)return t;var n=V(t),s=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*s,")")}(t,n+(s-n)*i)}function Li(t,i){for(var n,s=t%2600/2600,h=0,r=Ai;h<r.length;h++){var e=r[h];if(s>=e.ra&&s<=e.ea){n=e;break}}o(void 0!==n,"Last price animation internal logic error");var u,a,l,f=(s-n.ra)/(n.ea-n.ra);return{sa:Bi(i,f,n.oa,n.la),ha:Bi(i,f,n.fa,n.ca),C:(u=f,a=n.ua,l=n.aa,a+(l-a)*u)}}var Fi=function(){function t(t){this.ot=new Ti,this.L=!0,this.va=!0,this._a=performance.now(),this.da=this._a-1,this.wa=t}return t.prototype.Ma=function(){this.da=this._a-1,this.V()},t.prototype.ba=function(){if(this.V(),2===this.wa.ct().lastPriceAnimation){var t=performance.now(),i=this.da-t;if(i>0)return void(i<650&&(this.da+=2600));this._a=t,this.da=t+2600}},t.prototype.V=function(){this.L=!0},t.prototype.ma=function(){this.va=!0},t.prototype.q=function(){return 0!==this.wa.ct().lastPriceAnimation},t.prototype.pa=function(){switch(this.wa.ct().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.da}},t.prototype.W=function(t,i){return this.L?(this.R(t,i),this.L=!1,this.va=!1):this.va&&(this.ga(),this.va=!1),this.ot},t.prototype.R=function(t,i){this.ot._(null);var n=this.wa.vt().U(),s=n.yr(),h=this.wa.H();if(null!==s&&null!==h){var r=this.wa.ya(!0);if(!r.ka&&s.Ph(r.Uh)){var e={x:n.G(r.Uh),y:this.wa.$().K(r.D,h.X)},u=r.et,a=this.wa.ct().lineWidth,o=Li(this.Ca(),u);this.ot._({ia:u,na:a,sa:o.sa,ha:o.ha,C:o.C,Ou:e})}}},t.prototype.ga=function(){var t=this.ot.ta();if(null!==t){var i=Li(this.Ca(),t.ia);t.sa=i.sa,t.ha=i.ha,t.C=i.C}},t.prototype.Ca=function(){return this.pa()?performance.now()-this._a:2599},t}();function Ei(t,i){return ut(Math.min(Math.max(t,12),30)*i)}function Oi(t,i){switch(t){case"arrowDown":case"arrowUp":case"caretDown":case"caretUp":return Ei(i,1);case"circle":return Ei(i,.8);case"square":return Ei(i,.7)}}function Vi(t){return et(Ei(t,1))}function Pi(t){return Math.max(Ei(t,.1),3)}function Wi(t,i,n,s,h){var r=Oi("square",n),e=(r-1)/2,u=t-e,a=i-e;return s>=u&&s<=u+r&&h>=a&&h<=a+r}function zi(t,i,n,s,h){var r=(Oi("arrowUp",h)-1)/2,e=(ut(h/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,s),i.lineTo(n,s-r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s+r),i.lineTo(n-e,s+r),i.lineTo(n-e,s)):(i.moveTo(n-r,s),i.lineTo(n,s+r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s-r),i.lineTo(n-e,s-r),i.lineTo(n-e,s)),i.fill()}function Ri(t,i,n,s,h,r){return Wi(i,n,s,h,r)}function Ii(t,i,n,s,h){var r=(Oi("caretUp",h)-1)/2,e=r/2;i.beginPath(),t?(i.moveTo(n-r,s+e),i.lineTo(n,s-e),i.lineTo(n+r,s+e)):(i.moveTo(n-r,s-e),i.lineTo(n,s+e),i.lineTo(n+r,s-e)),i.fill()}function Ui(t,i,n,s,h,r){return Wi(i,n,s,h,r)}var ji=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.Uu=new ki,i._e=-1,i.de="",i.Na="",i}return e(i,t),i.prototype._=function(t){this.tt=t},i.prototype.ju=function(t,i){this._e===t&&this.de===i||(this._e=t,this.de=i,this.Na=Kt(t,i),this.Uu.zu())},i.prototype.xa=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var s=this.tt.m[n];if(Hi(s,t,i))return{Sa:s.Da,Ta:s.Ta}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.Na;for(var s=this.tt.M.from;s<this.tt.M.to;s++){var h=this.tt.m[s];void 0!==h.Et&&(h.Et.wt=this.Uu.Ot(t,h.Et.Aa),h.Et.Mt=this._e),qi(h,t)}}},i}(y);function qi(t,i){i.fillStyle=t.et,void 0!==t.Et&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.Et.Aa,t.p-t.Et.wt/2,t.Et.g),function(t,i){if(0===t.tu)return;switch(t.Ba){case"arrowDown":return void zi(!1,i,t.p,t.g,t.tu);case"arrowUp":return void zi(!0,i,t.p,t.g,t.tu);case"caretDown":return void Ii(!1,i,t.p,t.g,t.tu);case"caretUp":return void Ii(!0,i,t.p,t.g,t.tu);case"circle":return void function(t,i,n,s){var h=(Oi("circle",s)-1)/2;t.beginPath(),t.arc(i,n,h,0,2*Math.PI,!1),t.fill()}(i,t.p,t.g,t.tu);case"square":return void function(t,i,n,s){var h=Oi("square",s),r=(h-1)/2,e=i-r,u=n-r;t.fillRect(e,u,h,h)}(i,t.p,t.g,t.tu)}t.Ba}(t,i)}function Hi(t,i,n){return!(void 0===t.Et||!function(t,i,n,s,h,r){var e=s/2;return h>=t&&h<=t+n&&r>=i-e&&r<=i+e}(t.p,t.Et.g,t.Et.wt,t.Et.Mt,i,n))||function(t,i,n){if(0===t.tu)return!1;switch(t.Ba){case"arrowDown":case"arrowUp":return Ri(0,t.p,t.g,t.tu,i,n);case"caretDown":case"caretUp":return Ui(0,t.p,t.g,t.tu,i,n);case"circle":return function(t,i,n,s,h){var r=2+Oi("circle",n)/2,e=t-s,u=i-h;return Math.sqrt(e*e+u*u)<=r}(t.p,t.g,t.tu,i,n);case"square":return Wi(t.p,t.g,t.tu,i,n)}}(t,i,n)}function Yi(t,i,n,s,h,r,e,u,a){var o=_(n)?n:n.close,l=_(n)?n:n.high,f=_(n)?n:n.low,c=_(i.size)?Math.max(i.size,0):1,v=Vi(u.Rr())*c,d=v/2;switch(t.tu=v,i.position){case"inBar":return t.g=e.K(o,a),void(void 0!==t.Et&&(t.Et.g=t.g+d+r+.6*h));case"aboveBar":return t.g=e.K(l,a)-d-s.La,void 0!==t.Et&&(t.Et.g=t.g-d-.6*h,s.La+=1.2*h),void(s.La+=v+r);case"belowBar":return t.g=e.K(f,a)+d+s.Fa,void 0!==t.Et&&(t.Et.g=t.g+d+r+.6*h,s.Fa+=1.2*h),void(s.Fa+=v+r);case"onPrice":return t.g=e.K(i.price,a),void(void 0!==t.Et&&(t.Et.g=t.g+r+.6*h))}i.position}var Ki=function(){function t(t,i){this.L=!0,this.Ea=!0,this.Oa=!0,this.Va=null,this.ot=new ji,this.wa=t,this.hi=i,this.tt={m:[],M:null}}return t.prototype.V=function(t){this.L=!0,this.Oa=!0,"data"===t&&(this.Ea=!0)},t.prototype.W=function(t,i,n){if(!this.wa.q())return null;this.L&&this.Xe();var s=this.hi.ct().layout;return this.ot.ju(s.fontSize,s.fontFamily),this.ot._(this.tt),this.ot},t.prototype.Pa=function(){if(this.Oa){if(this.wa.Wa().length>0){var t=this.hi.U().Rr(),i=Pi(t),n=1.5*Vi(t)+2*i;this.Va={above:n,below:n}}else this.Va=null;this.Oa=!1}return this.Va},t.prototype.Xe=function(){var t=this.wa.$(),i=this.hi.U(),n=this.wa.Wa();this.Ea&&(this.tt.m=n.map((function(t){return{S:t.time,p:0,g:0,tu:0,Ba:t.shape,et:t.color,Da:t.Da,Ta:t.id,Et:void 0}})),this.Ea=!1);var s=this.hi.ct().layout;this.tt.M=null;var h=i.yr();if(null!==h){var r=this.wa.H();if(null!==r&&0!==this.tt.m.length){var e=NaN,u=Pi(i.Rr()),a={La:u,Fa:u};this.tt.M=ri(this.tt.m,h,!0);for(var o=this.tt.M.from;o<this.tt.M.to;o++){var l=n[o];l.time!==e&&(a.La=u,a.Fa=u,e=l.time);var f=this.tt.m[o];f.p=i.G(l.time),void 0!==l.text&&l.text.length>0&&(f.Et={Aa:l.text,g:0,wt:0,Mt:0});var c=this.wa.za(l.time);null!==c&&Yi(f,l,c,a,s.fontSize,u,t,i,r.X)}this.L=!1}}},t}(),$i=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Qu=function(t,i){var n=this.Ju;n.q=!1;var s=this.Ye.ct();if(s.priceLineVisible&&this.Ye.q()){var h=this.Ye.ya(0===s.priceLineSource);h.ka||(n.q=!0,n.g=h.Wt,n.et=this.Ye.Ra(h.et),n.wt=i,n.Mt=t,n.rt=s.priceLineWidth,n.ut=s.priceLineStyle)}},i}(Si),Xi=function(t){function i(i){var n=t.call(this)||this;return n.lt=i,n}return e(i,t),i.prototype.Jt=function(t,i,n){t.q=!1,i.q=!1;var s=this.lt;if(s.q()){var h=s.ct(),r=h.lastValueVisible,e=""!==s.Ia(),u=0===h.seriesLastValueMode,a=s.ya(!1);if(!a.ka){r&&(t.Et=this.Ua(a,r,u),t.q=0!==t.Et.length),(e||u)&&(i.Et=this.ja(a,r,e,u),i.q=i.Et.length>0);var o=s.Ra(a.et),l=P(o);n.yt=l.yt,n.et=l.kt,n.Wt=a.Wt,i.Z=s.vt().J(a.Wt/s.$().Mt()),t.Z=o}}},i.prototype.ja=function(t,i,n,s){var h="",r=this.lt.Ia();return n&&0!==r.length&&(h+="".concat(r," ")),i&&s&&(h+=this.lt.$().ds()?t.qa:t.Ha),h.trim()},i.prototype.Ua=function(t,i,n){return i?n?this.lt.$().ds()?t.Ha:t.qa:t.Et:""},i}(q),Zi=function(){function t(t,i){this.Wn=t,this.Ya=i||null}return t.prototype.Ss=function(){return this.Wn},t.prototype.oh=function(){return this.Ya},t.prototype.Mn=function(){return null===this.Wn?null:{priceRange:this.Wn.Mn(),margins:this.Ya||void 0}},t.bn=function(i){return null===i?null:new t(nt.bn(i.priceRange),i.margins)},t}(),Ji=function(t){function i(i,n){var s=t.call(this,i)||this;return s.Ka=n,s}return e(i,t),i.prototype.Qu=function(t,i){var n=this.Ju;if(n.q=!1,this.Ye.q()){var s=this.Ka.$a();if(null!==s){var h=this.Ka.ct();n.q=!0,n.g=s,n.et=h.color,n.wt=i,n.Mt=t,n.rt=h.lineWidth,n.ut=h.lineStyle}}},i}(Si),Gi=function(t){function i(i,n){var s=t.call(this)||this;return s.wa=i,s.Ka=n,s}return e(i,t),i.prototype.Jt=function(t,i,n){t.q=!1,i.q=!1;var s=this.Ka.ct(),h=s.axisLabelVisible,r=""!==s.title,e=this.wa;if(h&&e.q()){var u=this.Ka.$a();if(null!==u){r&&(i.Et=s.title,i.q=!0),i.Z=e.vt().J(u/e.$().Mt()),t.Et=e.$().Qs(s.price),t.q=!0;var a=P(s.color);n.yt=a.yt,n.et=a.kt,n.Wt=u}}},i}(q),Qi=function(){function t(t,i){this.wa=t,this.ki=i,this.Xa=new Ji(t,this),this.qu=new Gi(t,this),this.Za=new Ni(this.qu,t,t.vt())}return t.prototype.os=function(t){v(this.ki,t),this.V(),this.wa.vt().zr()},t.prototype.ct=function(){return this.ki},t.prototype.Wi=function(){return[this.Xa,this.Za]},t.prototype.Ja=function(){return this.qu},t.prototype.V=function(){this.Xa.V(),this.qu.V()},t.prototype.$a=function(){var t=this.wa,i=t.$();if(t.vt().U().ti()||i.ti())return null;var n=t.H();return null===n?null:i.K(this.ki.price,n.X)},t}(),tn=function(t){function i(i){var n=t.call(this)||this;return n.hi=i,n}return e(i,t),i.prototype.vt=function(){return this.hi},i}(X),nn={_u:"",Au:"",Tu:""},sn=function(){function t(t){this.wa=t}return t.prototype.du=function(t,i){var n=this.wa.Ga(),s=this.wa.ct();switch(n){case"Line":return this.Qa(s);case"Area":return this.io(s);case"Baseline":return this.no(s,t,i);case"Bar":return this.so(s,t,i);case"Candlestick":return this.ho(s,t,i);case"Histogram":return this.ro(s,t,i)}throw new Error("Unknown chart style")},t.prototype.so=function(t,i,n){var s=u({},nn),h=t.upColor,r=t.downColor,e=h,a=r,o=f(this.eo(i,n)),l=c(o.X[0])<=c(o.X[3]);return s._u=l?h:r,s.Au=l?e:a,s},t.prototype.ho=function(t,i,n){var s=u({},nn),h=t.upColor,r=t.downColor,e=t.borderUpColor,a=t.borderDownColor,o=t.wickUpColor,l=t.wickDownColor,v=f(this.eo(i,n)),_=c(v.X[0])<=c(v.X[3]);return s._u=_?h:r,s.Au=_?e:a,s.Tu=_?o:l,s},t.prototype.io=function(t){return u(u({},nn),{_u:t.lineColor})},t.prototype.no=function(t,i,n){var s=f(this.eo(i,n)).X[3]>=t.baseValue.price;return u(u({},nn),{_u:s?t.topLineColor:t.bottomLineColor})},t.prototype.Qa=function(t){return u(u({},nn),{_u:t.color})},t.prototype.ro=function(t,i,n){var s=u({},nn),h=f(this.eo(i,n));return s._u=void 0!==h.et?h.et:t.color,s},t.prototype.eo=function(t,i){return void 0!==i?i.X:this.wa.Hi().uo(t)},t}(),hn=function(){function t(){this.ao=[],this.oo=new Map,this.lo=new Map}return t.prototype.fo=function(){return this.tu()>0?this.ao[this.ao.length-1]:null},t.prototype.co=function(){return this.tu()>0?this.vo(0):null},t.prototype.qi=function(){return this.tu()>0?this.vo(this.ao.length-1):null},t.prototype.tu=function(){return this.ao.length},t.prototype.ti=function(){return 0===this.tu()},t.prototype.Ph=function(t){return null!==this._o(t,0)},t.prototype.uo=function(t){return this.do(t)},t.prototype.do=function(t,i){void 0===i&&(i=0);var n=this._o(t,i);return null===n?null:u(u({},this.wo(n)),{Uh:this.vo(n)})},t.prototype.hu=function(){return this.ao},t.prototype.Mo=function(t,i,n){if(this.ti())return null;for(var s=null,h=0,r=n;h<r.length;h++){var e=r[h];s=rn(s,this.bo(t,i,e))}return s},t.prototype._=function(t){this.lo.clear(),this.oo.clear(),this.ao=t},t.prototype.vo=function(t){return this.ao[t].Uh},t.prototype.wo=function(t){return this.ao[t]},t.prototype._o=function(t,i){var n=this.mo(t);if(null===n&&0!==i)switch(i){case-1:return this.po(t);case 1:return this.yo(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.po=function(t){var i=this.ko(t);return i>0&&(i-=1),i!==this.ao.length&&this.vo(i)<t?i:null},t.prototype.yo=function(t){var i=this.Co(t);return i!==this.ao.length&&t<this.vo(i)?i:null},t.prototype.mo=function(t){var i=this.ko(t);return i===this.ao.length||t<this.ao[i].Uh?null:i},t.prototype.ko=function(t){return Et(this.ao,t,(function(t,i){return t.Uh<i}))},t.prototype.Co=function(t){return Ot(this.ao,t,(function(t,i){return i.Uh>t}))},t.prototype.No=function(t,i,n){for(var s=null,h=t;h<i;h++){var r=this.ao[h].X[n];Number.isNaN(r)||(null===s?s={xo:r,So:r}:(r<s.xo&&(s.xo=r),r>s.So&&(s.So=r)))}return s},t.prototype.bo=function(t,i,n){if(this.ti())return null;var s=null,h=f(this.co()),r=f(this.qi()),e=Math.max(t,h),u=Math.min(i,r),a=30*Math.ceil(e/30),o=Math.max(a,30*Math.floor(u/30)),l=this.ko(e),c=this.Co(Math.min(u,a,i));s=rn(s,this.No(l,c,n));var v=this.oo.get(n);void 0===v&&(v=new Map,this.oo.set(n,v));for(var _=Math.max(a+1,e);_<o;_+=30){var d=Math.floor(_/30),w=v.get(d);if(void 0===w){var M=this.ko(30*d),b=this.Co(30*(d+1)-1);w=this.No(M,b,n),v.set(d,w)}s=rn(s,w)}l=this.ko(o),c=this.Co(u);return s=rn(s,this.No(l,c,n))},t}();function rn(t,i){return null===t?i:null===i?t:{xo:Math.min(t.xo,i.xo),So:Math.max(t.So,i.So)}}var en=function(t){function i(i,n,s){var h=t.call(this,i)||this;h.tt=new hn,h.Xa=new $i(h),h.Do=[],h.To=new Di(h),h.Ao=null,h.Bo=null,h.Lo=[],h.Fo=[],h.Eo=null,h.ki=n,h.Oo=s;var r=new Xi(h);return h.Mi=[r],h.Za=new Ni(r,h,i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.Ao=new Fi(h)),h.Vo(),h.Po(),h}return e(i,t),i.prototype.en=function(){null!==this.Eo&&clearTimeout(this.Eo)},i.prototype.Ra=function(t){return this.ki.priceLineColor||t},i.prototype.ya=function(t){var i={ka:!0},n=this.$();if(this.vt().U().ti()||n.ti()||this.tt.ti())return i;var s,h,r=this.vt().U().yr(),e=this.H();if(null===r||null===e)return i;if(t){var u=this.tt.fo();if(null===u)return i;s=u,h=u.Uh}else{var a=this.tt.do(r.ah(),-1);if(null===a)return i;if(null===(s=this.tt.uo(a.Uh)))return i;h=a.Uh}var o=s.X[3],l=this.su().du(h,{X:s}),f=n.K(o,e.X);return{ka:!1,D:o,Et:n.ii(o,e.X),qa:n.Qs(o),Ha:n.ih(o,e.X),et:l._u,Wt:f,Uh:h}},i.prototype.su=function(){return null!==this.Bo||(this.Bo=new sn(this)),this.Bo},i.prototype.ct=function(){return this.ki},i.prototype.os=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.ki.priceScaleId&&this.vt().Wo(this,i),v(this.ki,t),null!==this.ui&&void 0!==t.scaleMargins&&this.ui.os({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Vo(),this.vt().zo(this),this.vt().Ro(),this.Ti.V("options")},i.prototype._=function(t,i){this.tt._(t),this.Io(),this.Ti.V("data"),this.Ci.V("data"),null!==this.Ao&&(i&&i.Uo?this.Ao.ba():0===t.length&&this.Ao.Ma());var n=this.vt().Yu(this);this.vt().jo(n),this.vt().zo(this),this.vt().Ro(),this.vt().zr()},i.prototype.qo=function(t){this.Lo=t.map((function(t){return u({},t)})),this.Io();var i=this.vt().Yu(this);this.Ci.V("data"),this.vt().jo(i),this.vt().zo(this),this.vt().Ro(),this.vt().zr()},i.prototype.Wa=function(){return this.Fo},i.prototype.Ho=function(t){var i=new Qi(this,t);return this.Do.push(i),this.vt().zo(this),i},i.prototype.Yo=function(t){var i=this.Do.indexOf(t);-1!==i&&this.Do.splice(i,1),this.vt().zo(this)},i.prototype.Ga=function(){return this.Oo},i.prototype.H=function(){var t=this.Ko();return null===t?null:{X:t.X[3],js:t.S}},i.prototype.Ko=function(){var t=this.vt().U().yr();if(null===t)return null;var i=t.uh();return this.tt.do(i,1)},i.prototype.Hi=function(){return this.tt},i.prototype.za=function(t){var i=this.tt.uo(t);return null===i?null:"Bar"===this.Oo||"Candlestick"===this.Oo?{open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3]}:i.X[3]},i.prototype.$o=function(t){var i=this,n=this.Ao;return null!==n&&n.q()?(null===this.Eo&&n.pa()&&(this.Eo=setTimeout((function(){i.Eo=null,i.vt().Xo()}),0)),n.ma(),[n]):[]},i.prototype.Wi=function(){var t=[];this.Zo()||t.push(this.To);for(var i=0,n=this.Do;i<n.length;i++){var s=n[i];t.push.apply(t,s.Wi())}return t.push(this.Ti,this.Xa,this.Za,this.Ci),t},i.prototype.zi=function(t,i){if(i!==this.ui&&!this.Zo())return[];for(var n=a([],this.Mi,!0),s=0,h=this.Do;s<h.length;s++){var r=h[s];n.push(r.Ja())}return n},i.prototype.eh=function(t,i){var n=this;if(void 0!==this.ki.autoscaleInfoProvider){var s=this.ki.autoscaleInfoProvider((function(){var s=n.Jo(t,i);return null===s?null:s.Mn()}));return Zi.bn(s)}return this.Jo(t,i)},i.prototype.hh=function(){return this.ki.priceFormat.minMove},i.prototype.Js=function(){return this.Gn},i.prototype.Ii=function(){var t;this.Ti.V(),this.Ci.V();for(var i=0,n=this.Mi;i<n.length;i++){n[i].V()}for(var s=0,h=this.Do;s<h.length;s++){h[s].V()}this.Xa.V(),this.To.V(),null===(t=this.Ao)||void 0===t||t.V()},i.prototype.$=function(){return f(t.prototype.$.call(this))},i.prototype.j=function(t){if(!(("Line"===this.Oo||"Area"===this.Oo||"Baseline"===this.Oo)&&this.ki.crosshairMarkerVisible))return null;var i=this.tt.uo(t);return null===i?null:{D:i.X[3],C:this.Go(),Z:this.Qo(),Y:this.tl(t)}},i.prototype.Ia=function(){return this.ki.title},i.prototype.q=function(){return this.ki.visible},i.prototype.Zo=function(){return!Xt(this.$().us())},i.prototype.Jo=function(t,i){if(!d(t)||!d(i)||this.tt.ti())return null;var n="Line"===this.Oo||"Area"===this.Oo||"Baseline"===this.Oo||"Histogram"===this.Oo?[3]:[2,1],s=this.tt.Mo(t,i,n),h=null!==s?new nt(s.xo,s.So):null;if("Histogram"===this.Ga()){var r=this.ki.base,e=new nt(r,r);h=null!==h?h._n(e):e}return new Zi(h,this.Ci.Pa())},i.prototype.Go=function(){switch(this.Oo){case"Line":case"Area":case"Baseline":return this.ki.crosshairMarkerRadius}return 0},i.prototype.Qo=function(){switch(this.Oo){case"Line":case"Area":case"Baseline":var t=this.ki.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.tl=function(t){switch(this.Oo){case"Line":case"Area":case"Baseline":var i=this.ki.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.su().du(t)._u},i.prototype.Vo=function(){switch(this.ki.priceFormat.type){case"custom":this.Gn={format:this.ki.priceFormat.formatter};break;case"volume":this.Gn=new Jt(this.ki.priceFormat.precision);break;case"percent":this.Gn=new tt(this.ki.priceFormat.precision);break;default:var t=Math.pow(10,this.ki.priceFormat.precision);this.Gn=new Q(t,this.ki.priceFormat.minMove*t)}null!==this.ui&&this.ui.ls()},i.prototype.Io=function(){var t=this,i=this.vt().U();if(i.ti()||0===this.tt.tu())this.Fo=[];else{var n=f(this.tt.co());this.Fo=this.Lo.map((function(s,h){var r=f(i.gr(s.time,!0)),e=r<n?1:-1;return{time:f(t.tt.do(r,e)).Uh,price:s.price,position:s.position,shape:s.shape,color:s.color,id:s.id,Da:h,text:s.text,size:s.size}}))}},i.prototype.Po=function(){switch(this.Ci=new Ki(this,this.vt()),this.Oo){case"Bar":this.Ti=new fi(this,this.vt());break;case"Candlestick":this.Ti=new wi(this,this.vt());break;case"Line":this.Ti=new gi(this,this.vt());break;case"Area":this.Ti=new ai(this,this.vt());break;case"Baseline":this.Ti=new _i(this,this.vt());break;case"Histogram":this.Ti=new pi(this,this.vt());break;default:throw Error("Unknown chart style assigned: "+this.Oo)}},i}(tn),un=function(){function t(t){this.ki=t}return t.prototype.il=function(t,i,n){var s=t;if(0===this.ki.mode)return s;var h=n.xi(),r=h.H();if(null===r)return s;var e=h.K(t,r),u=n.Ws().filter((function(t){return t instanceof en})).reduce((function(t,s){if(n.Ku(s)||!s.q())return t;var h=s.$(),r=s.Hi();if(h.ti()||!r.Ph(i))return t;var e=r.uo(i);if(null===e)return t;var u=c(s.H());return t.concat([h.K(e.X[3],u.X)])}),[]);if(0===u.length)return s;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var a=u[0];return s=h.Si(a,r)},t}(),an=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,h){var r=this;if(null!==this.tt){var e=Math.max(1,Math.floor(i));t.lineWidth=e;var u=Math.ceil(this.tt.ht*i),a=Math.ceil(this.tt.st*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=f(r.tt);if(n.nl){t.strokeStyle=n.sl,s(t,n.hl),t.beginPath();for(var h=0,o=n.rl;h<o.length;h++){var l=o[h],c=Math.round(l.Bn*i);t.moveTo(c,-e),t.lineTo(c,u+e)}t.stroke()}if(n.el){t.strokeStyle=n.ul,s(t,n.al),t.beginPath();for(var v=0,_=n.ol;v<_.length;v++){var d=_[v],w=Math.round(d.Bn*i);t.moveTo(-e,w),t.lineTo(a+e,w)}t.stroke()}}))}},t}(),on=function(){function t(t){this.ot=new an,this.L=!0,this.vi=t}return t.prototype.V=function(){this.L=!0},t.prototype.W=function(t,i){if(this.L){var n=this.vi.vt().ct().grid,s={ht:t,st:i,el:n.horzLines.visible,nl:n.vertLines.visible,ul:n.horzLines.color,sl:n.vertLines.color,al:n.horzLines.style,hl:n.vertLines.style,ol:this.vi.xi().On(),rl:this.vi.vt().U().On()||[]};this.ot._(s),this.L=!1}return this.ot},t}(),ln=function(){function t(t){this.Ti=new on(t)}return t.prototype.ll=function(){return this.Ti},t}(),fn=function(){function t(t,i){this.Kn=[],this.fl=new Map,this.Vn=0,this.Jh=0,this.cl=1e3,this.$n=null,this.vl=new it,this._l=t,this.hi=i,this.dl=new ln(this);var n=i.ct();this.wl=this.Ml("left",n.leftPriceScale),this.bl=this.Ml("right",n.rightPriceScale),this.wl.ys().Ji(this.ml.bind(this,this.wl),this),this.bl.ys().Ji(this.ml.bind(this,this.wl),this),this.pl(n)}return t.prototype.pl=function(t){if(t.leftPriceScale&&this.wl.os(t.leftPriceScale),t.rightPriceScale&&this.bl.os(t.rightPriceScale),t.localization&&(this.wl.ls(),this.bl.ls()),t.overlayPriceScales)for(var i=0,n=Array.from(this.fl.values());i<n.length;i++){var s=f(n[i][0].$());s.os(t.overlayPriceScales),t.localization&&s.ls()}},t.prototype.gl=function(t){switch(t){case"left":return this.wl;case"right":return this.bl}return this.fl.has(t)?l(this.fl.get(t))[0].$():null},t.prototype.en=function(){this.vt().yl().sn(this),this.wl.ys().sn(this),this.bl.ys().sn(this),this.Kn.forEach((function(t){t.en&&t.en()})),this.vl.hn()},t.prototype.kl=function(){return this.cl},t.prototype.Cl=function(t){this.cl=t},t.prototype.vt=function(){return this.hi},t.prototype.wt=function(){return this.Jh},t.prototype.Mt=function(){return this.Vn},t.prototype.Br=function(t){this.Jh=t,this.Nl()},t.prototype.ks=function(t){var i=this;this.Vn=t,this.wl.ks(t),this.bl.ks(t),this.Kn.forEach((function(n){if(i.Ku(n)){var s=n.$();null!==s&&s.ks(t)}})),this.Nl()},t.prototype.Ws=function(){return this.Kn},t.prototype.Ku=function(t){var i=t.$();return null===i||this.wl!==i&&this.bl!==i},t.prototype.Rs=function(t,i,n){var s=void 0!==n?n:this.Sl().xl+1;this.Dl(t,i,s)},t.prototype.Us=function(t){var i=this.Kn.indexOf(t);o(-1!==i,"removeDataSource: invalid data source"),this.Kn.splice(i,1);var n=f(t.$()).us();if(this.fl.has(n)){var s=l(this.fl.get(n)),h=s.indexOf(t);-1!==h&&(s.splice(h,1),0===s.length&&this.fl.delete(n))}var r=t.$();r&&r.Ws().indexOf(t)>=0&&r.Us(t),null!==r&&(r.Is(),this.Tl(r)),this.$n=null},t.prototype.Xu=function(t){return t===this.wl?"left":t===this.bl?"right":"overlay"},t.prototype.Al=function(){return this.wl},t.prototype.Bl=function(){return this.bl},t.prototype.Ll=function(t,i){t.Hs(i)},t.prototype.Fl=function(t,i){t.Ys(i),this.Nl()},t.prototype.El=function(t){t.Ks()},t.prototype.Ol=function(t,i){t.$s(i)},t.prototype.Vl=function(t,i){t.Xs(i),this.Nl()},t.prototype.Pl=function(t){t.Zs()},t.prototype.Nl=function(){this.Kn.forEach((function(t){t.Ii()}))},t.prototype.xi=function(){var t=null;return this.hi.ct().rightPriceScale.visible&&0!==this.bl.Ws().length?t=this.bl:this.hi.ct().leftPriceScale.visible&&0!==this.wl.Ws().length?t=this.wl:0!==this.Kn.length&&(t=this.Kn[0].$()),null===t&&(t=this.bl),t},t.prototype.$u=function(){var t=null;return this.hi.ct().rightPriceScale.visible?t=this.bl:this.hi.ct().leftPriceScale.visible&&(t=this.wl),t},t.prototype.Tl=function(t){null!==t&&t._s()&&this.Wl(t)},t.prototype.zl=function(t){var i=this._l.yr();t.fs({Ms:!0}),null!==i&&t.sh(i),this.Nl()},t.prototype.Rl=function(){this.Wl(this.wl),this.Wl(this.bl)},t.prototype.Il=function(){var t=this;this.Tl(this.wl),this.Tl(this.bl),this.Kn.forEach((function(i){t.Ku(i)&&t.Tl(i.$())})),this.Nl(),this.hi.zr()},t.prototype.zs=function(){return null===this.$n&&(this.$n=gt(this.Kn)),this.$n},t.prototype.Ul=function(){return this.vl},t.prototype.jl=function(){return this.dl},t.prototype.Wl=function(t){var i=t.nh();if(i&&i.length>0&&!this._l.ti()){var n=this._l.yr();null!==n&&t.sh(n)}t.Ii()},t.prototype.Sl=function(){var t=this.zs();if(0===t.length)return{ql:0,xl:0};for(var i=0,n=0,s=0;s<t.length;s++){var h=t[s].oi();null!==h&&(h<i&&(i=h),h>n&&(n=h))}return{ql:i,xl:n}},t.prototype.Dl=function(t,i,n){var s=this.gl(i);if(null===s&&(s=this.Ml(i,this.hi.ct().overlayPriceScales)),this.Kn.push(t),!Xt(i)){var h=this.fl.get(i)||[];h.push(t),this.fl.set(i,h)}s.Rs(t),t.fi(s),t.li(n),this.Tl(s),this.$n=null},t.prototype.ml=function(t,i,n){i.cs!==n.cs&&this.Wl(t)},t.prototype.Ml=function(t,i){var n=u({visible:!0,autoScale:!0},b(i)),s=new xt(t,n,this.hi.ct().layout,this.hi.ct().localization);return s.ks(this.Mt()),s},t}(),cn=function(t){function i(i){var n=t.call(this)||this;return n.Hl=new Map,n.tt=i,n}return e(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.q){t.save();for(var i=0,n=0,s=this.tt.Yl;n<s.length;n++){if(0!==(a=s[n]).Et.length){t.font=a.Nt;var h=this.Kl(t,a.Et);h>this.tt.wt?a.Kr=this.tt.wt/h:a.Kr=1,i+=a.$l*a.Kr}}var r=0;switch(this.tt.Xl){case"top":r=0;break;case"center":r=Math.max((this.tt.Mt-i)/2,0);break;case"bottom":r=Math.max(this.tt.Mt-i,0)}t.fillStyle=this.tt.et;for(var e=0,u=this.tt.Yl;e<u.length;e++){var a=u[e];t.save();var o=0;switch(this.tt.Zl){case"left":t.textAlign="left",o=a.$l/2;break;case"center":t.textAlign="center",o=this.tt.wt/2;break;case"right":t.textAlign="right",o=this.tt.wt-1-a.$l/2}t.translate(o,r),t.textBaseline="top",t.font=a.Nt,t.scale(a.Kr,a.Kr),t.fillText(a.Et,0,a.Jl),t.restore(),r+=a.$l*a.Kr}t.restore()}},i.prototype.Kl=function(t,i){var n=this.Gl(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},i.prototype.Gl=function(t){var i=this.Hl.get(t);return void 0===i&&(i=new Map,this.Hl.set(t,i)),i},i}(y),vn=function(){function t(t){this.L=!0,this.at={q:!1,et:"",Mt:0,wt:0,Yl:[],Xl:"center",Zl:"center"},this.ot=new cn(this.at),this.lt=t}return t.prototype.V=function(){this.L=!0},t.prototype.W=function(t,i){return this.L&&(this.R(t,i),this.L=!1),this.ot},t.prototype.R=function(t,i){var n=this.lt.ct(),s=this.at;s.q=n.visible,s.q&&(s.et=n.color,s.wt=i,s.Mt=t,s.Zl=n.horzAlign,s.Xl=n.vertAlign,s.Yl=[{Et:n.text,Nt:Kt(n.fontSize,n.fontFamily,n.fontStyle),$l:1.2*n.fontSize,Jl:0,Kr:0}])},t}(),_n=function(t){function i(i,n){var s=t.call(this)||this;return s.ki=n,s.Ti=new vn(s),s}return e(i,t),i.prototype.zi=function(){return[]},i.prototype.Wi=function(){return[this.Ti]},i.prototype.ct=function(){return this.ki},i.prototype.Ii=function(){this.Ti.V()},i}(X),dn=function(){function t(t,i){this.Ql=[],this.tf=[],this.Jh=0,this.if=null,this.nf=null,this.sf=new it,this.hf=new it,this.rf=null,this.ef=t,this.ki=i,this.uf=new $t(this),this._l=new jt(this,i.timeScale,this.ki.localization),this.O=new Z(this,i.crosshair),this.af=new un(i.crosshair),this.lf=new _n(this,i.watermark),this.ff(),this.Ql[0].Cl(2e3),this.cf=this.vf(0),this._f=this.vf(1)}return t.prototype.df=function(){this.wf(new Zt(3))},t.prototype.zr=function(){this.wf(new Zt(2))},t.prototype.Xo=function(){this.wf(new Zt(1))},t.prototype.zo=function(t){var i=this.Mf(t);this.wf(i)},t.prototype.bf=function(){return this.nf},t.prototype.mf=function(t){var i=this.nf;this.nf=t,null!==i&&this.zo(i.pf),null!==t&&this.zo(t.pf)},t.prototype.ct=function(){return this.ki},t.prototype.os=function(t){v(this.ki,t),this.Ql.forEach((function(i){return i.pl(t)})),void 0!==t.timeScale&&this._l.os(t.timeScale),void 0!==t.localization&&this._l.dr(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sf.hn(),this.cf=this.vf(0),this._f=this.vf(1),this.df()},t.prototype.gf=function(t,i){if("left"!==t)if("right"!==t){var n=this.yf(t);null!==n&&(n.$.os(i),this.sf.hn())}else this.os({rightPriceScale:i});else this.os({leftPriceScale:i})},t.prototype.yf=function(t){for(var i=0,n=this.Ql;i<n.length;i++){var s=n[i],h=s.gl(t);if(null!==h)return{ft:s,$:h}}return null},t.prototype.U=function(){return this._l},t.prototype.kf=function(){return this.Ql},t.prototype.Cf=function(){return this.lf},t.prototype.Nf=function(){return this.O},t.prototype.xf=function(){return this.hf},t.prototype.Sf=function(t,i){t.ks(i),this.Wr()},t.prototype.Br=function(t){this.Jh=t,this._l.Br(this.Jh),this.Ql.forEach((function(i){return i.Br(t)})),this.Wr()},t.prototype.ff=function(t){var i=new fn(this._l,this);void 0!==t?this.Ql.splice(t,0,i):this.Ql.push(i);var n=void 0===t?this.Ql.length-1:t,s=new Zt(3);return s.ge(n,{ye:0,Ms:!0}),this.wf(s),i},t.prototype.Ll=function(t,i,n){t.Ll(i,n)},t.prototype.Fl=function(t,i,n){t.Fl(i,n),this.Ro(),this.wf(this.Df(t,2))},t.prototype.El=function(t,i){t.El(i),this.wf(this.Df(t,2))},t.prototype.Ol=function(t,i,n){i._s()||t.Ol(i,n)},t.prototype.Vl=function(t,i,n){i._s()||(t.Vl(i,n),this.Ro(),this.wf(this.Df(t,2)))},t.prototype.Pl=function(t,i){i._s()||(t.Pl(i),this.wf(this.Df(t,2)))},t.prototype.zl=function(t,i){t.zl(i),this.wf(this.Df(t,2))},t.prototype.Tf=function(t){this._l.Hs(t)},t.prototype.Af=function(t,i){var n=this.U();if(!n.ti()&&0!==i){var s=n.wt();t=Math.max(1,Math.min(t,s)),n.Kr(t,i),this.Wr()}},t.prototype.Bf=function(t){this.Lf(0),this.Ff(t),this.Ef()},t.prototype.Of=function(t){this._l.Ys(t),this.Wr()},t.prototype.Vf=function(){this._l.Ks(),this.zr()},t.prototype.Lf=function(t){this.if=t,this._l.$s(t)},t.prototype.Ff=function(t){var i=!1;return null!==this.if&&Math.abs(t-this.if)>20&&(this.if=null,i=!0),this._l.Xs(t),this.Wr(),i},t.prototype.Ef=function(){this._l.Zs(),this.zr(),this.if=null},t.prototype.P=function(){return this.tf},t.prototype.Pf=function(t,i,n){this.O.Ai(t,i);var s=NaN,h=this._l.Vr(t),r=this._l.yr();null!==r&&(h=Math.min(Math.max(r.uh(),h),r.ah()));var e=n.xi(),u=e.H();null!==u&&(s=e.Si(i,u)),s=this.af.il(s,h,n),this.O.Ei(h,s,n),this.Xo(),this.hf.hn(this.O.I(),{x:t,y:i})},t.prototype.Wf=function(){this.Nf().Vi(),this.Xo(),this.hf.hn(null,null)},t.prototype.Ro=function(){var t=this.O.ft();if(null!==t){var i=this.O.Li(),n=this.O.Fi();this.Pf(i,n,t)}this.O.Ii()},t.prototype.zf=function(t,i,n){var s=this._l.ri(0);void 0!==i&&void 0!==n&&this._l.V(i,n);var h=this._l.ri(0),r=this._l.Er(),e=this._l.yr();if(null!==e&&null!==s&&null!==h){var u=e.Ph(r),a=s.Bh>h.Bh,o=null!==t&&t>r&&!a,l=u&&this._l.ct().shiftVisibleRangeOnNewBar;if(o&&!l){var f=t-r;this._l.pr(this._l.Ur()-f)}}this._l.Yr(t)},t.prototype.jo=function(t){null!==t&&t.Il()},t.prototype.Yu=function(t){var i=this.Ql.find((function(i){return i.zs().includes(t)}));return void 0===i?null:i},t.prototype.Wr=function(){this.lf.Ii(),this.Ql.forEach((function(t){return t.Il()})),this.Ro()},t.prototype.en=function(){this.Ql.forEach((function(t){return t.en()})),this.Ql.length=0,this.ki.localization.priceFormatter=void 0,this.ki.localization.timeFormatter=void 0},t.prototype.Rf=function(){return this.uf},t.prototype.Zu=function(){return this.uf.ct()},t.prototype.yl=function(){return this.sf},t.prototype.If=function(t,i){var n=this.Ql[0],s=this.Uf(i,t,n);return this.tf.push(s),1===this.tf.length?this.df():this.zr(),s},t.prototype.jf=function(t){var i=this.Yu(t),n=this.tf.indexOf(t);o(-1!==n,"Series not found"),this.tf.splice(n,1),f(i).Us(t),t.en&&t.en()},t.prototype.Wo=function(t,i){var n=f(this.Yu(t));n.Us(t);var s=this.yf(i);if(null===s){var h=t.oi();n.Rs(t,i,h)}else{h=s.ft===n?t.oi():void 0;s.ft.Rs(t,i,h)}},t.prototype.ne=function(){var t=new Zt(2);t.Ne(),this.wf(t)},t.prototype.qf=function(t){var i=new Zt(2);i.Se(t),this.wf(i)},t.prototype.De=function(){var t=new Zt(2);t.De(),this.wf(t)},t.prototype.mr=function(t){var i=new Zt(2);i.mr(t),this.wf(i)},t.prototype.pr=function(t){var i=new Zt(2);i.pr(t),this.wf(i)},t.prototype.Hf=function(){return this.ki.rightPriceScale.visible?"right":"left"},t.prototype.Yf=function(){return this._f},t.prototype.Kf=function(){return this.cf},t.prototype.J=function(t){var i=this._f,n=this.cf;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.rf||this.rf.We!==n||this.rf.ze!==i)this.rf={We:n,ze:i,$f:new Map};else{var s=this.rf.$f.get(t);if(void 0!==s)return s}var h=function(t,i,n){var s=V(t),h=s[0],r=s[1],e=s[2],u=s[3],a=V(i),o=a[0],l=a[1],f=a[2],c=a[3],v=[A(h+n*(o-h)),A(r+n*(l-r)),A(e+n*(f-e)),B(u+n*(c-u))];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(v[3],")")}(n,i,t/100);return this.rf.$f.set(t,h),h},t.prototype.Df=function(t,i){var n=new Zt(i);if(null!==t){var s=this.Ql.indexOf(t);n.ge(s,{ye:i})}return n},t.prototype.Mf=function(t,i){return void 0===i&&(i=2),this.Df(this.Yu(t),i)},t.prototype.wf=function(t){this.ef&&this.ef(t),this.Ql.forEach((function(t){return t.jl().ll().V()}))},t.prototype.Uf=function(t,i,n){var s=new en(this,t,i),h=void 0!==t.priceScaleId?t.priceScaleId:this.Hf();return n.Rs(s,h),Xt(h)||s.os(t),s},t.prototype.vf=function(t){var i=this.ki.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}(),wn=function(){function t(t,i){this.st=t,this.ht=i}return t.prototype.on=function(t){return this.st===t.st&&this.ht===t.ht},t}();function Mn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function bn(t){var i=f(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function mn(t,i){var n=t.createElement("canvas"),s=Mn(n);return n.style.width="".concat(i.st,"px"),n.style.height="".concat(i.ht,"px"),n.width=i.st*s,n.height=i.ht*s,n}function pn(i,n){var s=f(i.ownerDocument).createElement("canvas");i.appendChild(s);var h=t(s);return h.resizeCanvas({width:n.st,height:n.ht}),h}function gn(t,i){return t.Xf-i.Xf}function yn(t,i,n){var s=(t.Xf-i.Xf)/(t.S-i.S);return Math.sign(s)*Math.min(Math.abs(s),n)}var kn=function(){function t(t,i,n,s){this.Zf=null,this.Jf=null,this.Gf=null,this.Qf=null,this.tc=null,this.ic=0,this.nc=0,this.sc=!1,this.hc=t,this.rc=i,this.ec=n,this.Yi=s}return t.prototype.uc=function(t,i){if(null!==this.Zf){if(this.Zf.S===i)return void(this.Zf.Xf=t);if(Math.abs(this.Zf.Xf-t)<this.Yi)return}this.Qf=this.Gf,this.Gf=this.Jf,this.Jf=this.Zf,this.Zf={S:i,Xf:t}},t.prototype.ra=function(t,i){if(null!==this.Zf&&null!==this.Jf&&!(i-this.Zf.S>50)){var n=0,s=yn(this.Zf,this.Jf,this.rc),h=gn(this.Zf,this.Jf),r=[s],e=[h];if(n+=h,null!==this.Gf){var u=yn(this.Jf,this.Gf,this.rc);if(Math.sign(u)===Math.sign(s)){var a=gn(this.Jf,this.Gf);if(r.push(u),e.push(a),n+=a,null!==this.Qf){var o=yn(this.Gf,this.Qf,this.rc);if(Math.sign(o)===Math.sign(s)){var l=gn(this.Gf,this.Qf);r.push(o),e.push(l),n+=l}}}}for(var f,c,v,_=0,d=0;d<r.length;++d)_+=e[d]/n*r[d];if(!(Math.abs(_)<this.hc))this.tc={Xf:t,S:i},this.nc=_,this.ic=(f=Math.abs(_),c=this.ec,v=Math.log(c),Math.log(1*v/-f)/v)}},t.prototype.ac=function(t){var i=f(this.tc),n=t-i.S;return i.Xf+this.nc*(Math.pow(this.ec,n)-1)/Math.log(this.ec)},t.prototype.oc=function(t){return null===this.tc||this.lc(t)===this.ic},t.prototype.fc=function(){return this.sc},t.prototype.cc=function(){this.sc=!0},t.prototype.lc=function(t){var i=t-f(this.tc).S;return Math.min(i,this.ic)},t}(),Cn="undefined"!=typeof window;var Nn=function(){if(!Cn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!Cn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}();var xn=function(){if(!Cn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),Sn=function(){function t(t,i,n){this.vc=0,this._c=null,this.dc=null,this.wc=!1,this.Mc=null,this.bc=!1,this.mc=!1,this.gc=null,this.yc=null,this.kc=null,this.Cc=null,this.Nc=0,this.xc=!1,this.Sc=!1,this.Dc=!1,this.Tc=t,this.Ac=i,this.ki=n,this.Bc()}return t.prototype.en=function(){null!==this.gc&&(this.gc(),this.gc=null),null!==this.yc&&(this.yc(),this.yc=null),null!==this.kc&&(this.kc(),this.kc=null),this.Lc(),this.Fc()},t.prototype.Ec=function(t){var i=this;this.yc&&this.yc();var n=this.Oc.bind(this);this.yc=function(){i.Tc.removeEventListener("mousemove",n)},this.Tc.addEventListener("mousemove",n),An(t)&&this.Oc(t);var s=this.Vc(t);this.Pc(s,this.Ac.Wc)},t.prototype.Fc=function(){null!==this._c&&clearTimeout(this._c),this.vc=0,this._c=null},t.prototype.Oc=function(t){if(!this.Dc||An(t)){var i=this.Vc(t);this.Pc(i,this.Ac.zc)}},t.prototype.Rc=function(t){if((!("button"in t)||0===t.button)&&null===this.Cc){var i=An(t);if(!this.Sc||!i){this.xc=!0;var n=this.Vc(t),s=c(this.Mc),h=Math.abs(s.p-n.Ic),r=Math.abs(s.g-n.Uc),e=h+r>5;if(e||!i){if(e&&!this.bc&&i){var u=.5*h,a=r>=u&&!this.ki.jc,o=u>r&&!this.ki.qc;a||o||(this.Sc=!0)}e&&(this.bc=!0,this.mc=!0,i&&this.Lc()),this.Sc||(this.Pc(n,this.Ac.Hc),i&&Bn(t))}}}},t.prototype.Yc=function(t){if(!("button"in t)||0===t.button){var i=this.Vc(t);this.Lc(),this.Mc=null,this.Dc=!1,this.kc&&(this.kc(),this.kc=null),An(t)&&this.Kc(t),this.Pc(i,this.Ac.$c),++this.vc,this._c&&this.vc>1?(this.Pc(i,this.Ac.Xc),this.Fc()):this.mc||this.Pc(i,this.Ac.Zc),An(t)&&(Bn(t),this.Kc(t),0===t.touches.length&&(this.wc=!1))}},t.prototype.Lc=function(){null!==this.dc&&(clearTimeout(this.dc),this.dc=null)},t.prototype.Jc=function(t){if(!("button"in t)||0===t.button){var i=this.Vc(t);this.mc=!1,this.bc=!1,this.Sc=!1,An(t)&&this.Ec(t),this.Mc={p:i.Ic,g:i.Uc},this.kc&&(this.kc(),this.kc=null);var n=this.Rc.bind(this),s=this.Yc.bind(this),h=this.Tc.ownerDocument.documentElement;this.kc=function(){h.removeEventListener("touchmove",n),h.removeEventListener("touchend",s),h.removeEventListener("mousemove",n),h.removeEventListener("mouseup",s)},h.addEventListener("touchmove",n,{passive:!1}),h.addEventListener("touchend",s,{passive:!1}),this.Lc(),An(t)&&1===t.touches.length?this.dc=setTimeout(this.Gc.bind(this,t),240):(h.addEventListener("mousemove",n),h.addEventListener("mouseup",s)),this.Dc=!0,this.Pc(i,this.Ac.Qc),this._c||(this.vc=0,this._c=setTimeout(this.Fc.bind(this),500))}},t.prototype.Bc=function(){var t=this;this.Tc.addEventListener("mouseenter",this.Ec.bind(this)),this.Tc.addEventListener("touchcancel",this.Lc.bind(this));var i=this.Tc.ownerDocument,n=function(i){t.Ac.tv&&(i.composed&&t.Tc.contains(i.composedPath()[0])||i.target&&t.Tc.contains(i.target)||t.Ac.tv())};this.gc=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.Tc.addEventListener("mouseleave",this.Kc.bind(this)),this.Tc.addEventListener("touchstart",this.Jc.bind(this),{passive:!0}),Nn||this.Tc.addEventListener("mousedown",this.Jc.bind(this)),this.iv(),this.Tc.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.iv=function(){var t=this;void 0===this.Ac.nv&&void 0===this.Ac.sv&&void 0===this.Ac.hv||(this.Tc.addEventListener("touchstart",(function(i){return t.rv(i.touches)}),{passive:!0}),this.Tc.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.Cc&&void 0!==t.Ac.sv){var n=Tn(i.touches[0],i.touches[1])/t.Nc;t.Ac.sv(t.Cc,n),Bn(i)}}),{passive:!1}),this.Tc.addEventListener("touchend",(function(i){t.rv(i.touches)})))},t.prototype.rv=function(t){1===t.length&&(this.xc=!1),2!==t.length||this.xc||this.wc?this.ev():this.uv(t)},t.prototype.uv=function(t){var i=Dn(this.Tc);this.Cc={p:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,g:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Nc=Tn(t[0],t[1]),void 0!==this.Ac.nv&&this.Ac.nv(),this.Lc()},t.prototype.ev=function(){null!==this.Cc&&(this.Cc=null,void 0!==this.Ac.hv&&this.Ac.hv())},t.prototype.Kc=function(t){this.yc&&this.yc();var i=this.Vc(t);this.Pc(i,this.Ac.av)},t.prototype.Gc=function(t){var i=this.Vc(t);this.Pc(i,this.Ac.ov),this.mc=!0,this.wc=!0},t.prototype.Pc=function(t,i){i&&i.call(this.Ac,t)},t.prototype.Vc=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=Dn(this.Tc);return{lv:i.clientX,fv:i.clientY,Ic:i.pageX,Uc:i.pageY,cv:i.screenX,vv:i.screenY,_v:i.clientX-n.left,dv:i.clientY-n.top,wv:t.ctrlKey,Mv:t.altKey,bv:t.shiftKey,mv:t.metaKey,xe:t.type.startsWith("mouse")?"mouse":"touch",pv:t.view}},t}();function Dn(t){return t.getBoundingClientRect()||{left:0,top:0}}function Tn(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function An(t){return Boolean(t.touches)}function Bn(t){t.cancelable&&t.preventDefault()}var Ln=function(){function t(t,i,n,s){this.Uu=new ki(200),this._e=0,this.gv="",this.Na="",this.Wu=[],this.yv=new Map,this._e=t,this.gv=i,this.Na=Kt(t,n,s)}return t.prototype.en=function(){this.Uu.zu(),this.Wu=[],this.yv.clear()},t.prototype.kv=function(t,i,n,s,h){var r=this.Cv(t,i);if("left"!==h){var e=Mn(t.canvas);n-=Math.floor(r.Nv*e)}s-=Math.floor(r.Mt/2),t.drawImage(r.xv,n,s,r.wt,r.Mt)},t.prototype.Cv=function(t,i){var n,s=this;if(this.yv.has(i))n=l(this.yv.get(i));else{if(this.Wu.length>=200){var h=l(this.Wu.shift());this.yv.delete(h)}var r=Mn(t.canvas),e=Math.ceil(this._e/4.5),u=Math.round(this._e/10),a=Math.ceil(this.Uu.Ot(t,i)),o=et(Math.round(a+2*e)),f=et(this._e+2*e),c=mn(document,new wn(o,f));n={Et:i,Nv:Math.round(Math.max(1,a)),wt:Math.ceil(o*r),Mt:Math.ceil(f*r),xv:c},0!==a&&(this.Wu.push(n.Et),this.yv.set(n.Et,n)),z(t=bn(n.xv),r,(function(){t.font=s.Na,t.fillStyle=s.gv,t.fillText(i,0,f-e-u)}))}return n},t}(),Fn=function(){function t(t,i,n,s){var h=this;this.Gt=null,this.Sv=null,this.Dv=null,this.Tv=!1,this.Av=new ki(50),this.Bv=new Ln(11,"#000"),this.gv=null,this.Na=null,this.Lv=0,this.Fv=function(){h.Ev(h.uf.ct()),h.vi.Ov().vt().zr()},this.Vv=function(){h.vi.Ov().vt().zr()},this.vi=t,this.ki=i,this.uf=n,this.Pv="left"===s,this.Wv=document.createElement("div"),this.Wv.style.height="100%",this.Wv.style.overflow="hidden",this.Wv.style.width="25px",this.Wv.style.left="0",this.Wv.style.position="relative",this.zv=pn(this.Wv,new wn(16,16)),this.zv.subscribeCanvasConfigured(this.Fv);var r=this.zv.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Rv=pn(this.Wv,new wn(16,16)),this.Rv.subscribeCanvasConfigured(this.Vv);var e=this.Rv.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={Qc:this.Iv.bind(this),Hc:this.Uv.bind(this),tv:this.jv.bind(this),$c:this.qv.bind(this),Xc:this.Hv.bind(this),Wc:this.Yv.bind(this),av:this.Kv.bind(this)};this.$v=new Sn(this.Rv.canvas,u,{jc:!1,qc:!0})}return t.prototype.en=function(){this.$v.en(),this.Rv.unsubscribeCanvasConfigured(this.Vv),this.Rv.destroy(),this.zv.unsubscribeCanvasConfigured(this.Fv),this.zv.destroy(),null!==this.Gt&&this.Gt.qs().sn(this),this.Gt=null,null!==this.Dv&&(clearTimeout(this.Dv),this.Dv=null),this.Bv.en()},t.prototype.Xv=function(){return this.Wv},t.prototype.N=function(){return f(this.Gt).ct().borderColor},t.prototype.Zv=function(){return this.ki.textColor},t.prototype.Pt=function(){return this.ki.fontSize},t.prototype.Jv=function(){return Kt(this.Pt(),this.ki.fontFamily)},t.prototype.Gv=function(){var t=this.uf.ct(),i=this.gv!==t.et,n=this.Na!==t.Nt;return(i||n)&&(this.Ev(t),this.gv=t.et),n&&(this.Av.zu(),this.Na=t.Nt),t},t.prototype.Qv=function(){if(null===this.Gt)return 0;var t=34,i=this.Gv(),n=bn(this.zv.canvas),s=this.Gt.On();n.font=this.Jv(),s.length>0&&(t=Math.max(this.Av.Ot(n,s[0].Ln),this.Av.Ot(n,s[s.length-1].Ln)));for(var h=this.t_(),r=h.length;r--;){var e=this.Av.Ot(n,h[r].Et());e>t&&(t=e)}var u=this.Gt.H();if(null!==u&&null!==this.Sv){var a=this.Gt.Si(1,u),o=this.Gt.Si(this.Sv.ht-2,u);t=Math.max(t,this.Av.Ot(n,this.Gt.ii(Math.floor(Math.min(a,o))+.11111111111111,u)),this.Av.Ot(n,this.Gt.ii(Math.ceil(Math.max(a,o))-.11111111111111,u)))}var l=Math.ceil(i.Tt+i.Dt+i.Lt+i.Ft+t);return l+=l%2},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.Sv&&this.Sv.on(t)||(this.Sv=t,this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.resizeCanvas({width:t.st,height:t.ht}),this.Wv.style.width=t.st+"px",this.Wv.style.height=t.ht+"px",this.Wv.style.minWidth=t.st+"px")},t.prototype.n_=function(){return f(this.Sv).st},t.prototype.fi=function(t){this.Gt!==t&&(null!==this.Gt&&this.Gt.qs().sn(this),this.Gt=t,t.qs().Ji(this.Hn.bind(this),this))},t.prototype.$=function(){return this.Gt},t.prototype.zu=function(){var t=this.vi.s_();this.vi.Ov().vt().zl(t,f(this.$()))},t.prototype.h_=function(t){if(null!==this.Sv){if(1!==t){var i=bn(this.zv.canvas);this.r_(),this.e_(i,this.zv.pixelRatio),this.Nu(i,this.zv.pixelRatio),this.u_(i,this.zv.pixelRatio),this.a_(i,this.zv.pixelRatio)}var n=bn(this.Rv.canvas),s=this.Sv.st,h=this.Sv.ht;z(n,this.Rv.pixelRatio,(function(){n.clearRect(0,0,s,h)})),this.o_(n,this.Rv.pixelRatio)}},t.prototype.l_=function(){return this.zv.canvas},t.prototype.Iv=function(t){if(null!==this.Gt&&!this.Gt.ti()&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_();this.Tv=!0,i.Ll(n,this.Gt,t.dv)}},t.prototype.Uv=function(t){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_(),s=this.Gt;i.Fl(n,s,t.dv)}},t.prototype.jv=function(){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var t=this.vi.Ov().vt(),i=this.vi.s_(),n=this.Gt;this.Tv&&(this.Tv=!1,t.El(i,n))}},t.prototype.qv=function(t){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_();this.Tv=!1,i.El(n,this.Gt)}},t.prototype.Hv=function(t){this.vi.Ov().ct().handleScale.axisDoubleClickReset&&this.zu()},t.prototype.Yv=function(t){null!==this.Gt&&(!this.vi.Ov().vt().ct().handleScale.axisPressedMouseMove.price||this.Gt.ds()||this.Gt.ws()||this.f_(1))},t.prototype.Kv=function(t){this.f_(0)},t.prototype.t_=function(){var t=this,i=[],n=null===this.Gt?void 0:this.Gt;return function(s){for(var h=0;h<s.length;++h)for(var r=s[h].zi(t.vi.s_(),n),e=0;e<r.length;e++)i.push(r[e])}(this.vi.s_().zs()),i},t.prototype.e_=function(t,i){var n=this;if(null!==this.Sv){var s=this.Sv.st,h=this.Sv.ht;z(t,i,(function(){var i=n.vi.s_().vt(),r=i.Kf(),e=i.Yf();r===e?R(t,0,0,s,h,r):I(t,0,0,s,h,r,e)}))}},t.prototype.Nu=function(t,i){if(null!==this.Sv&&null!==this.Gt&&this.Gt.ct().borderVisible){t.save(),t.fillStyle=this.N();var n,s=Math.max(1,Math.floor(this.Gv().Tt*i));n=this.Pv?Math.floor(this.Sv.st*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.Sv.ht*i)),t.restore()}},t.prototype.u_=function(t,i){if(null!==this.Sv&&null!==this.Gt){var n=this.Gt.On();t.save(),t.strokeStyle=this.N(),t.font=this.Jv(),t.fillStyle=this.N();var s=this.Gv(),h=this.Gt.ct().borderVisible&&this.Gt.ct().drawTicks,r=this.Pv?Math.floor((this.Sv.st-s.Dt)*i-s.Tt*i):Math.floor(s.Tt*i),e=this.Pv?Math.round(r-s.Lt*i):Math.round(r+s.Dt*i+s.Lt*i),u=this.Pv?"right":"left",a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(h){var l=Math.round(s.Dt*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var v=c[f];t.rect(r,Math.round(v.Bn*i)-o,l,a)}t.fill()}t.fillStyle=this.Zv();for(var _=0,d=n;_<d.length;_++){v=d[_];this.Bv.kv(t,v.Ln,e,Math.round(v.Bn*i),u)}t.restore()}},t.prototype.r_=function(){if(null!==this.Sv&&null!==this.Gt){var t=this.Sv.ht/2,i=[],n=this.Gt.zs().slice(),s=this.vi.s_(),h=this.Gv();this.Gt===s.$u()&&this.vi.s_().zs().forEach((function(t){s.Ku(t)&&n.push(t)}));var r=this.Gt.Ws()[0],e=this.Gt;n.forEach((function(n){var h=n.zi(s,e);h.forEach((function(t){t.Kt(null),t.$t()&&i.push(t)})),r===n&&h.length>0&&(t=h[0].Wt())}));var u=i.filter((function(i){return i.Wt()<=t})),a=i.filter((function(i){return i.Wt()>t}));if(u.sort((function(t,i){return i.Wt()-t.Wt()})),u.length&&a.length&&a.push(u[0]),a.sort((function(t,i){return t.Wt()-i.Wt()})),i.forEach((function(t){return t.Kt(t.Wt())})),this.Gt.ct().alignLabels){for(var o=1;o<u.length;o++){var l=u[o],f=(v=u[o-1]).Mt(h,!1);l.Wt()>(_=v.Yt())-f&&l.Kt(_-f)}for(var c=1;c<a.length;c++){var v,_;l=a[c],f=(v=a[c-1]).Mt(h,!0);l.Wt()<(_=v.Yt())+f&&l.Kt(_+f)}}}},t.prototype.a_=function(t,i){var n=this;if(null!==this.Sv){t.save();var s=this.Sv,h=this.t_(),r=this.Gv(),e=this.Pv?"right":"left";h.forEach((function(h){if(h.Xt()){var u=h.W(f(n.Gt));t.save(),u.h(t,r,n.Av,s.st,e,i),t.restore()}})),t.restore()}},t.prototype.o_=function(t,i){var n=this;if(null!==this.Sv&&null!==this.Gt){t.save();var s=this.Sv,h=this.vi.Ov().vt(),r=[],e=this.vi.s_(),u=h.Nf().zi(e,this.Gt);u.length&&r.push(u);var a=this.Gv(),o=this.Pv?"right":"left";r.forEach((function(h){h.forEach((function(h){t.save(),h.W(f(n.Gt)).h(t,a,n.Av,s.st,o,i),t.restore()}))})),t.restore()}},t.prototype.f_=function(t){this.Wv.style.cursor=1===t?"ns-resize":"default"},t.prototype.Hn=function(){var t=this,i=this.Qv();if(this.Lv<i){var n=this.vi.Ov();null===this.Dv&&(this.Dv=setTimeout((function(){n&&n.vt().df(),t.Dv=null}),100))}this.Lv=i},t.prototype.Ev=function(t){this.Bv.en(),this.Bv=new Ln(t.Pt,t.et,t.ve)},t}(),En=xn;function On(t,i,n,s,h){t.o&&t.o(i,n,s,h)}function Vn(t,i,n,s,h){t.h(i,n,s,h)}function Pn(t,i){return t.Wi(i)}function Wn(t,i){return void 0!==t.$o?t.$o(i):[]}var zn=function(){function t(t,i){var n=this;this.Sv=new wn(0,0),this.c_=null,this.v_=null,this.__=null,this.d_=!1,this.w_=new it,this.M_=0,this.b_=!1,this.m_=null,this.p_=!1,this.g_=null,this.y_=null,this.Fv=function(){return n.k_&&n.hi().zr()},this.Vv=function(){return n.k_&&n.hi().zr()},this.C_=t,this.k_=i,this.k_.Ul().Ji(this.N_.bind(this),this,!0),this.x_=document.createElement("td"),this.x_.style.padding="0",this.x_.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.S_=document.createElement("td"),this.S_.style.padding="0",this.D_=document.createElement("td"),this.D_.style.padding="0",this.x_.appendChild(s),this.zv=pn(s,new wn(16,16)),this.zv.subscribeCanvasConfigured(this.Fv);var h=this.zv.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Rv=pn(s,new wn(16,16)),this.Rv.subscribeCanvasConfigured(this.Vv);var r=this.Rv.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.T_=document.createElement("tr"),this.T_.appendChild(this.S_),this.T_.appendChild(this.x_),this.T_.appendChild(this.D_),this.A_();var e=this.Ov().ct().handleScroll;this.$v=new Sn(this.Rv.canvas,this,{jc:!e.vertTouchDrag,qc:!e.horzTouchDrag})}return t.prototype.en=function(){null!==this.c_&&this.c_.en(),null!==this.v_&&this.v_.en(),this.Rv.unsubscribeCanvasConfigured(this.Vv),this.Rv.destroy(),this.zv.unsubscribeCanvasConfigured(this.Fv),this.zv.destroy(),null!==this.k_&&this.k_.Ul().sn(this),this.$v.en()},t.prototype.s_=function(){return f(this.k_)},t.prototype.B_=function(i){null!==this.k_&&this.k_.Ul().sn(this),this.k_=i,null!==this.k_&&this.k_.Ul().Ji(t.prototype.N_.bind(this),this,!0),this.A_()},t.prototype.Ov=function(){return this.C_},t.prototype.Xv=function(){return this.T_},t.prototype.A_=function(){if(null!==this.k_&&(this.L_(),0!==this.hi().P().length)){if(null!==this.c_){var t=this.k_.Al();this.c_.fi(f(t))}if(null!==this.v_){var i=this.k_.Bl();this.v_.fi(f(i))}}},t.prototype.kl=function(){return null!==this.k_?this.k_.kl():0},t.prototype.Cl=function(t){this.k_&&this.k_.Cl(t)},t.prototype.Wc=function(t){if(this.k_){var i=t._v,n=t.dv;Nn||this.F_(i,n)}},t.prototype.Qc=function(t){if(this.b_=!1,this.p_=null!==this.m_,this.k_){if(this.E_(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)f(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.hi();if(!this.k_.xi().ti()&&!n.U().ti()){if(null!==this.m_){var s=n.Nf();this.g_={x:s.bt(),y:s.gt()},this.m_={x:t._v,y:t.dv}}Nn||this.F_(t._v,t.dv)}}},t.prototype.zc=function(t){if(this.k_){var i=t._v,n=t.dv;if(this.O_()&&this.V_(),!Nn){this.F_(i,n);var s=this.xa(i,n);this.hi().mf(s&&{pf:s.pf,P_:s.P_})}}},t.prototype.Zc=function(t){if(null!==this.k_){var i=t._v,n=t.dv;if(this.w_.rn()){var s=this.hi().Nf().I();this.w_.hn(s,{x:i,y:n})}this.W_()}},t.prototype.Hc=function(t){if(null!==this.k_){var i=this.hi(),n=t._v,s=t.dv;if(null!==this.m_){this.p_=!1;var h=f(this.g_),r=h.x+(n-this.m_.x),e=h.y+(s-this.m_.y);this.F_(r,e)}else this.O_()||this.F_(n,s);if(!i.U().ti()){var u=this.C_.ct(),a=u.handleScroll,o=u.kineticScroll;if(a.pressedMouseMove&&"touch"!==t.xe||(a.horzTouchDrag||a.vertTouchDrag)&&"mouse"!==t.xe){var l=this.k_.xi(),c=performance.now();null!==this.__||this.z_()||(this.__={x:t.lv,y:t.fv,Bh:c,_v:t._v,dv:t.dv}),null!==this.y_&&this.y_.uc(t._v,c),null===this.__||this.d_||this.__.x===t.lv&&this.__.y===t.fv||(null===this.y_&&("touch"===t.xe&&o.touch||"mouse"===t.xe&&o.mouse)&&(this.y_=new kn(.2,7,.997,15),this.y_.uc(this.__._v,this.__.Bh),this.y_.uc(t._v,c)),l.ti()||i.Ol(this.k_,l,t.dv),i.Lf(t._v),this.d_=!0),this.d_&&(l.ti()||i.Vl(this.k_,l,t.dv),i.Ff(t._v))}}}},t.prototype.$c=function(t){null!==this.k_&&(this.b_=!1,this.R_(t))},t.prototype.ov=function(t){if(this.b_=!0,null===this.m_&&En){var i={x:t._v,y:t.dv};this.I_(i,i)}},t.prototype.av=function(t){null!==this.k_&&(this.k_.vt().mf(null),xn||this.V_())},t.prototype.U_=function(){return this.w_},t.prototype.nv=function(){this.M_=1,this.E_()},t.prototype.sv=function(t,i){if(this.C_.ct().handleScale.pinch){var n=5*(i-this.M_);this.M_=i,this.hi().Af(t.p,n)}},t.prototype.xa=function(t,i){var n=this.k_;if(null===n)return null;for(var s=0,h=n.zs();s<h.length;s++){var r=h[s],e=this.j_(r.Wi(n),t,i);if(null!==e)return{pf:r,pv:e.pv,P_:e.P_}}return null},t.prototype.q_=function(t,i){f("left"===i?this.c_:this.v_).i_(new wn(t,this.Sv.ht))},t.prototype.H_=function(){return this.Sv},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.Sv.on(t)||(this.Sv=t,this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.resizeCanvas({width:t.st,height:t.ht}),this.x_.style.width=t.st+"px",this.x_.style.height=t.ht+"px")},t.prototype.Y_=function(){var t=f(this.k_);t.Tl(t.Al()),t.Tl(t.Bl());for(var i=0,n=t.Ws();i<n.length;i++){var s=n[i];if(t.Ku(s)){var h=s.$();null!==h&&t.Tl(h),s.Ii()}}},t.prototype.l_=function(){return this.zv.canvas},t.prototype.h_=function(t){if(0!==t&&null!==this.k_){if(t>1&&this.Y_(),null!==this.c_&&this.c_.h_(t),null!==this.v_&&this.v_.h_(t),1!==t){var i=bn(this.zv.canvas);i.save(),this.e_(i,this.zv.pixelRatio),this.k_&&(this.K_(i,this.zv.pixelRatio),this.X_(i,this.zv.pixelRatio),this.Z_(i,this.zv.pixelRatio,Pn)),i.restore()}var n=bn(this.Rv.canvas);n.clearRect(0,0,Math.ceil(this.Sv.st*this.Rv.pixelRatio),Math.ceil(this.Sv.ht*this.Rv.pixelRatio)),this.Z_(n,this.zv.pixelRatio,Wn),this.J_(n,this.Rv.pixelRatio)}},t.prototype.G_=function(){return this.c_},t.prototype.Q_=function(){return this.v_},t.prototype.N_=function(){null!==this.k_&&this.k_.Ul().sn(this),this.k_=null},t.prototype.e_=function(t,i){var n=this;z(t,i,(function(){var i=n.hi(),s=i.Kf(),h=i.Yf();s===h?R(t,0,0,n.Sv.st,n.Sv.ht,h):I(t,0,0,n.Sv.st,n.Sv.ht,s,h)}))},t.prototype.K_=function(t,i){var n=f(this.k_),s=n.jl().ll().W(n.Mt(),n.wt());null!==s&&(t.save(),s.h(t,i,!1),t.restore())},t.prototype.X_=function(t,i){var n=this.hi().Cf();this.td(t,i,Pn,On,n),this.td(t,i,Pn,Vn,n)},t.prototype.J_=function(t,i){this.td(t,i,Pn,Vn,this.hi().Nf())},t.prototype.Z_=function(t,i,n){for(var s=f(this.k_).zs(),h=0,r=s;h<r.length;h++){var e=r[h];this.td(t,i,n,On,e)}for(var u=0,a=s;u<a.length;u++){e=a[u];this.td(t,i,n,Vn,e)}},t.prototype.td=function(t,i,n,s,h){for(var r=f(this.k_),e=n(h,r),u=r.Mt(),a=r.wt(),o=r.vt().bf(),l=null!==o&&o.pf===h,c=null!==o&&l&&void 0!==o.P_?o.P_.Sa:void 0,v=0,_=e;v<_.length;v++){var d=_[v].W(u,a);null!==d&&(t.save(),s(d,t,i,l,c),t.restore())}},t.prototype.j_=function(t,i,n){for(var s=0,h=t;s<h.length;s++){var r=h[s],e=r.W(this.Sv.ht,this.Sv.st);if(null!==e&&e.xa){var u=e.xa(i,n);if(null!==u)return{pv:r,P_:u}}}return null},t.prototype.L_=function(){if(null!==this.k_){var t=this.C_,i=this.k_.Al().ct().visible,n=this.k_.Bl().ct().visible;i||null===this.c_||(this.S_.removeChild(this.c_.Xv()),this.c_.en(),this.c_=null),n||null===this.v_||(this.D_.removeChild(this.v_.Xv()),this.v_.en(),this.v_=null);var s=t.vt().Rf();i&&null===this.c_&&(this.c_=new Fn(this,t.ct().layout,s,"left"),this.S_.appendChild(this.c_.Xv())),n&&null===this.v_&&(this.v_=new Fn(this,t.ct().layout,s,"right"),this.D_.appendChild(this.v_.Xv()))}},t.prototype.O_=function(){return En&&null===this.m_},t.prototype.z_=function(){return En&&this.b_||null!==this.m_},t.prototype.nd=function(t){return Math.max(0,Math.min(t,this.Sv.st-1))},t.prototype.sd=function(t){return Math.max(0,Math.min(t,this.Sv.ht-1))},t.prototype.F_=function(t,i){this.hi().Pf(this.nd(t),this.sd(i),f(this.k_))},t.prototype.V_=function(){this.hi().Wf()},t.prototype.W_=function(){this.p_&&(this.m_=null,this.V_())},t.prototype.I_=function(t,i){this.m_=t,this.p_=!1,this.F_(i.x,i.y);var n=this.hi().Nf();this.g_={x:n.bt(),y:n.gt()}},t.prototype.hi=function(){return this.C_.vt()},t.prototype.hd=function(){var t=this.hi(),i=this.s_(),n=i.xi();t.Pl(i,n),t.Ef(),this.__=null,this.d_=!1},t.prototype.R_=function(t){var i=this;if(this.d_){var n=performance.now();if(null!==this.y_&&this.y_.ra(t._v,n),null===this.y_||this.y_.oc(n))this.hd();else{var s=this.hi(),h=s.U(),r=this.y_,e=function(){if(!r.fc()){var t=performance.now(),n=r.oc(t);if(!r.fc()){var u=h.Ur();s.Ff(r.ac(t)),u===h.Ur()&&(n=!0,i.y_=null)}n?i.hd():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.E_=function(){var t=performance.now(),i=null===this.y_||this.y_.oc(t);null!==this.y_&&(i||this.hd()),null!==this.y_&&(this.y_.cc(),this.y_=null)},t}(),Rn=function(){function t(t,i,n,s,h){var r=this;this.L=!0,this.Sv=new wn(0,0),this.Fv=function(){return r.h_(3)},this.Pv="left"===t,this.uf=n.Rf,this.ki=i,this.rd=s,this.ed=h,this.Wv=document.createElement("div"),this.Wv.style.width="25px",this.Wv.style.height="100%",this.Wv.style.overflow="hidden",this.zv=pn(this.Wv,new wn(16,16)),this.zv.subscribeCanvasConfigured(this.Fv)}return t.prototype.en=function(){this.zv.unsubscribeCanvasConfigured(this.Fv),this.zv.destroy()},t.prototype.Xv=function(){return this.Wv},t.prototype.H_=function(){return this.Sv},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.Sv.on(t)||(this.Sv=t,this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Wv.style.width="".concat(t.st,"px"),this.Wv.style.minWidth="".concat(t.st,"px"),this.Wv.style.height="".concat(t.ht,"px"),this.L=!0)},t.prototype.h_=function(t){if((!(t<3)||this.L)&&0!==this.Sv.st&&0!==this.Sv.ht){this.L=!1;var i=bn(this.zv.canvas);this.e_(i,this.zv.pixelRatio),this.Nu(i,this.zv.pixelRatio)}},t.prototype.l_=function(){return this.zv.canvas},t.prototype.Nu=function(t,i){if(this.rd()){var n=this.Sv.st;t.save(),t.fillStyle=this.ki.timeScale.borderColor;var s=Math.floor(this.uf.ct().Tt*i),h=this.Pv?Math.round(n*i)-s:0;t.fillRect(h,0,s,s),t.restore()}},t.prototype.e_=function(t,i){var n=this;z(t,i,(function(){R(t,0,0,n.Sv.st,n.Sv.ht,n.ed())}))},t}();function In(t,i){return t.jh>i.jh?t:i}var Un=function(){function t(t){var i=this;this.ud=null,this.ad=null,this.ce=null,this.od=!1,this.Sv=new wn(0,0),this.ld=new it,this.Av=new ki(5),this.Fv=function(){return i.C_.vt().zr()},this.Vv=function(){return i.C_.vt().zr()},this.C_=t,this.ki=t.ct().layout,this.fd=document.createElement("tr"),this.vd=document.createElement("td"),this.vd.style.padding="0",this._d=document.createElement("td"),this._d.style.padding="0",this.Wv=document.createElement("td"),this.Wv.style.height="25px",this.Wv.style.padding="0",this.dd=document.createElement("div"),this.dd.style.width="100%",this.dd.style.height="100%",this.dd.style.position="relative",this.dd.style.overflow="hidden",this.Wv.appendChild(this.dd),this.zv=pn(this.dd,new wn(16,16)),this.zv.subscribeCanvasConfigured(this.Fv);var n=this.zv.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Rv=pn(this.dd,new wn(16,16)),this.Rv.subscribeCanvasConfigured(this.Vv);var s=this.Rv.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.fd.appendChild(this.vd),this.fd.appendChild(this.Wv),this.fd.appendChild(this._d),this.wd(),this.C_.vt().yl().Ji(this.wd.bind(this),this),this.$v=new Sn(this.Rv.canvas,this,{jc:!0,qc:!1})}return t.prototype.en=function(){this.$v.en(),null!==this.ud&&this.ud.en(),null!==this.ad&&this.ad.en(),this.Rv.unsubscribeCanvasConfigured(this.Vv),this.Rv.destroy(),this.zv.unsubscribeCanvasConfigured(this.Fv),this.zv.destroy()},t.prototype.Xv=function(){return this.fd},t.prototype.Md=function(){return this.ud},t.prototype.bd=function(){return this.ad},t.prototype.Qc=function(t){if(!this.od){this.od=!0;var i=this.C_.vt();!i.U().ti()&&this.C_.ct().handleScale.axisPressedMouseMove.time&&i.Tf(t._v)}},t.prototype.tv=function(){var t=this.C_.vt();!t.U().ti()&&this.od&&(this.od=!1,this.C_.ct().handleScale.axisPressedMouseMove.time&&t.Vf())},t.prototype.Hc=function(t){var i=this.C_.vt();!i.U().ti()&&this.C_.ct().handleScale.axisPressedMouseMove.time&&i.Of(t._v)},t.prototype.$c=function(t){this.od=!1;var i=this.C_.vt();i.U().ti()&&!this.C_.ct().handleScale.axisPressedMouseMove.time||i.Vf()},t.prototype.Xc=function(){this.C_.ct().handleScale.axisDoubleClickReset&&this.C_.vt().De()},t.prototype.Wc=function(t){this.C_.vt().ct().handleScale.axisPressedMouseMove.time&&this.f_(1)},t.prototype.av=function(t){this.f_(0)},t.prototype.H_=function(){return this.Sv},t.prototype.md=function(){return this.ld},t.prototype.pd=function(t,i,n){this.Sv&&this.Sv.on(t)||(this.Sv=t,this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.resizeCanvas({width:t.st,height:t.ht}),this.Wv.style.width=t.st+"px",this.Wv.style.height=t.ht+"px",this.ld.hn(t)),null!==this.ud&&this.ud.i_(new wn(i,t.ht)),null!==this.ad&&this.ad.i_(new wn(n,t.ht))},t.prototype.gd=function(){var t=this.yd();return Math.ceil(t.Tt+t.Dt+t.Pt+t.At+t.Bt)},t.prototype.V=function(){this.C_.vt().U().On()},t.prototype.l_=function(){return this.zv.canvas},t.prototype.h_=function(t){if(0!==t){if(1!==t){var i=bn(this.zv.canvas);this.e_(i,this.zv.pixelRatio),this.Nu(i,this.zv.pixelRatio),this.u_(i,this.zv.pixelRatio),null!==this.ud&&this.ud.h_(t),null!==this.ad&&this.ad.h_(t)}var n=bn(this.Rv.canvas),s=this.Rv.pixelRatio;n.clearRect(0,0,Math.ceil(this.Sv.st*s),Math.ceil(this.Sv.ht*s)),this.kd([this.C_.vt().Nf()],n,s)}},t.prototype.e_=function(t,i){var n=this;z(t,i,(function(){R(t,0,0,n.Sv.st,n.Sv.ht,n.C_.vt().Yf())}))},t.prototype.Nu=function(t,i){if(this.C_.ct().timeScale.borderVisible){t.save(),t.fillStyle=this.Cd();var n=Math.max(1,Math.floor(this.yd().Tt*i));t.fillRect(0,0,Math.ceil(this.Sv.st*i),n),t.restore()}},t.prototype.u_=function(t,i){var n=this,s=this.C_.vt().U().On();if(s&&0!==s.length){var h=s.reduce(In,s[0]).jh;h>30&&h<50&&(h=30),t.save(),t.strokeStyle=this.Cd();var r=this.yd(),e=r.Tt+r.Dt+r.At+r.Pt-r.Vt;t.textAlign="center",t.fillStyle=this.Cd();var u=Math.floor(this.yd().Tt*i),a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(this.C_.vt().U().ct().borderVisible){t.beginPath();for(var l=Math.round(r.Dt*i),f=s.length;f--;){var c=Math.round(s[f].Bn*i);t.rect(c-o,u,a,l)}t.fill()}t.fillStyle=this.we(),z(t,i,(function(){t.font=n.Nd();for(var i=0,r=s;i<r.length;i++){if((l=r[i]).jh<h){var u=l.qr?n.xd(t,l.Bn,l.Ln):l.Bn;t.fillText(l.Ln,u,e)}}t.font=n.Sd();for(var a=0,o=s;a<o.length;a++){var l;if((l=o[a]).jh>=h){u=l.qr?n.xd(t,l.Bn,l.Ln):l.Bn;t.fillText(l.Ln,u,e)}}}))}},t.prototype.xd=function(t,i,n){var s=this.Av.Ot(t,n),h=s/2,r=Math.floor(i-h)+.5;return r<0?i+=Math.abs(0-r):r+s>this.Sv.st&&(i-=Math.abs(this.Sv.st-(r+s))),i},t.prototype.kd=function(t,i,n){for(var s=this.yd(),h=0,r=t;h<r.length;h++)for(var e=0,u=r[h].ci();e<u.length;e++){var a=u[e];i.save(),a.W().h(i,s,n),i.restore()}},t.prototype.Cd=function(){return this.C_.ct().timeScale.borderColor},t.prototype.we=function(){return this.ki.textColor},t.prototype._e=function(){return this.ki.fontSize},t.prototype.Nd=function(){return Kt(this._e(),this.ki.fontFamily)},t.prototype.Sd=function(){return Kt(this._e(),this.ki.fontFamily,"bold")},t.prototype.yd=function(){null===this.ce&&(this.ce={Tt:1,Vt:NaN,At:NaN,Bt:NaN,si:NaN,Dt:3,Pt:NaN,Nt:"",ni:new ki});var t=this.ce,i=this.Nd();if(t.Nt!==i){var n=this._e();t.Pt=n,t.Nt=i,t.At=Math.ceil(n/2.5),t.Bt=t.At,t.si=Math.ceil(n/2),t.Vt=Math.round(this._e()/5),t.ni.zu()}return this.ce},t.prototype.f_=function(t){this.Wv.style.cursor=1===t?"ew-resize":"default"},t.prototype.wd=function(){var t=this.C_.vt(),i=t.ct();i.leftPriceScale.visible||null===this.ud||(this.vd.removeChild(this.ud.Xv()),this.ud.en(),this.ud=null),i.rightPriceScale.visible||null===this.ad||(this._d.removeChild(this.ad.Xv()),this.ad.en(),this.ad=null);var n={Rf:this.C_.vt().Rf()},s=function(){return i.leftPriceScale.borderVisible&&t.U().ct().borderVisible},h=function(){return t.Yf()};i.leftPriceScale.visible&&null===this.ud&&(this.ud=new Rn("left",i,n,s,h),this.vd.appendChild(this.ud.Xv())),i.rightPriceScale.visible&&null===this.ad&&(this.ad=new Rn("right",i,n,s,h),this._d.appendChild(this.ad.Xv()))},t}(),jn=function(){function t(t,i){var n;this.Dd=[],this.Td=0,this.Vn=0,this.Jh=0,this.Ad=0,this.Bd=0,this.Ld=null,this.Fd=!1,this.w_=new it,this.hf=new it,this.ki=i,this.fd=document.createElement("div"),this.fd.classList.add("tv-lightweight-charts"),this.fd.style.overflow="hidden",this.fd.style.width="100%",this.fd.style.height="100%",(n=this.fd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Ed=document.createElement("table"),this.Ed.setAttribute("cellspacing","0"),this.fd.appendChild(this.Ed),this.Od=this.Vd.bind(this),this.fd.addEventListener("wheel",this.Od,{passive:!1}),this.hi=new dn(this.ef.bind(this),this.ki),this.vt().xf().Ji(this.Pd.bind(this),this),this.Wd=new Un(this),this.Ed.appendChild(this.Wd.Xv());var s=this.ki.width,h=this.ki.height;if(0===s||0===h){var r=t.getBoundingClientRect();0===s&&(s=Math.floor(r.width),s-=s%2),0===h&&(h=Math.floor(r.height),h-=h%2)}this.zd(s,h),this.Rd(),t.appendChild(this.fd),this.Id(),this.hi.U().te().Ji(this.hi.df.bind(this.hi),this),this.hi.yl().Ji(this.hi.df.bind(this.hi),this)}return t.prototype.vt=function(){return this.hi},t.prototype.ct=function(){return this.ki},t.prototype.Ud=function(){return this.Dd},t.prototype.jd=function(){return this.Wd},t.prototype.en=function(){this.fd.removeEventListener("wheel",this.Od),0!==this.Td&&window.cancelAnimationFrame(this.Td),this.hi.xf().sn(this),this.hi.U().te().sn(this),this.hi.yl().sn(this),this.hi.en();for(var t=0,i=this.Dd;t<i.length;t++){var n=i[t];this.Ed.removeChild(n.Xv()),n.U_().sn(this),n.en()}this.Dd=[],f(this.Wd).en(),null!==this.fd.parentElement&&this.fd.parentElement.removeChild(this.fd),this.hf.en(),this.w_.en()},t.prototype.zd=function(t,i,n){if(void 0===n&&(n=!1),this.Vn!==i||this.Jh!==t){this.Vn=i,this.Jh=t;var s=i+"px",h=t+"px";f(this.fd).style.height=s,f(this.fd).style.width=h,this.Ed.style.height=s,this.Ed.style.width=h,n?this.qd(new Zt(3)):this.hi.df()}},t.prototype.h_=function(t){void 0===t&&(t=new Zt(3));for(var i=0;i<this.Dd.length;i++)this.Dd[i].h_(t.Ce(i).ye);this.ki.timeScale.visible&&this.Wd.h_(t.ke())},t.prototype.os=function(t){this.hi.os(t),this.Id();var i=t.width||this.Jh,n=t.height||this.Vn;this.zd(i,n)},t.prototype.U_=function(){return this.w_},t.prototype.xf=function(){return this.hf},t.prototype.Hd=function(){var t=this;null!==this.Ld&&(this.qd(this.Ld),this.Ld=null);var i=this.Dd[0],n=mn(document,new wn(this.Jh,this.Vn)),s=bn(n),h=Mn(n);return z(s,h,(function(){var n=0,h=0,r=function(i){for(var r=0;r<t.Dd.length;r++){var e=t.Dd[r],u=e.H_().ht,a=f("left"===i?e.G_():e.Q_()),o=a.l_();s.drawImage(o,n,h,a.n_(),u),h+=u}};t.Yd()&&(r("left"),n=f(i.G_()).n_()),h=0;for(var e=0;e<t.Dd.length;e++){var u=t.Dd[e],a=u.H_(),o=u.l_();s.drawImage(o,n,h,a.st,a.ht),h+=a.ht}n+=i.H_().st,t.Kd()&&(h=0,r("right"));var l=function(i){var r=f("left"===i?t.Wd.Md():t.Wd.bd()),e=r.H_(),u=r.l_();s.drawImage(u,n,h,e.st,e.ht)};if(t.ki.timeScale.visible){n=0,t.Yd()&&(l("left"),n=f(i.G_()).n_());var c=t.Wd.H_();o=t.Wd.l_();s.drawImage(o,n,h,c.st,c.ht),t.Kd()&&(n+=i.H_().st,l("right"),s.restore())}})),n},t.prototype.$d=function(t){return"none"===t?0:("left"!==t||this.Yd())&&("right"!==t||this.Kd())?0===this.Dd.length?0:f("left"===t?this.Dd[0].G_():this.Dd[0].Q_()).n_():0},t.prototype.Xd=function(){for(var t=0,i=0,n=0,s=0,h=this.Dd;s<h.length;s++){var r=h[s];this.Yd()&&(i=Math.max(i,f(r.G_()).Qv())),this.Kd()&&(n=Math.max(n,f(r.Q_()).Qv())),t+=r.kl()}var e=this.Jh,u=this.Vn,a=Math.max(e-i-n,0),o=this.ki.timeScale.visible,l=o?this.Wd.gd():0;l%2&&(l+=1);for(var c=0+l,v=u<c?0:u-c,_=v/t,d=0,w=0;w<this.Dd.length;++w){(r=this.Dd[w]).B_(this.hi.kf()[w]);var M,b=0;b=w===this.Dd.length-1?v-d:Math.round(r.kl()*_),d+=M=Math.max(b,2),r.i_(new wn(a,M)),this.Yd()&&r.q_(i,"left"),this.Kd()&&r.q_(n,"right"),r.s_()&&this.hi.Sf(r.s_(),M)}this.Wd.pd(new wn(o?a:0,l),o?i:0,o?n:0),this.hi.Br(a),this.Ad!==i&&(this.Ad=i),this.Bd!==n&&(this.Bd=n)},t.prototype.Vd=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.ki.handleScroll.mouseWheel||0!==n&&this.ki.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.ki.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.fd.getBoundingClientRect().left;this.vt().Af(h,s)}0!==i&&this.ki.handleScroll.mouseWheel&&this.vt().Bf(-80*i)}},t.prototype.qd=function(t){var i=t.ke();if(3===i&&this.Zd(),3===i||2===i){for(var n=this.hi.kf(),s=0;s<n.length;s++)t.Ce(s).Ms&&n[s].Rl();for(var h=t.Te(),r=0,e=h;r<e.length;r++){var u=e[r];this.Ae(u)}h.length>0&&(this.hi.Wr(),this.hi.Ro(),this.hi.zr()),this.Wd.V()}this.h_(t)},t.prototype.Ae=function(t){var i=this.hi.U();switch(t.xe){case 0:i.ne();break;case 1:i.se(t.X);break;case 2:i.mr(t.X);break;case 3:i.pr(t.X);break;case 4:i.Hr()}},t.prototype.ef=function(t){var i=this;null!==this.Ld?this.Ld._n(t):this.Ld=t,this.Fd||(this.Fd=!0,this.Td=window.requestAnimationFrame((function(){i.Fd=!1,i.Td=0,null!==i.Ld&&(i.qd(i.Ld),i.Ld=null)})))},t.prototype.Zd=function(){this.Rd()},t.prototype.Rd=function(){for(var t=this.hi.kf(),i=t.length,n=this.Dd.length,s=i;s<n;s++){var h=l(this.Dd.pop());this.Ed.removeChild(h.Xv()),h.U_().sn(this),h.en()}for(s=n;s<i;s++){(h=new zn(this,t[s])).U_().Ji(this.Jd.bind(this),this),this.Dd.push(h),this.Ed.insertBefore(h.Xv(),this.Wd.Xv())}for(s=0;s<i;s++){var r=t[s];(h=this.Dd[s]).s_()!==r?h.B_(r):h.A_()}this.Id(),this.Xd()},t.prototype.Gd=function(t,i){var n,s=new Map;null!==t&&this.hi.P().forEach((function(i){var n=i.za(t);null!==n&&s.set(i,n)}));if(null!==t){var h=this.hi.U().ri(t);null!==h&&(n=h)}var r=this.vt().bf(),e=null!==r&&r.pf instanceof en?r.pf:void 0,u=null!==r&&void 0!==r.P_?r.P_.Ta:void 0;return{S:n,Qd:i||void 0,tw:e,iw:s,nw:u}},t.prototype.Jd=function(t,i){var n=this;this.w_.hn((function(){return n.Gd(t,i)}))},t.prototype.Pd=function(t,i){var n=this;this.hf.hn((function(){return n.Gd(t,i)}))},t.prototype.Id=function(){var t=this.ki.timeScale.visible?"":"none";this.Wd.Xv().style.display=t},t.prototype.Yd=function(){return this.Dd[0].s_().Al().ct().visible},t.prototype.Kd=function(){return this.Dd[0].s_().Bl().ct().visible},t}();function qn(t,i,n){var s=n.value,h={Uh:i,S:t,X:[s,s,s,s]};return"color"in n&&void 0!==n.color&&(h.et=n.color),h}function Hn(t,i,n){return{Uh:i,S:t,X:[n.open,n.high,n.low,n.close]}}function Yn(t){return void 0!==t.X}function Kn(t){return function(i,n,s){return void 0===(h=s).open&&void 0===h.value?{S:i,Uh:n}:t(i,n,s);var h}}var $n={Candlestick:Kn(Hn),Bar:Kn(Hn),Area:Kn(qn),Baseline:Kn(qn),Histogram:Kn(qn),Line:Kn(qn)};function Xn(t){return $n[t]}function Zn(t){return 60*t*60*1e3}function Jn(t){return 60*t*1e3}var Gn,Qn=[{sw:(Gn=1,1e3*Gn),jh:10},{sw:Jn(1),jh:20},{sw:Jn(5),jh:21},{sw:Jn(30),jh:22},{sw:Zn(1),jh:30},{sw:Zn(3),jh:31},{sw:Zn(6),jh:32},{sw:Zn(12),jh:33}];function ts(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=Qn.length-1;n>=0;--n)if(Math.floor(i.getTime()/Qn[n].sw)!==Math.floor(t.getTime()/Qn[n].sw))return Qn[n].jh;return 0}function is(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].S.Bh,s=null!==n?new Date(1e3*n):null,h=0,r=i;r<t.length;++r){var e=t[r],u=new Date(1e3*e.S.Bh);null!==s&&(e.Ih=ts(u,s)),h+=e.S.Bh-(n||e.S.Bh),n=e.S.Bh,s=u}if(0===i&&t.length>1){var a=Math.ceil(h/(t.length-1)),o=new Date(1e3*(t[0].S.Bh-a));t[0].Ih=ts(new Date(1e3*t[0].S.Bh),o)}}}function ns(t){if(!qt(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Bh:Math.round(i.getTime()/1e3),Ah:t}}function ss(t){if(!Ht(t))throw new Error("time must be of type isUTCTimestamp");return{Bh:t}}function hs(t){return 0===t.length?null:qt(t[0].time)?ns:ss}function rs(t){return Ht(t)?ss(t):qt(t)?ns(t):ns(es(t))}function es(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function us(t){w(t.time)&&(t.time=es(t.time))}function as(t){return{Uh:0,hw:new Map,js:t}}function os(t){if(void 0!==t&&0!==t.length)return{rw:t[0].S.Bh,ew:t[t.length-1].S.Bh}}var ls=function(){function t(){this.uw=new Map,this.aw=new Map,this.ow=new Map,this.lw=[]}return t.prototype.en=function(){this.uw.clear(),this.aw.clear(),this.ow.clear(),this.lw=[]},t.prototype.fw=function(t,i){var n=this,s=0!==this.uw.size,h=!1,r=this.aw.get(t);if(void 0!==r)if(1===this.aw.size)s=!1,h=!0,this.uw.clear();else for(var e=0,u=this.lw;e<u.length;e++){u[e].pointData.hw.delete(t)&&(h=!0)}var a=[];if(0!==i.length){!function(t){t.forEach(us)}(i);var o=f(hs(i)),l=Xn(t.Ga());a=i.map((function(i){var s=o(i.time),r=n.uw.get(s.Bh);void 0===r&&(r=as(s),n.uw.set(s.Bh,r),h=!0);var e=l(s,r.Uh,i);return r.hw.set(t,e),e}))}s&&this.cw(),this._w(t,a);var c=-1;if(h){var v=[];this.uw.forEach((function(t){v.push({Ih:0,S:t.js,pointData:t})})),v.sort((function(t,i){return t.S.Bh-i.S.Bh})),c=this.dw(v)}return this.ww(t,c,function(t,i){var n=os(t),s=os(i);if(void 0!==n&&void 0!==s)return{Uo:n.ew>=s.ew&&n.rw>=s.rw}}(this.aw.get(t),r))},t.prototype.jf=function(t){return this.fw(t,[])},t.prototype.Mw=function(t,i){us(i);var n=f(hs([i]))(i.time),s=this.ow.get(t);if(void 0!==s&&n.Bh<s.Bh)throw new Error("Cannot update oldest data, last time=".concat(s.Bh,", new time=").concat(n.Bh));var h=this.uw.get(n.Bh),r=void 0===h;void 0===h&&(h=as(n),this.uw.set(n.Bh,h));var e=Xn(t.Ga())(n,h.Uh,i);h.hw.set(t,e),this.bw(t,e);var u={Uo:Yn(e)};if(!r)return this.ww(t,-1,u);var a={Ih:0,S:h.js,pointData:h},o=Et(this.lw,a.S.Bh,(function(t,i){return t.S.Bh<i}));this.lw.splice(o,0,a);for(var l=o;l<this.lw.length;++l)fs(this.lw[l].pointData,l);return is(this.lw,o),this.ww(t,o,u)},t.prototype.bw=function(t,i){var n=this.aw.get(t);void 0===n&&(n=[],this.aw.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.S.Bh>s.S.Bh?Yn(i)&&n.push(i):Yn(i)?n[n.length-1]=i:n.splice(-1,1),this.ow.set(t,i.S)},t.prototype._w=function(t,i){0!==i.length?(this.aw.set(t,i.filter(Yn)),this.ow.set(t,i[i.length-1].S)):(this.aw.delete(t),this.ow.delete(t))},t.prototype.cw=function(){for(var t=0,i=this.lw;t<i.length;t++){var n=i[t];0===n.pointData.hw.size&&this.uw.delete(n.S.Bh)}},t.prototype.dw=function(t){for(var i=-1,n=0;n<this.lw.length&&n<t.length;++n){var s=this.lw[n],h=t[n];if(s.S.Bh!==h.S.Bh){i=n;break}h.Ih=s.Ih,fs(h.pointData,n)}if(-1===i&&this.lw.length!==t.length&&(i=Math.min(this.lw.length,t.length)),-1===i)return-1;for(n=i;n<t.length;++n)fs(t[n].pointData,n);return is(t,i),this.lw=t,i},t.prototype.mw=function(){if(0===this.aw.size)return null;var t=0;return this.aw.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Uh))})),t},t.prototype.ww=function(t,i,n){var s={pw:new Map,U:{Er:this.mw()}};if(-1!==i)this.aw.forEach((function(i,h){s.pw.set(h,{ta:i,gw:h===t?n:void 0})})),this.aw.has(t)||s.pw.set(t,{ta:[],gw:n}),s.U.yw=this.lw,s.U.kw=i;else{var h=this.aw.get(t);s.pw.set(t,{ta:h||[],gw:n})}return s},t}();function fs(t,i){t.Uh=i,t.hw.forEach((function(t){t.Uh=i}))}var cs={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},vs=function(){function t(t){this.Ka=t}return t.prototype.applyOptions=function(t){this.Ka.os(t)},t.prototype.options=function(){return this.Ka.ct()},t.prototype.Cw=function(){return this.Ka},t}();function _s(t){var i=t.overlay,n=function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(s=Object.getOwnPropertySymbols(t);h<s.length;h++)i.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(t,s[h])&&(n[s[h]]=t[s[h]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var ds=function(){function t(t,i,n){this.Ye=t,this.Nw=i,this.xw=n}return t.prototype.priceFormatter=function(){return this.Ye.Js()},t.prototype.priceToCoordinate=function(t){var i=this.Ye.H();return null===i?null:this.Ye.$().K(t,i.X)},t.prototype.coordinateToPrice=function(t){var i=this.Ye.H();return null===i?null:this.Ye.$().Si(t,i.X)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new It(new Pt(t.from,t.to)).$h(),n=this.Ye.Hi();if(n.ti())return null;var s=n.do(i.uh(),1),h=n.do(i.ah(),-1),r=f(n.co()),e=f(n.qi());if(null!==s&&null!==h&&s.Uh>h.Uh)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===s||s.Uh===r?t.from-r:s.Uh-r,barsAfter:null===h||h.Uh===e?e-t.to:e-h.Uh};return null!==s&&null!==h&&(u.from=s.S.Ah||s.S.Bh,u.to=h.S.Ah||h.S.Bh),u},t.prototype.setData=function(t){this.Ye.Ga(),this.Nw.Sw(this.Ye,t)},t.prototype.update=function(t){this.Ye.Ga(),this.Nw.Dw(this.Ye,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return u(u({},t),{time:rs(t.time)})}));this.Ye.qo(i)},t.prototype.applyOptions=function(t){var i=_s(t);this.Ye.os(i)},t.prototype.options=function(){return b(this.Ye.ct())},t.prototype.priceScale=function(){return this.xw.priceScale(this.Ye.$().us())},t.prototype.createPriceLine=function(t){var i=v(b(cs),t),n=this.Ye.Ho(i);return new vs(n)},t.prototype.removePriceLine=function(t){this.Ye.Yo(t.Cw())},t.prototype.seriesType=function(){return this.Ye.Ga()},t}(),ws=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.applyOptions=function(i){St(i),t.prototype.applyOptions.call(this,i)},i}(ds),Ms={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},bs={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Yt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},ms={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:Yt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:u({},Ms),leftPriceScale:u(u({},Ms),{visible:!1}),rightPriceScale:u(u({},Ms),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:bs,localization:{locale:Cn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0}},ps={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},gs={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ys={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},ks={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Cs={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ns={color:"#26a69a",base:0},xs={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Ss=function(){function t(t,i){this.Tw=t,this.Aw=i}return t.prototype.applyOptions=function(t){this.Tw.vt().gf(this.Aw,t)},t.prototype.options=function(){return this.Gt().ct()},t.prototype.width=function(){return Xt(this.Aw)?this.Tw.$d("left"===this.Aw?"left":"right"):0},t.prototype.Gt=function(){return f(this.Tw.vt().yf(this.Aw)).$},t}(),Ds=function(){function t(t,i){this.Bw=new it,this.rr=new it,this.ld=new it,this.hi=t,this._l=t.U(),this.Wd=i,this._l.Gr().Ji(this.Lw.bind(this)),this._l.Qr().Ji(this.Fw.bind(this)),this.Wd.md().Ji(this.Ew.bind(this))}return t.prototype.en=function(){this._l.Gr().sn(this),this._l.Qr().sn(this),this.Wd.md().sn(this),this.Bw.en(),this.rr.en(),this.ld.en()},t.prototype.scrollPosition=function(){return this._l.Ur()},t.prototype.scrollToPosition=function(t,i){i?this._l.Jr(t,1e3):this.hi.pr(t)},t.prototype.scrollToRealTime=function(){this._l.Zr()},t.prototype.getVisibleRange=function(){var t,i,n=this._l.Nr();return null===n?null:{from:null!==(t=n.from.Ah)&&void 0!==t?t:n.from.Bh,to:null!==(i=n.to.Ah)&&void 0!==i?i:n.to.Bh}},t.prototype.setVisibleRange=function(t){var i={from:rs(t.from),to:rs(t.to)},n=this._l.Ar(i);this.hi.qf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this._l.Cr();return null===t?null:{from:t.uh(),to:t.ah()}},t.prototype.setVisibleLogicalRange=function(t){o(t.from<=t.to,"The from index cannot be after the to index."),this.hi.qf(t)},t.prototype.resetTimeScale=function(){this.hi.De()},t.prototype.fitContent=function(){this.hi.ne()},t.prototype.logicalToCoordinate=function(t){var i=this.hi.U();return i.ti()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){return this._l.ti()?null:this._l.Vr(t)},t.prototype.timeToCoordinate=function(t){var i=rs(t),n=this._l.gr(i,!1);return null===n?null:this._l.G(n)},t.prototype.coordinateToTime=function(t){var i,n=this.hi.U(),s=n.Vr(t),h=n.ri(s);return null===h?null:null!==(i=h.Ah)&&void 0!==i?i:h.Bh},t.prototype.width=function(){return this.Wd.H_().st},t.prototype.height=function(){return this.Wd.H_().ht},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Bw.Ji(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Bw.nn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.rr.Ji(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.rr.nn(t)},t.prototype.subscribeSizeChange=function(t){this.ld.Ji(t)},t.prototype.unsubscribeSizeChange=function(t){this.ld.nn(t)},t.prototype.applyOptions=function(t){this._l.os(t)},t.prototype.options=function(){return b(this._l.ct())},t.prototype.Lw=function(){this.Bw.rn()&&this.Bw.hn(this.getVisibleRange())},t.prototype.Fw=function(){this.rr.rn()&&this.rr.hn(this.getVisibleLogicalRange())},t.prototype.Ew=function(t){this.ld.hn(t.st,t.ht)},t}();function Ts(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function As(t){return function(t){if(M(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&M(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;M(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=v(t.leftPriceScale,t.priceScale),t.rightPriceScale=v(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),function(t){t.layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor})}(t),t}var Bs=function(){function t(t,i){var n=this;this.Ow=new ls,this.Vw=new Map,this.Pw=new Map,this.Ww=new it,this.zw=new it;var s=void 0===i?b(ms):v(b(ms),As(i));this.Tw=new jn(t,s),this.Tw.U_().Ji((function(t){n.Ww.rn()&&n.Ww.hn(n.Rw(t()))}),this),this.Tw.xf().Ji((function(t){n.zw.rn()&&n.zw.hn(n.Rw(t()))}),this);var h=this.Tw.vt();this.Iw=new Ds(h,this.Tw.jd())}return t.prototype.remove=function(){this.Tw.U_().sn(this),this.Tw.xf().sn(this),this.Iw.en(),this.Tw.en(),this.Vw.clear(),this.Pw.clear(),this.Ww.en(),this.zw.en(),this.Ow.en()},t.prototype.resize=function(t,i,n){this.Tw.zd(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Ts((t=_s(t)).priceFormat);var i=v(b(xs),ks,t),n=this.Tw.vt().If("Area",i),s=new ds(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),Ts((t=_s(t)).priceFormat);var i=v(b(xs),b(Cs),t),n=this.Tw.vt().If("Baseline",i),s=new ds(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Ts((t=_s(t)).priceFormat);var i=v(b(xs),gs,t),n=this.Tw.vt().If("Bar",i),s=new ds(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),St(t=_s(t)),Ts(t.priceFormat);var i=v(b(xs),ps,t),n=this.Tw.vt().If("Candlestick",i),s=new ws(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Ts((t=_s(t)).priceFormat);var i=v(b(xs),Ns,t),n=this.Tw.vt().If("Histogram",i),s=new ds(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Ts((t=_s(t)).priceFormat);var i=v(b(xs),ys,t),n=this.Tw.vt().If("Line",i),s=new ds(n,this,this);return this.Vw.set(s,n),this.Pw.set(n,s),s},t.prototype.removeSeries=function(t){var i=l(this.Vw.get(t)),n=this.Ow.jf(i);this.Tw.vt().jf(i),this.Uw(n),this.Vw.delete(t),this.Pw.delete(i)},t.prototype.Sw=function(t,i){this.Uw(this.Ow.fw(t,i))},t.prototype.Dw=function(t,i){this.Uw(this.Ow.Mw(t,i))},t.prototype.subscribeClick=function(t){this.Ww.Ji(t)},t.prototype.unsubscribeClick=function(t){this.Ww.nn(t)},t.prototype.subscribeCrosshairMove=function(t){this.zw.Ji(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.zw.nn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.Tw.vt().Hf()),new Ss(this.Tw,t)},t.prototype.timeScale=function(){return this.Iw},t.prototype.applyOptions=function(t){this.Tw.os(As(t))},t.prototype.options=function(){return this.Tw.ct()},t.prototype.takeScreenshot=function(){return this.Tw.Hd()},t.prototype.Uw=function(t){var i=this.Tw.vt();i.zf(t.U.Er,t.U.yw,t.U.kw),t.pw.forEach((function(t,i){return i._(t.ta,t.gw)})),i.Wr()},t.prototype.jw=function(t){return l(this.Pw.get(t))},t.prototype.Rw=function(t){var i=this,n=new Map;t.iw.forEach((function(t,s){n.set(i.jw(s),t)}));var s=void 0===t.tw?void 0:this.jw(t.tw);return{time:t.S&&(t.S.Ah||t.S.Bh),point:t.Qd,hoveredSeries:s,hoveredMarkerId:t.nw,seriesPrices:n}},t}();function Ls(t,i){var n;if(w(t)){var s=document.getElementById(t);o(null!==s,"Cannot find element in DOM with id=".concat(t)),n=s}else n=t;return new Bs(n,i)}function Fs(){return"3.8.0-dev+202112201911"}export{Ut as ColorType,U as CrosshairMode,yt as LasPriceAnimationMode,yt as LastPriceAnimationMode,n as LineStyle,i as LineType,kt as PriceLineSource,bt as PriceScaleMode,zt as TickMarkType,Ls as createChart,qt as isBusinessDay,Ht as isUTCTimestamp,Fs as version};
