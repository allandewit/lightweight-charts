/*!
 * @license
 * TradingView Lightweight Charts v3.8.0-dev+202112201911
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(){"use strict";var t,i;function n(t,i){var n,s=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(s)}function s(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(n,i+h),t.lineTo(s,i+h),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(t||(t={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(i||(i={}));var h=function(t,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},h(t,i)};function r(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}h(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var e=function(){return e=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},e.apply(this,arguments)};function u(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))}function a(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function o(t){if(void 0===t)throw new Error("Value is undefined");return t}function l(t){if(null===t)throw new Error("Value is null");return t}function f(t){return l(o(t))}function c(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var s=0,h=i;s<h.length;s++){var r=h[s];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:c(t[e],r[e]))}return t}function v(t){return"number"==typeof t&&isFinite(t)}function _(t){return"number"==typeof t&&t%1==0}function d(t){return"string"==typeof t}function w(t){return"boolean"==typeof t}function M(t){var i,n,s,h=t;if(!h||"object"!=typeof h)return h;for(n in i=Array.isArray(h)?[]:{},h)h.hasOwnProperty(n)&&(s=h[n],i[n]=s&&"object"==typeof s?M(s):s);return i}function b(t){return null!==t}function m(t){return null===t?void 0:t}var g=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,s){this.t.forEach((function(h){t.save(),h.h(t,i,n,s),t.restore()}))},t}(),p=function(){function t(){}return t.prototype.h=function(t,i,n,s){t.save(),t.scale(i,i),this.u(t,n,s),t.restore()},t.prototype.o=function(t,i,n,s){t.save(),t.scale(i,i),this.l(t,n,s),t.restore()},t.prototype.l=function(t,i,n){},t}(),y=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,s=function(s){t.beginPath();for(var h=i.to-1;h>=i.from;--h){var r=n.m[h];t.moveTo(r.g,r.p),t.arc(r.g,r.p,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,s(n.C+2),t.fillStyle=n.N,s(n.C)}},i}(p);function k(){return{m:[{g:0,p:0,S:0,T:0}],N:"",k:"",C:0,M:null}}var C={from:0,to:1},N=function(){function t(t,i){this.D=new g,this.A=[],this.B=[],this.L=!0,this.F=t,this.O=i,this.D.i(this.A)}return t.prototype.P=function(t){var i=this.F.V();i.length!==this.A.length&&(this.B=i.map(k),this.A=this.B.map((function(t){var i=new y;return i._(t),i})),this.D.i(this.A)),this.L=!0},t.prototype.R=function(t,i,n){return this.L&&(this.W(t),this.L=!1),this.D},t.prototype.W=function(t){var i=this,n=this.F.V(),s=this.O.I(),h=this.F.j();n.forEach((function(n,r){var e,u=i.B[r],a=n.U(s);if(null!==a&&n.q()){var o=l(n.H());u.N=a.Y,u.C=a.C,u.m[0].T=a.T,u.m[0].p=n.$().K(a.T,o.X),u.k=null!==(e=a.Z)&&void 0!==e?e:i.F.J(u.m[0].p/t),u.m[0].S=s,u.m[0].g=h.G(s),u.M=C}else u.M=null}))},t}(),S=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,h,r){if(null!==this.tt){var e=this.tt.it.q,u=this.tt.nt.q;if(e||u){t.save();var a=Math.round(this.tt.g*i),o=Math.round(this.tt.p*i),l=Math.ceil(this.tt.st*i),f=Math.ceil(this.tt.ht*i);t.lineCap="butt",e&&a>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,n(t,this.tt.it.ut),function(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(i+h,n),t.lineTo(i+h,s),t.stroke()}(t,a,0,f)),u&&o>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,n(t,this.tt.nt.ut),s(t,o,0,l)),t.restore()}}},t}(),x=function(){function t(t){this.L=!0,this.at={it:{rt:1,ut:0,et:"",q:!1},nt:{rt:1,ut:0,et:"",q:!1},st:0,ht:0,g:0,p:0},this.ot=new S(this.at),this.lt=t}return t.prototype.P=function(){this.L=!0},t.prototype.R=function(t,i){return this.L&&(this.W(),this.L=!1),this.ot},t.prototype.W=function(){var t=this.lt.q(),i=l(this.lt.ft()),n=i.vt().ct().crosshair,s=this.at;s.nt.q=t&&this.lt._t(i),s.it.q=t&&this.lt.dt(),s.nt.rt=n.horzLine.width,s.nt.ut=n.horzLine.style,s.nt.et=n.horzLine.color,s.it.rt=n.vertLine.width,s.it.ut=n.vertLine.style,s.it.et=n.vertLine.color,s.st=i.wt(),s.ht=i.Mt(),s.g=this.lt.bt(),s.p=this.lt.gt()},t}(),T={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function D(t){return t<0?0:t>255?255:Math.round(t)||0}function A(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var B=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,L=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,E=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,F=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function O(t){var i;if((t=t.toLowerCase())in T&&(t=T[t]),i=F.exec(t)||E.exec(t))return[D(parseInt(i[1],10)),D(parseInt(i[2],10)),D(parseInt(i[3],10)),A(i.length<5?1:parseFloat(i[4]))];if(i=L.exec(t))return[D(parseInt(i[1],16)),D(parseInt(i[2],16)),D(parseInt(i[3],16)),1];if(i=B.exec(t))return[D(17*parseInt(i[1],16)),D(17*parseInt(i[2],16)),D(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function P(t){var i,n=O(t);return{yt:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),kt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function V(t,i,n,s,h,r){t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+h-r,s-2*r,r),t.fillRect(i,n,r,h),t.fillRect(i+s-r,n,r,h)}function R(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function W(t,i,n,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,h),t.restore()}function z(t,i,n,s,h,r,e){t.save(),t.globalCompositeOperation="copy";var u=t.createLinearGradient(0,0,0,h);u.addColorStop(0,r),u.addColorStop(1,e),t.fillStyle=u,t.fillRect(i,n,s,h),t.restore()}var I,j=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.Ct=i},t.prototype.h=function(t,i,n,s,h,r){if(this.tt.q){t.font=i.Nt;var e=this.tt.St||!this.tt.xt?i.Tt:0,u=i.Dt,a=i.At,o=i.Bt,l=i.Lt,f=i.Et,c=this.tt.Ft,v=Math.ceil(n.Ot(t,c)),_=i.Pt,d=i.Vt+a+o,w=Math.ceil(.5*d),M=u+v+l+f+e,b=this.Ct.Rt;this.Ct.Wt&&(b=this.Ct.Wt);var m,g,p=(b=Math.round(b))-w,y=p+d,k="right"===h,C=k?s:0,N=Math.ceil(s*r),S=C;if(t.fillStyle=this.Ct.yt,t.lineWidth=1,t.lineCap="butt",c){k?(m=C-e,g=(S=C-M)+f):(S=C+M,m=C+e,g=C+u+e+l);var x=Math.max(1,Math.floor(r)),T=Math.max(1,Math.floor(u*r)),D=k?N:0,A=Math.round(p*r),B=Math.round(S*r),L=Math.round(b*r)-Math.floor(.5*r),E=L+x+(L-A),F=Math.round(m*r);t.save(),t.beginPath(),t.moveTo(D,A),t.lineTo(B,A),t.lineTo(B,E),t.lineTo(D,E),t.fill(),t.fillStyle=this.tt.Z,t.fillRect(k?N-T:0,A,T,E-A),this.tt.St&&(t.fillStyle=this.Ct.et,t.fillRect(D,L,F-D,x)),t.textAlign="left",t.fillStyle=this.Ct.et,R(t,r,(function(){t.fillText(c,g,y-o-_)})),t.restore()}}},t.prototype.Mt=function(t,i){return this.tt.q?t.Vt+t.At+t.Bt:0},t}(),U=function(){function t(t){this.zt={Rt:0,et:"#FFF",yt:"#000"},this.It={Ft:"",q:!1,St:!0,xt:!1,Z:""},this.jt={Ft:"",q:!1,St:!1,xt:!0,Z:""},this.L=!0,this.Ut=new(t||j)(this.It,this.zt),this.qt=new(t||j)(this.jt,this.zt)}return t.prototype.Ft=function(){return this.It.Ft},t.prototype.Rt=function(){return this.Ht(),this.zt.Rt},t.prototype.P=function(){this.L=!0},t.prototype.Mt=function(t,i){return void 0===i&&(i=!1),Math.max(this.Ut.Mt(t,i),this.qt.Mt(t,i))},t.prototype.Yt=function(){return this.zt.Wt||0},t.prototype.Kt=function(t){this.zt.Wt=t},t.prototype.$t=function(){return this.Ht(),this.It.q||this.jt.q},t.prototype.Xt=function(){return this.Ht(),this.It.q},t.prototype.R=function(t){return this.Ht(),this.It.St=this.It.St&&t.ct().drawTicks,this.jt.St=this.jt.St&&t.ct().drawTicks,this.Ut._(this.It,this.zt),this.qt._(this.jt,this.zt),this.Ut},t.prototype.Zt=function(){return this.Ht(),this.Ut._(this.It,this.zt),this.qt._(this.jt,this.zt),this.qt},t.prototype.Ht=function(){this.L&&(this.It.St=!0,this.jt.St=!1,this.Jt(this.It,this.jt,this.zt))},t}(),q=function(t){function i(i,n,s){var h=t.call(this)||this;return h.lt=i,h.Gt=n,h.Qt=s,h}return r(i,t),i.prototype.Jt=function(t,i,n){t.q=!1;var s=this.lt.ct().horzLine;if(s.labelVisible){var h=this.Gt.H();if(this.lt.q()&&!this.Gt.ti()&&null!==h){var r=P(s.labelBackgroundColor);n.yt=r.yt,n.et=r.kt;var e=this.Qt(this.Gt);n.Rt=e.Rt,t.Ft=this.Gt.ii(e.T,h),t.q=!0}}},i}(U),H=/[1-9]/g,Y=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var s=this;if(null!==this.tt&&!1!==this.tt.q&&0!==this.tt.Ft.length){t.font=i.Nt;var h=Math.round(i.ni.Ot(t,this.tt.Ft,H));if(!(h<=0)){t.save();var r=i.si,e=h+2*r,u=e/2,a=this.tt.wt,o=this.tt.Rt,f=Math.floor(o-u)+.5;f<0?(o+=Math.abs(0-f),f=Math.floor(o-u)+.5):f+e>a&&(o-=Math.abs(a-(f+e)),f=Math.floor(o-u)+.5);var c=f+e,v=0+i.Dt+i.At+i.Vt+i.Bt;t.fillStyle=this.tt.yt;var _=Math.round(f*n),d=Math.round(0*n),w=Math.round(c*n),M=Math.round(v*n);t.fillRect(_,d,w-_,M-d);var b=Math.round(this.tt.Rt*n),m=d,g=Math.round((m+i.Dt+i.Tt)*n);t.fillStyle=this.tt.et;var p=Math.max(1,Math.floor(n)),y=Math.floor(.5*n);t.fillRect(b-y,m,p,g-m);var k=v-i.Pt-i.Bt;t.textAlign="left",t.fillStyle=this.tt.et,R(t,n,(function(){t.fillText(l(s.tt).Ft,f+r,k)})),t.restore()}}},t}(),K=function(){function t(t,i,n){this.L=!0,this.ot=new Y,this.at={q:!1,yt:"#4c525e",et:"white",Ft:"",wt:0,Rt:NaN},this.O=t,this.hi=i,this.Qt=n}return t.prototype.P=function(){this.L=!0},t.prototype.R=function(){return this.L&&(this.W(),this.L=!1),this.ot._(this.at),this.ot},t.prototype.W=function(){var t=this.at;t.q=!1;var i=this.O.ct().vertLine;if(i.labelVisible){var n=this.hi.j();if(!n.ti()){var s=n.ri(this.O.I());t.wt=n.wt();var h=this.Qt();if(h.S){t.Rt=h.Rt,t.Ft=n.ei(l(s)),t.q=!0;var r=P(i.labelBackgroundColor);t.yt=r.yt,t.et=r.kt}}}},t}(),$=function(){function t(){this.ui=null,this.ai=0}return t.prototype.oi=function(){return this.ai},t.prototype.li=function(t){this.ai=t},t.prototype.$=function(){return this.ui},t.prototype.fi=function(t){this.ui=t},t.prototype.ci=function(){return[]},t.prototype.q=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(I||(I={}));var X=function(t){function i(i,n){var s=t.call(this)||this;s.vi=null,s._i=NaN,s.di=0,s.wi=!0,s.Mi=new Map,s.bi=!1,s.mi=NaN,s.gi=NaN,s.pi=NaN,s.yi=NaN,s.hi=i,s.ki=n,s.Ci=new N(i,s);var h,r;s.Ni=(h=function(){return s._i},r=function(){return s.gi},function(t){var i=r(),n=h();if(t===l(s.vi).Si())return{T:n,Rt:i};var e=l(t.H());return{T:t.xi(i,e),Rt:i}});var e=function(t,i){return function(){return{S:s.hi.j().ri(t()),Rt:i()}}}((function(){return s.di}),(function(){return s.bt()}));return s.Ti=new K(s,i,e),s.Di=new x(s),s}return r(i,t),i.prototype.ct=function(){return this.ki},i.prototype.Ai=function(t,i){this.pi=t,this.yi=i},i.prototype.Bi=function(){this.pi=NaN,this.yi=NaN},i.prototype.Li=function(){return this.pi},i.prototype.Ei=function(){return this.yi},i.prototype.Fi=function(t,i,n){this.bi||(this.bi=!0),this.wi=!0,this.Oi(t,i,n)},i.prototype.I=function(){return this.di},i.prototype.bt=function(){return this.mi},i.prototype.gt=function(){return this.gi},i.prototype.q=function(){return this.wi},i.prototype.Pi=function(){this.wi=!1,this.Vi(),this._i=NaN,this.mi=NaN,this.gi=NaN,this.vi=null,this.Bi()},i.prototype.Ri=function(t){return null!==this.vi?[this.Di,this.Ci]:[]},i.prototype._t=function(t){return t===this.vi&&this.ki.horzLine.visible},i.prototype.dt=function(){return this.ki.vertLine.visible},i.prototype.Wi=function(t,i){this.wi&&this.vi===t||this.Mi.clear();var n=[];return this.vi===t&&n.push(this.zi(this.Mi,i,this.Ni)),n},i.prototype.ci=function(){return this.wi?[this.Ti]:[]},i.prototype.ft=function(){return this.vi},i.prototype.Ii=function(){this.Di.P(),this.Mi.forEach((function(t){return t.P()})),this.Ti.P(),this.Ci.P()},i.prototype.ji=function(t){return t&&!t.Si().ti()?t.Si():null},i.prototype.Oi=function(t,i,n){this.Ui(t,i,n)&&this.Ii()},i.prototype.Ui=function(t,i,n){var s=this.mi,h=this.gi,r=this._i,e=this.di,u=this.vi,a=this.ji(n);this.di=t,this.mi=isNaN(t)?NaN:this.hi.j().G(t),this.vi=n;var o=null!==a?a.H():null;return null!==a&&null!==o?(this._i=i,this.gi=a.K(i,o)):(this._i=NaN,this.gi=NaN),s!==this.mi||h!==this.gi||e!==this.di||r!==this._i||u!==this.vi},i.prototype.Vi=function(){var t=this.hi.V().map((function(t){return t.Hi().qi()})).filter(b),i=0===t.length?null:Math.max.apply(Math,t);this.di=null!==i?i:NaN},i.prototype.zi=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new q(this,i,n),t.set(i,s)),s},i}($),Z=".";function J(t,i){if(!v(t))return"n/a";if(!_(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var G=function(){function t(t,i){if(i||(i=1),v(t)&&_(t)||(t=100),t<0)throw new TypeError("invalid base");this.Gt=t,this.Yi=i,this.Ki()}return t.prototype.format=function(t){var i=t<0?"âˆ’":"";return t=Math.abs(t),i+this.$i(t)},t.prototype.Ki=function(){if(this.Xi=0,this.Gt>0&&this.Yi>0)for(var t=this.Gt;t>1;)t/=10,this.Xi++},t.prototype.$i=function(t){var i=this.Gt/this.Yi,n=Math.floor(t),s="",h=void 0!==this.Xi?this.Xi:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.Xi);r>=i&&(r-=i,n+=1),s=Z+J(+r.toFixed(this.Xi)*this.Yi,h)}else n=Math.round(n*i)/i,h>0&&(s=Z+J(0,h));return n.toFixed(0)+s},t}(),Q=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return r(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(G),tt=function(){function t(){this.Zi=[]}return t.prototype.Ji=function(t,i,n){var s={Gi:t,Qi:i,tn:!0===n};this.Zi.push(s)},t.prototype.nn=function(t){var i=this.Zi.findIndex((function(i){return t===i.Gi}));i>-1&&this.Zi.splice(i,1)},t.prototype.sn=function(t){this.Zi=this.Zi.filter((function(i){return i.Qi===t}))},t.prototype.hn=function(t,i){var n=u([],this.Zi,!0);this.Zi=this.Zi.filter((function(t){return!t.tn})),n.forEach((function(n){return n.Gi(t,i)}))},t.prototype.rn=function(){return this.Zi.length>0},t.prototype.en=function(){this.Zi=[]},t}(),it=function(){function t(t,i){this.un=t,this.an=i}return t.prototype.on=function(t){return null!==t&&(this.un===t.un&&this.an===t.an)},t.prototype.ln=function(){return new t(this.un,this.an)},t.prototype.fn=function(){return this.un},t.prototype.cn=function(){return this.an},t.prototype.vn=function(){return this.an-this.un},t.prototype.ti=function(){return this.an===this.un||Number.isNaN(this.an)||Number.isNaN(this.un)},t.prototype._n=function(i){return null===i?this:new t(Math.min(this.fn(),i.fn()),Math.max(this.cn(),i.cn()))},t.prototype.dn=function(t){if(v(t)&&0!==this.an-this.un){var i=.5*(this.an+this.un),n=this.an-i,s=this.un-i;n*=t,s*=t,this.an=i+n,this.un=i+s}},t.prototype.wn=function(t){v(t)&&(this.an+=t,this.un+=t)},t.prototype.Mn=function(){return{minValue:this.un,maxValue:this.an}},t.bn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function nt(t,i,n){return Math.min(Math.max(t,i),n)}function st(t,i,n){return i-t<=n}function ht(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function rt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function et(t){var i=Math.ceil(t);return i%2==0?i-1:i}var ut={mn:4,gn:1e-4};function at(t,i){var n=100*(t-i)/i;return i<0?-n:n}function ot(t,i){var n=at(t.fn(),i),s=at(t.cn(),i);return new it(n,s)}function lt(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function ft(t,i){var n=lt(t.fn(),i),s=lt(t.cn(),i);return new it(n,s)}function ct(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=ht(n+i.gn)+i.mn;return t<0?-s:s}function vt(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.mn)-i.gn;return t<0?-s:s}function _t(t,i){if(null===t)return null;var n=ct(t.fn(),i),s=ct(t.cn(),i);return new it(n,s)}function dt(t,i){if(null===t)return null;var n=vt(t.fn(),i),s=vt(t.cn(),i);return new it(n,s)}function wt(t){if(null===t)return ut;var i=Math.abs(t.cn()-t.fn());if(i>=1||i<1e-15)return ut;var n=Math.ceil(Math.abs(Math.log10(i))),s=ut.mn+n;return{mn:s,gn:1/Math.pow(10,s)}}var Mt,bt=function(){function t(t,i){if(this.pn=t,this.yn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.pn))this.kn=[2,2.5,2];else{this.kn=[];for(var n=this.pn;1!==n;){if(n%2==0)this.kn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.kn.push(2,2.5),n/=5}if(this.kn.length>100)throw new Error("something wrong with base")}}}return t.prototype.Cn=function(t,i,n){for(var s,h,r,e=0===this.pn?0:1/this.pn,u=Math.pow(10,Math.max(0,Math.ceil(ht(t-i)))),a=0,o=this.yn[0];;){var l=st(u,e,1e-14)&&u>e+1e-14,f=st(u,n*o,1e-14),c=st(u,1,1e-14);if(!(l&&f&&c))break;u/=o,o=this.yn[++a%this.yn.length]}if(u<=e+1e-14&&(u=e),u=Math.max(1,u),this.kn.length>0&&(s=u,h=1,r=1e-14,Math.abs(s-h)<r))for(a=0,o=this.kn[0];st(u,n*o,1e-14)&&u>e+1e-14;)u/=o,o=this.kn[++a%this.kn.length];return u},t}(),mt=function(){function t(t,i,n,s){this.Nn=[],this.Gt=t,this.pn=i,this.Sn=n,this.xn=s}return t.prototype.Cn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Gt.Mt(),s=(t-i)*this.Tn()/n,h=new bt(this.pn,[2,2.5,2]),r=new bt(this.pn,[2,2,2.5]),e=new bt(this.pn,[2.5,2,2]),u=[];return u.push(h.Cn(t,i,s),r.Cn(t,i,s),e.Cn(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.Dn=function(){var t=this.Gt,i=t.H();if(null!==i){var n=t.Mt(),s=this.Sn(n-1,i),h=this.Sn(0,i),r=this.Gt.ct().entireTextOnly?this.An()/2:0,e=r,u=n-1-r,a=Math.max(s,h),o=Math.min(s,h);if(a!==o){for(var l=this.Cn(a,o),f=a%l,c=a>=o?1:-1,v=null,_=0,d=a-(f+=f<0?l:0);d>o;d-=l){var w=this.xn(d,i,!0);null!==v&&Math.abs(w-v)<this.Tn()||(w<e||w>u||(_<this.Nn.length?(this.Nn[_].Bn=w,this.Nn[_].Ln=t.En(d)):this.Nn.push({Bn:w,Ln:t.En(d)}),_++,v=w,t.Fn()&&(l=this.Cn(d*c,o))))}this.Nn.length=_}else this.Nn=[]}else this.Nn=[]},t.prototype.On=function(){return this.Nn},t.prototype.An=function(){return this.Gt.Vt()},t.prototype.Tn=function(){return Math.ceil(2.5*this.An())},t}();function gt(t){return t.slice().sort((function(t,i){return l(t.oi())-l(i.oi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Mt||(Mt={}));var pt,yt,kt=new Q,Ct=new G(100,1),Nt=function(){function t(t,i,n,s){this.Pn=0,this.Vn=null,this.Rn=null,this.Wn=null,this.zn={In:!1,jn:null},this.Un=0,this.qn=0,this.Hn=new tt,this.Yn=new tt,this.Kn=[],this.$n=null,this.Xn=null,this.Zn=null,this.Jn=null,this.Gn=Ct,this.Qn=wt(null),this.ts=t,this.ki=i,this.ns=n,this.ss=s,this.hs=new mt(this,100,this.rs.bind(this),this.es.bind(this))}return t.prototype.us=function(){return this.ts},t.prototype.ct=function(){return this.ki},t.prototype.os=function(t){if(c(this.ki,t),this.ls(),void 0!==t.mode&&this.fs({cs:t.mode}),void 0!==t.scaleMargins){var i=o(t.scaleMargins.top),n=o(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this.vs(),this.Xn=null}},t.prototype._s=function(){return this.ki.autoScale},t.prototype.Fn=function(){return 1===this.ki.mode},t.prototype.ds=function(){return 2===this.ki.mode},t.prototype.ws=function(){return 3===this.ki.mode},t.prototype.cs=function(){return{Ms:this.ki.autoScale,bs:this.ki.invertScale,cs:this.ki.mode}},t.prototype.fs=function(t){var i=this.cs(),n=null;void 0!==t.Ms&&(this.ki.autoScale=t.Ms),void 0!==t.cs&&(this.ki.mode=t.cs,2!==t.cs&&3!==t.cs||(this.ki.autoScale=!0),this.zn.In=!1),1===i.cs&&t.cs!==i.cs&&(!function(t,i){if(null===t)return!1;var n=vt(t.fn(),i),s=vt(t.cn(),i);return isFinite(n)&&isFinite(s)}(this.Rn,this.Qn)?this.ki.autoScale=!0:null!==(n=dt(this.Rn,this.Qn))&&this.gs(n)),1===t.cs&&t.cs!==i.cs&&null!==(n=_t(this.Rn,this.Qn))&&this.gs(n);var s=i.cs!==this.ki.mode;s&&(2===i.cs||this.ds())&&this.ls(),s&&(3===i.cs||this.ws())&&this.ls(),void 0!==t.bs&&i.bs!==t.bs&&(this.ki.invertScale=t.bs,this.ps()),this.Yn.hn(i,this.cs())},t.prototype.ys=function(){return this.Yn},t.prototype.Vt=function(){return this.ns.fontSize},t.prototype.Mt=function(){return this.Pn},t.prototype.ks=function(t){this.Pn!==t&&(this.Pn=t,this.vs(),this.Xn=null)},t.prototype.Cs=function(){if(this.Vn)return this.Vn;var t=this.Mt()-this.Ns()-this.Ss();return this.Vn=t,t},t.prototype.xs=function(){return this.Ts(),this.Rn},t.prototype.gs=function(t,i){var n=this.Rn;(i||null===n&&null!==t||null!==n&&!n.on(t))&&(this.Xn=null,this.Rn=t)},t.prototype.ti=function(){return this.Ts(),0===this.Pn||!this.Rn||this.Rn.ti()},t.prototype.Ds=function(t){return this.bs()?t:this.Mt()-1-t},t.prototype.K=function(t,i){return this.ds()?t=at(t,i):this.ws()&&(t=lt(t,i)),this.es(t,i)},t.prototype.As=function(t,i,n){this.Ts();for(var s=this.Ss(),h=l(this.xs()),r=h.fn(),e=h.cn(),u=this.Cs()-1,a=this.bs(),o=u/(e-r),f=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Bs(),_=f;_<c;_++){var d=t[_],w=d.T;if(!isNaN(w)){var M=w;null!==v&&(M=v(d.T,i));var b=s+o*(M-r),m=a?b:this.Pn-1-b;d.p=m}}},t.prototype.Ls=function(t,i,n){this.Ts();for(var s=this.Ss(),h=l(this.xs()),r=h.fn(),e=h.cn(),u=this.Cs()-1,a=this.bs(),o=u/(e-r),f=void 0===n?0:n.from,c=void 0===n?t.length:n.to,v=this.Bs(),_=f;_<c;_++){var d=t[_],w=d.open,M=d.high,b=d.low,m=d.close;null!==v&&(w=v(d.open,i),M=v(d.high,i),b=v(d.low,i),m=v(d.close,i));var g=s+o*(w-r),p=a?g:this.Pn-1-g;d.Es=p,g=s+o*(M-r),p=a?g:this.Pn-1-g,d.Fs=p,g=s+o*(b-r),p=a?g:this.Pn-1-g,d.Os=p,g=s+o*(m-r),p=a?g:this.Pn-1-g,d.Ps=p}},t.prototype.xi=function(t,i){var n=this.rs(t,i);return this.Vs(n,i)},t.prototype.Vs=function(t,i){var n=t;return this.ds()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.ws()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Rs=function(){return this.Kn},t.prototype.Ws=function(){if(this.$n)return this.$n;for(var t=[],i=0;i<this.Kn.length;i++){var n=this.Kn[i];null===n.oi()&&n.li(i+1),t.push(n)}return t=gt(t),this.$n=t,this.$n},t.prototype.zs=function(t){-1===this.Kn.indexOf(t)&&(this.Kn.push(t),this.ls(),this.Is())},t.prototype.js=function(t){var i=this.Kn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.Kn.splice(i,1),0===this.Kn.length&&(this.fs({Ms:!0}),this.gs(null)),this.ls(),this.Is()},t.prototype.H=function(){for(var t=null,i=0,n=this.Kn;i<n.length;i++){var s=n[i].H();null!==s&&((null===t||s.Us<t.Us)&&(t=s))}return null===t?null:t.X},t.prototype.bs=function(){return this.ki.invertScale},t.prototype.On=function(){return this.Xn||(this.hs.Dn(),this.Xn=this.hs.On(),this.Hn.hn()),this.Xn},t.prototype.qs=function(){return this.Hn},t.prototype.Hs=function(t){this.ds()||this.ws()||null===this.Zn&&null===this.Wn&&(this.ti()||(this.Zn=this.Pn-t,this.Wn=l(this.xs()).ln()))},t.prototype.Ys=function(t){if(!this.ds()&&!this.ws()&&null!==this.Zn){this.fs({Ms:!1}),(t=this.Pn-t)<0&&(t=0);var i=(this.Zn+.2*(this.Pn-1))/(t+.2*(this.Pn-1)),n=l(this.Wn).ln();i=Math.max(i,.1),n.dn(i),this.gs(n)}},t.prototype.Ks=function(){this.ds()||this.ws()||(this.Zn=null,this.Wn=null)},t.prototype.$s=function(t){this._s()||null===this.Jn&&null===this.Wn&&(this.ti()||(this.Jn=t,this.Wn=l(this.xs()).ln()))},t.prototype.Xs=function(t){if(!this._s()&&null!==this.Jn){var i=l(this.xs()).vn()/(this.Cs()-1),n=t-this.Jn;this.bs()&&(n*=-1);var s=n*i,h=l(this.Wn).ln();h.wn(s),this.gs(h,!0),this.Xn=null}},t.prototype.Zs=function(){this._s()||null!==this.Jn&&(this.Jn=null,this.Wn=null)},t.prototype.Js=function(){return this.Gn||this.ls(),this.Gn},t.prototype.ii=function(t,i){switch(this.ki.mode){case 2:return this.Js().format(at(t,i));case 3:return this.Js().format(lt(t,i));default:return this.Gs(t)}},t.prototype.En=function(t){switch(this.ki.mode){case 2:case 3:return this.Js().format(t);default:return this.Gs(t)}},t.prototype.Qs=function(t){return this.Gs(t,l(this.th()).Js())},t.prototype.ih=function(t,i){return t=at(t,i),kt.format(t)},t.prototype.nh=function(){return this.Kn},t.prototype.sh=function(t){this.zn={jn:t,In:!1}},t.prototype.Ii=function(){this.Kn.forEach((function(t){return t.Ii()}))},t.prototype.ls=function(){this.Xn=null;var t=this.th(),i=100;null!==t&&(i=Math.round(1/t.hh())),this.Gn=Ct,this.ds()?(this.Gn=kt,i=100):this.ws()?(this.Gn=new G(100,1),i=100):null!==t&&(this.Gn=t.Js()),this.hs=new mt(this,i,this.rs.bind(this),this.es.bind(this)),this.hs.Dn()},t.prototype.Is=function(){this.$n=null},t.prototype.th=function(){return this.Kn[0]||null},t.prototype.Ns=function(){return this.bs()?this.ki.scaleMargins.bottom*this.Mt()+this.qn:this.ki.scaleMargins.top*this.Mt()+this.Un},t.prototype.Ss=function(){return this.bs()?this.ki.scaleMargins.top*this.Mt()+this.Un:this.ki.scaleMargins.bottom*this.Mt()+this.qn},t.prototype.Ts=function(){this.zn.In||(this.zn.In=!0,this.rh())},t.prototype.vs=function(){this.Vn=null},t.prototype.es=function(t,i){if(this.Ts(),this.ti())return 0;t=this.Fn()&&t?ct(t,this.Qn):t;var n=l(this.xs()),s=this.Ss()+(this.Cs()-1)*(t-n.fn())/n.vn();return this.Ds(s)},t.prototype.rs=function(t,i){if(this.Ts(),this.ti())return 0;var n=this.Ds(t),s=l(this.xs()),h=s.fn()+s.vn()*((n-this.Ss())/(this.Cs()-1));return this.Fn()?vt(h,this.Qn):h},t.prototype.ps=function(){this.Xn=null,this.hs.Dn()},t.prototype.rh=function(){var t=this.zn.jn;if(null!==t){for(var i,n,s=null,h=0,r=0,e=0,u=this.nh();e<u.length;e++){var a=u[e];if(a.q()){var o=a.H();if(null!==o){var f=a.eh(t.uh(),t.ah()),c=f&&f.xs();if(null!==c){switch(this.ki.mode){case 1:c=_t(c,this.Qn);break;case 2:c=ot(c,o.X);break;case 3:c=ft(c,o.X)}if(s=null===s?c:s._n(l(c)),null!==f){var v=f.oh();null!==v&&(h=Math.max(h,v.above),r=Math.max(h,v.below))}}}}}if(h===this.Un&&r===this.qn||(this.Un=h,this.qn=r,this.Xn=null,this.vs()),null!==s){if(s.fn()===s.cn()){var _=this.th(),d=5*(null===_||this.ds()||this.ws()?1:_.hh());this.Fn()&&(s=dt(s,this.Qn)),s=new it(s.fn()-d,s.cn()+d),this.Fn()&&(s=_t(s,this.Qn))}if(this.Fn()){var w=dt(s,this.Qn),M=wt(w);if(i=M,n=this.Qn,i.mn!==n.mn||i.gn!==n.gn){var b=null!==this.Wn?dt(this.Wn,this.Qn):null;this.Qn=M,s=_t(w,M),null!==b&&(this.Wn=_t(b,M))}}this.gs(s)}else null===this.Rn&&(this.gs(new it(-.5,.5)),this.Qn=wt(null));this.zn.In=!0}},t.prototype.Bs=function(){var t=this;return this.ds()?at:this.ws()?lt:this.Fn()?function(i){return ct(i,t.Qn)}:null},t.prototype.Gs=function(t,i){return void 0===this.ss.priceFormatter?(void 0===i&&(i=this.Js()),i.format(t)):this.ss.priceFormatter(t)},t}();function St(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(pt||(pt={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(yt||(yt={}));var xt=function(t){return t.getUTCFullYear()};function Tt(t,i,n){return i.replace(/yyyy/g,function(t){return J(xt(t),4)}(t)).replace(/yy/g,function(t){return J(xt(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return J(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return J(function(t){return t.getUTCDate()}(t),2)}(t))}var Dt=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.lh=t,this.fh=i}return t.prototype._h=function(t){return Tt(t,this.lh,this.fh)},t}(),At=function(){function t(t){this.dh=t||"%h:%m:%s"}return t.prototype._h=function(t){return this.dh.replace("%h",J(t.getUTCHours(),2)).replace("%m",J(t.getUTCMinutes(),2)).replace("%s",J(t.getUTCSeconds(),2))},t}(),Bt={wh:"yyyy-MM-dd",Mh:"%h:%m:%s",bh:" ",mh:"default"},Lt=function(){function t(t){void 0===t&&(t={});var i=e(e({},Bt),t);this.gh=new Dt(i.wh,i.mh),this.ph=new At(i.Mh),this.yh=i.bh}return t.prototype._h=function(t){return"".concat(this.gh._h(t)).concat(this.yh).concat(this.ph._h(t))},t}();function Et(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(t[u],i)?(s=u+1,r-=e+1):r=e}return s}function Ft(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(i,t[u])?r=e:(s=u+1,r-=e+1)}return s}var Ot=function(){function t(t,i){void 0===i&&(i=50),this.kh=0,this.Ch=1,this.Nh=1,this.Sh=new Map,this.xh=new Map,this.Th=t,this.Dh=i}return t.prototype._h=function(t){var i=void 0===t.Ah?new Date(1e3*t.Bh).getTime():new Date(Date.UTC(t.Ah.year,t.Ah.month-1,t.Ah.day)).getTime(),n=this.Sh.get(i);if(void 0!==n)return n.Lh;if(this.kh===this.Dh){var s=this.xh.get(this.Nh);this.xh.delete(this.Nh),this.Sh.delete(o(s)),this.Nh++,this.kh--}var h=this.Th(t);return this.Sh.set(i,{Lh:h,Eh:this.Ch}),this.xh.set(this.Ch,i),this.kh++,this.Ch++,h},t}(),Pt=function(){function t(t,i){a(t<=i,"right should be >= left"),this.Fh=t,this.Oh=i}return t.prototype.uh=function(){return this.Fh},t.prototype.ah=function(){return this.Oh},t.prototype.Ph=function(){return this.Oh-this.Fh+1},t.prototype.Vh=function(t){return this.Fh<=t&&t<=this.Oh},t.prototype.on=function(t){return this.Fh===t.uh()&&this.Oh===t.ah()},t}();function Vt(t,i){return null===t||null===i?t===i:t.on(i)}var Rt,Wt=function(){function t(){this.Rh=new Map,this.Sh=null}return t.prototype.Wh=function(t,i){this.zh(i),this.Sh=null;for(var n=i;n<t.length;++n){var s=t[n],h=this.Rh.get(s.Ih);void 0===h&&(h=[],this.Rh.set(s.Ih,h)),h.push({jh:n,S:s.S,Uh:s.Ih})}},t.prototype.qh=function(t,i){var n=Math.ceil(i/t);return null!==this.Sh&&this.Sh.Hh===n||(this.Sh={On:this.Yh(n),Hh:n}),this.Sh.On},t.prototype.zh=function(t){if(0!==t){var i=[];this.Rh.forEach((function(n,s){t<=n[0].jh?i.push(s):n.splice(Et(n,t,(function(i){return i.jh<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var h=s[n];this.Rh.delete(h)}}else this.Rh.clear()},t.prototype.Yh=function(t){for(var i=[],n=0,s=Array.from(this.Rh.keys()).sort((function(t,i){return i-t}));n<s.length;n++){var h=s[n];if(this.Rh.get(h)){var r=i;i=[];for(var e=r.length,u=0,a=o(this.Rh.get(h)),l=a.length,f=1/0,c=-1/0,v=0;v<l;v++){for(var _=a[v],d=_.jh;u<e;){var w=r[u],M=w.jh;if(!(M<d)){f=M;break}u++,i.push(w),c=M,f=1/0}f-d>=t&&d-c>=t&&(i.push(_),c=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),zt=function(){function t(t){this.Kh=t}return t.prototype.$h=function(){return null===this.Kh?null:new Pt(Math.floor(this.Kh.uh()),Math.ceil(this.Kh.ah()))},t.prototype.Xh=function(){return this.Kh},t.Zh=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Rt||(Rt={}));var It,jt=function(){function t(t,i,n){this.Jh=0,this.Gh=null,this.Qh=[],this.Jn=null,this.Zn=null,this.tr=new Wt,this.ir=new Map,this.nr=zt.Zh(),this.sr=!0,this.hr=new tt,this.rr=new tt,this.er=new tt,this.ur=null,this.ar=null,this.lr=[],this.ki=i,this.ss=n,this.cr=i.rightOffset,this.vr=i.barSpacing,this.hi=t,this._r()}return t.prototype.ct=function(){return this.ki},t.prototype.dr=function(t){c(this.ss,t),this.wr(),this._r()},t.prototype.os=function(t,i){var n;c(this.ki,t),this.ki.fixLeftEdge&&this.Mr(),this.ki.fixRightEdge&&this.br(),void 0!==t.barSpacing&&this.hi.mr(t.barSpacing),void 0!==t.rightOffset&&this.hi.gr(t.rightOffset),void 0!==t.minBarSpacing&&this.hi.mr(null!==(n=t.barSpacing)&&void 0!==n?n:this.vr),this.wr(),this._r(),this.er.hn()},t.prototype.ri=function(t){var i;return(null===(i=this.Qh[t])||void 0===i?void 0:i.S)||null},t.prototype.pr=function(t,i){if(this.Qh.length<1)return null;if(t.Bh>this.Qh[this.Qh.length-1].S.Bh)return i?this.Qh.length-1:null;var n=Et(this.Qh,t.Bh,(function(t,i){return t.S.Bh<i}));return t.Bh<this.Qh[n].S.Bh?i?n:null:n},t.prototype.ti=function(){return 0===this.Jh||0===this.Qh.length||null===this.Gh},t.prototype.yr=function(){return this.kr(),this.nr.$h()},t.prototype.Cr=function(){return this.kr(),this.nr.Xh()},t.prototype.Nr=function(){var t=this.yr();if(null===t)return null;var i={from:t.uh(),to:t.ah()};return this.Sr(i)},t.prototype.Sr=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=l(this.Tr()),h=l(this.Dr());return{from:l(this.ri(Math.max(s,i))),to:l(this.ri(Math.min(h,n)))}},t.prototype.Ar=function(t){return{from:l(this.pr(t.from,!0)),to:l(this.pr(t.to,!0))}},t.prototype.wt=function(){return this.Jh},t.prototype.Br=function(t){if(isFinite(t)&&!(t<=0)&&this.Jh!==t){if(this.ki.lockVisibleTimeRangeOnResize&&this.Jh){var i=this.vr*t/this.Jh;this.vr=i}if(this.ki.fixLeftEdge){var n=this.yr();if(null!==n)if(n.uh()<=0){var s=this.Jh-t;this.cr-=Math.round(s/this.vr)+1}}this.Jh=t,this.sr=!0,this.Lr(),this.Er()}},t.prototype.G=function(t){if(this.ti()||!_(t))return 0;var i=this.Fr()+this.cr-t;return this.Jh-(i+.5)*this.vr-1},t.prototype.Or=function(t,i){for(var n=this.Fr(),s=void 0===i?0:i.from,h=void 0===i?t.length:i.to,r=s;r<h;r++){var e=t[r].S,u=n+this.cr-e,a=this.Jh-(u+.5)*this.vr-1;t[r].g=a}},t.prototype.Pr=function(t){return Math.ceil(this.Vr(t))},t.prototype.gr=function(t){this.sr=!0,this.cr=t,this.Er(),this.hi.Rr(),this.hi.Wr()},t.prototype.zr=function(){return this.vr},t.prototype.mr=function(t){this.Ir(t),this.Er(),this.hi.Rr(),this.hi.Wr()},t.prototype.jr=function(){return this.cr},t.prototype.On=function(){if(this.ti())return null;if(null!==this.ar)return this.ar;for(var t=this.vr,i=5*(this.hi.ct().layout.fontSize+4),n=Math.round(i/t),s=l(this.yr()),h=Math.max(s.uh(),s.uh()-n),r=Math.max(s.ah(),s.ah()-n),e=this.tr.qh(t,i),u=this.Tr()+n,a=this.Dr()-n,o=0,f=0,c=e;f<c.length;f++){var v=c[f];if(h<=v.jh&&v.jh<=r){var _=void 0;o<this.lr.length?((_=this.lr[o]).Bn=this.G(v.jh),_.Ln=this.Ur(v.S,v.Uh),_.Uh=v.Uh):(_={qr:!1,Bn:this.G(v.jh),Ln:this.Ur(v.S,v.Uh),Uh:v.Uh},this.lr.push(_)),this.vr>i/2?_.qr=!1:_.qr=this.ki.fixLeftEdge&&v.jh<=u||this.ki.fixRightEdge&&v.jh>=a,o++}}return this.lr.length=o,this.ar=this.lr,this.lr},t.prototype.Hr=function(){this.sr=!0,this.mr(this.ki.barSpacing),this.gr(this.ki.rightOffset)},t.prototype.Yr=function(t){this.sr=!0,this.Gh=t,this.Er(),this.Mr()},t.prototype.Kr=function(t,i){var n=this.Vr(t),s=this.zr(),h=s+i*(s/10);this.mr(h),this.ki.rightBarStaysOnScroll||this.gr(this.jr()+(n-this.Vr(t)))},t.prototype.Hs=function(t){this.Jn&&this.Zs(),null===this.Zn&&null===this.ur&&(this.ti()||(this.Zn=t,this.$r()))},t.prototype.Ys=function(t){if(null!==this.ur){var i=nt(this.Jh-t,0,this.Jh),n=nt(this.Jh-l(this.Zn),0,this.Jh);0!==i&&0!==n&&this.mr(this.ur.zr*i/n)}},t.prototype.Ks=function(){null!==this.Zn&&(this.Zn=null,this.Xr())},t.prototype.$s=function(t){null===this.Jn&&null===this.ur&&(this.ti()||(this.Jn=t,this.$r()))},t.prototype.Xs=function(t){if(null!==this.Jn){var i=(this.Jn-t)/this.zr();this.cr=l(this.ur).jr+i,this.sr=!0,this.Er()}},t.prototype.Zs=function(){null!==this.Jn&&(this.Jn=null,this.Xr())},t.prototype.Zr=function(){this.Jr(this.ki.rightOffset)},t.prototype.Jr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.cr,h=performance.now(),r=function(){var e=(performance.now()-h)/i,u=e>=1,a=u?t:s+(t-s)*e;n.gr(a),u||setTimeout(r,20)};r()},t.prototype.P=function(t,i){this.sr=!0,this.Qh=t,this.tr.Wh(t,i),this.Er()},t.prototype.Gr=function(){return this.hr},t.prototype.Qr=function(){return this.rr},t.prototype.te=function(){return this.er},t.prototype.Fr=function(){return this.Gh||0},t.prototype.ie=function(t){var i=t.Ph();this.Ir(this.Jh/i),this.cr=t.ah()-this.Fr(),this.Er(),this.sr=!0,this.hi.Rr(),this.hi.Wr()},t.prototype.ne=function(){var t=this.Tr(),i=this.Dr();null!==t&&null!==i&&this.ie(new Pt(t,i+this.ki.rightOffset))},t.prototype.se=function(t){var i=new Pt(t.from,t.to);this.ie(i)},t.prototype.ei=function(t){return void 0!==this.ss.timeFormatter?this.ss.timeFormatter(t.Ah||t.Bh):this.he._h(new Date(1e3*t.Bh))},t.prototype.Tr=function(){return 0===this.Qh.length?null:0},t.prototype.Dr=function(){return 0===this.Qh.length?null:this.Qh.length-1},t.prototype.re=function(t){return(this.Jh-1-t)/this.vr},t.prototype.Vr=function(t){var i=this.re(t),n=this.Fr()+this.cr-i;return Math.round(1e6*n)/1e6},t.prototype.Ir=function(t){var i=this.vr;this.vr=t,this.Lr(),i!==this.vr&&(this.sr=!0,this.ee())},t.prototype.kr=function(){if(this.sr)if(this.sr=!1,this.ti())this.ue(zt.Zh());else{var t=this.Fr(),i=this.Jh/this.vr,n=this.cr+t,s=new Pt(n-i+1,n);this.ue(new zt(s))}},t.prototype.Lr=function(){var t=this.ae();if(this.vr<t&&(this.vr=t,this.sr=!0),0!==this.Jh){var i=.5*this.Jh;this.vr>i&&(this.vr=i,this.sr=!0)}},t.prototype.ae=function(){return this.ki.fixLeftEdge&&this.ki.fixRightEdge&&0!==this.Qh.length?this.Jh/this.Qh.length:this.ki.minBarSpacing},t.prototype.Er=function(){var t=this.oe();this.cr>t&&(this.cr=t,this.sr=!0);var i=this.le();null!==i&&this.cr<i&&(this.cr=i,this.sr=!0)},t.prototype.le=function(){var t=this.Tr(),i=this.Gh;return null===t||null===i?null:t-i-1+(this.ki.fixLeftEdge?this.Jh/this.vr:Math.min(2,this.Qh.length))},t.prototype.oe=function(){return this.ki.fixRightEdge?0:this.Jh/this.vr-Math.min(2,this.Qh.length)},t.prototype.$r=function(){this.ur={zr:this.zr(),jr:this.jr()}},t.prototype.Xr=function(){this.ur=null},t.prototype.Ur=function(t,i){var n=this,s=this.ir.get(i);return void 0===s&&(s=new Ot((function(t){return n.fe(t,i)})),this.ir.set(i,s)),s._h(t)},t.prototype.fe=function(t,i){var n,s=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(i,this.ki.timeVisible,this.ki.secondsVisible);return void 0!==this.ki.tickMarkFormatter?this.ki.tickMarkFormatter(null!==(n=t.Ah)&&void 0!==n?n:t.Bh,s,this.ss.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var h=void 0===t.Ah?new Date(1e3*t.Bh):new Date(Date.UTC(t.Ah.year,t.Ah.month-1,t.Ah.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(n,s)}(t,s,this.ss.locale)},t.prototype.ue=function(t){var i=this.nr;this.nr=t,Vt(i.$h(),this.nr.$h())||this.hr.hn(),Vt(i.Xh(),this.nr.Xh())||this.rr.hn(),this.ee()},t.prototype.ee=function(){this.ar=null},t.prototype.wr=function(){this.ee(),this.ir.clear()},t.prototype._r=function(){var t=this.ss.dateFormat;this.ki.timeVisible?this.he=new Lt({wh:t,Mh:this.ki.secondsVisible?"%h:%m:%s":"%h:%m",bh:"   ",mh:this.ss.locale}):this.he=new Dt(t,this.ss.locale)},t.prototype.Mr=function(){if(this.ki.fixLeftEdge){var t=this.Tr();if(null!==t){var i=this.yr();if(null!==i){var n=i.uh()-t;if(n<0){var s=this.cr-n-1;this.gr(s)}this.Lr()}}}},t.prototype.br=function(){this.Er(),this.Lr()},t}();function Ut(t){return!v(t)&&!d(t)}function qt(t){return v(t)}!function(t){t.Solid="solid",t.VerticalGradient="gradient"}(It||(It={}));var Ht="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Yt(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=Ht),"".concat(n).concat(t,"px ").concat(i)}var Kt=function(){function t(t){this.ce={Dt:1,Tt:4,Vt:NaN,Nt:"",ve:"",et:"",Bt:0,Lt:0,Et:0,At:0,Pt:0},this.F=t}return t.prototype.ct=function(){var t=this.ce,i=this._e(),n=this.de();return t.Vt===i&&t.ve===n||(t.Vt=i,t.ve=n,t.Nt=Yt(i,n),t.At=Math.floor(i/3.5),t.Bt=t.At,t.Lt=Math.max(Math.ceil(i/2-t.Tt/2),0),t.Et=Math.ceil(i/2+t.Tt/2),t.Pt=Math.round(i/10)),t.et=this.we(),this.ce},t.prototype.we=function(){return this.F.ct().layout.textColor},t.prototype._e=function(){return this.F.ct().layout.fontSize},t.prototype.de=function(){return this.F.ct().layout.fontFamily},t}();function $t(t){return"left"===t||"right"===t}var Xt=function(){function t(t){this.Me=new Map,this.be=!1,this.me=[],this.ge=t}return t.prototype.pe=function(t,i){var n=function(t,i){return void 0===t?i:{ye:Math.max(t.ye,i.ye),Ms:t.Ms||i.Ms}}(this.Me.get(t),i);this.Me.set(t,n)},t.prototype.ke=function(){return this.ge},t.prototype.Ce=function(t){var i=this.Me.get(t);return void 0===i?{ye:this.ge}:{ye:Math.max(this.ge,i.ye),Ms:i.Ms}},t.prototype.Ne=function(){this.me=[{Se:0}]},t.prototype.xe=function(t){this.me=[{Se:1,X:t}]},t.prototype.Te=function(){this.me=[{Se:4}]},t.prototype.mr=function(t){this.me.push({Se:2,X:t})},t.prototype.gr=function(t){this.me.push({Se:3,X:t})},t.prototype.De=function(){return this.me},t.prototype._n=function(t){var i=this;this.be=this.be||t.be,this.me=this.me.concat(t.me);for(var n=0,s=t.me;n<s.length;n++){var h=s[n];this.Ae(h)}this.ge=Math.max(this.ge,t.ge),t.Me.forEach((function(t,n){i.pe(n,t)}))},t.prototype.Ae=function(t){switch(t.Se){case 0:this.Ne();break;case 1:this.xe(t.X);break;case 2:this.mr(t.X);break;case 3:this.gr(t.X);break;case 4:this.Te()}},t}(),Zt=function(){function t(t){this.Be=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Le(t):t<999995?i+this.Le(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Le(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Le(t/1e9)+"B")},t.prototype.Le=function(t){var i=Math.pow(10,this.Be);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Be).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Jt(t,i,n,s){if(0!==i.length){var h=i[s.from].g,r=i[s.from].p;t.moveTo(h,r);for(var e=s.from+1;e<s.to;++e){var u=i[e];if(1===n){var a=i[e-1].p,o=u.g;t.lineTo(o,a)}t.lineTo(u.g,u.p)}}}var Gt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.v.rt,n(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],s=this.v.Ee/2;t.moveTo(i.g-s,this.v.Fe),t.lineTo(i.g-s,i.p),t.lineTo(i.g+s,i.p),t.lineTo(i.g+s,this.v.Fe)}else t.moveTo(this.v.m[this.v.M.from].g,this.v.Fe),t.lineTo(this.v.m[this.v.M.from].g,this.v.m[this.v.M.from].p),Jt(t,this.v.m,this.v.Oe,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].g,this.v.Fe),t.lineTo(this.v.m[this.v.M.from].g,this.v.Fe));t.closePath(),t.fillStyle=this.Pe(t),t.fill()}},i}(p),Qt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.Pe=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Ve);return n.addColorStop(0,i.Re),n.addColorStop(1,i.We),n},i}(Gt),ti=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return r(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,n(t,this.v.ut),t.strokeStyle=this.ze(t),t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.g-this.v.Ee/2,i.p),t.lineTo(i.g+this.v.Ee/2,i.p)}else Jt(t,this.v.m,this.v.Oe,this.v.M);t.stroke()}},i}(p),ii=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.ze=function(){return this.v.N},i}(ti);function ni(t,i){return t.S<i}function si(t,i){return t<i.S}function hi(t,i,n){var s=i.uh(),h=i.ah(),r=Et(t,s,ni),e=Ft(t,h,si);if(!n)return{from:r,to:e};var u=r,a=e;return r>0&&r<t.length&&t[r].S>=s&&(u=r-1),e>0&&e<t.length&&t[e-1].S<=h&&(a=e+1),{from:u,to:a}}var ri=function(){function t(t,i,n){this.Ie=!0,this.je=!0,this.Ue=!0,this.qe=[],this.He=null,this.Ye=t,this.Ke=i,this.$e=n}return t.prototype.P=function(t){this.Ie=!0,"data"===t&&(this.je=!0),"options"===t&&(this.Ue=!0)},t.prototype.Xe=function(){this.je&&(this.Ze(),this.je=!1),this.Ie&&(this.Je(),this.Ie=!1),this.Ue&&(this.Ge(),this.Ue=!1)},t.prototype.Qe=function(){this.He=null},t.prototype.Je=function(){var t=this.Ye.$(),i=this.Ke.j();if(this.Qe(),!i.ti()&&!t.ti()){var n=i.yr();if(null!==n&&0!==this.Ye.Hi().tu()){var s=this.Ye.H();null!==s&&(this.He=hi(this.qe,n,this.$e),this.iu(t,i,s.X))}}},t}(),ei=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return r(i,t),i.prototype.iu=function(t,i,n){i.Or(this.qe,m(this.He)),t.As(this.qe,n,m(this.He))},i.prototype.nu=function(t,i){return{S:t,T:i,g:NaN,p:NaN}},i.prototype.Ge=function(){},i.prototype.Ze=function(){var t=this,i=this.Ye.su();this.qe=this.Ye.Hi().hu().map((function(n){var s=n.X[3];return t.ru(n.jh,s,i)}))},i}(ri),ui=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ot=new g,s.eu=new Qt,s.uu=new ii,s.ot.i([s.eu,s.uu]),s}return r(i,t),i.prototype.R=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();return this.Xe(),this.eu._({Oe:n.lineType,m:this.qe,ut:n.lineStyle,rt:n.lineWidth,Re:n.topColor,We:n.bottomColor,Fe:t,Ve:t,M:this.He,Ee:this.Ke.j().zr()}),this.uu._({Oe:n.lineType,m:this.qe,N:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,M:this.He,Ee:this.Ke.j().zr()}),this.ot},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ei);var ai=function(){function t(){this.tt=null,this.au=0,this.ou=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.Hi.length&&null!==this.tt.M){if(this.au=this.lu(i),this.au>=2)Math.max(1,Math.floor(i))%2!=this.au%2&&this.au--;this.ou=this.tt.fu?Math.min(this.au,Math.floor(i)):this.au;for(var h=null,r=this.ou<=this.au&&this.tt.zr>=Math.floor(1.5*i),e=this.tt.M.from;e<this.tt.M.to;++e){var u=this.tt.Hi[e];h!==u.et&&(t.fillStyle=u.et,h=u.et);var a=Math.floor(.5*this.ou),o=Math.round(u.g*i),l=o-a,f=this.ou,c=l+f-1,v=Math.min(u.Fs,u.Os),_=Math.max(u.Fs,u.Os),d=Math.round(v*i)-a,w=Math.round(_*i)+a,M=Math.max(w-d,this.ou);t.fillRect(l,d,f,M);var b=Math.ceil(1.5*this.au);if(r){if(this.tt.cu){var m=o-b,g=Math.max(d,Math.round(u.Es*i)-a),p=g+f-1;p>d+M-1&&(g=(p=d+M-1)-f+1),t.fillRect(m,g,l-m,p-g+1)}var y=o+b,k=Math.max(d,Math.round(u.Ps*i)-a),C=k+f-1;C>d+M-1&&(k=(C=d+M-1)-f+1),t.fillRect(c+1,k,y-c,C-k+1)}}}},t.prototype.lu=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(l(this.tt).zr,t)))},t}(),oi=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return r(i,t),i.prototype.iu=function(t,i,n){i.Or(this.qe,m(this.He)),t.Ls(this.qe,n,m(this.He))},i.prototype.vu=function(t,i,n){return{S:t,open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3],g:NaN,Es:NaN,Fs:NaN,Os:NaN,Ps:NaN}},i.prototype.Ze=function(){var t=this,i=this.Ye.su();this.qe=this.Ye.Hi().hu().map((function(n){return t.ru(n.jh,n,i)}))},i}(ri),li=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new ai,i}return r(i,t),i.prototype.R=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={Hi:this.qe,zr:this.Ke.j().zr(),cu:n.openVisible,fu:n.thinBars,M:this.He};return this.ot._(s),this.ot},i.prototype.Ge=function(){var t=this;this.qe.forEach((function(i){i.et=t.Ye.su().du(i.S)._u}))},i.prototype.ru=function(t,i,n){return e(e({},this.vu(t,i,n)),{et:n.du(t)._u})},i}(oi),fi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.Pe=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Ve),s=nt(i.Fe/i.Ve,0,1);return n.addColorStop(0,i.wu),n.addColorStop(s,i.Mu),n.addColorStop(s,i.bu),n.addColorStop(1,i.mu),n},i}(Gt),ci=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.ze=function(t){var i=this.v,n=t.createLinearGradient(0,0,0,i.Ve),s=nt(i.Fe/i.Ve,0,1);return n.addColorStop(0,i.Re),n.addColorStop(s,i.Re),n.addColorStop(s,i.We),n.addColorStop(1,i.We),n},i}(ti),vi=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.gu=new fi,s.pu=new ci,s.D=new g,s.D.i([s.gu,s.pu]),s}return r(i,t),i.prototype.R=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.H();if(null===n)return null;var s=this.Ye.ct();this.Xe();var h=this.Ye.$().K(s.baseValue.price,n.X),r=this.Ke.j().zr();return this.gu._({m:this.qe,wu:s.topFillColor1,Mu:s.topFillColor2,bu:s.bottomFillColor1,mu:s.bottomFillColor2,rt:s.lineWidth,ut:s.lineStyle,Oe:0,Fe:h,Ve:t,M:this.He,Ee:r}),this.pu._({m:this.qe,Re:s.topLineColor,We:s.bottomLineColor,rt:s.lineWidth,ut:s.lineStyle,Oe:0,Fe:h,Ve:t,M:this.He,Ee:r}),this.D},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ei),_i=function(){function t(){this.tt=null,this.au=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.Hi.length&&null!==this.tt.M){if(this.au=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),h=Math.floor(t*i),r=Math.min(s,h);return Math.max(Math.floor(i),r)}(this.tt.zr,i),this.au>=2)Math.floor(i)%2!=this.au%2&&this.au--;var h=this.tt.Hi;this.tt.yu&&this.ku(t,h,this.tt.M,i),this.tt.Cu&&this.Nu(t,h,this.tt.M,this.tt.zr,i);var r=this.Su(i);(!this.tt.Cu||this.au>2*r)&&this.xu(t,h,this.tt.M,i)}},t.prototype.ku=function(t,i,n,s){if(null!==this.tt){var h="",r=Math.min(Math.floor(s),Math.floor(this.tt.zr*s));r=Math.max(Math.floor(s),Math.min(r,this.au));for(var e=Math.floor(.5*r),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Tu!==h&&(t.fillStyle=o.Tu,h=o.Tu);var l=Math.round(Math.min(o.Es,o.Ps)*s),f=Math.round(Math.max(o.Es,o.Ps)*s),c=Math.round(o.Fs*s),v=Math.round(o.Os*s),_=Math.round(s*o.g)-e,d=_+r-1;null!==u&&(_=Math.max(u+1,_),_=Math.min(_,d));var w=d-_+1;t.fillRect(_,c,w,l-c),t.fillRect(_,f+1,w,v-f),u=d}}},t.prototype.Su=function(t){var i=Math.floor(1*t);this.au<=2*i&&(i=Math.floor(.5*(this.au-1)));var n=Math.max(Math.floor(t),i);return this.au<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.Nu=function(t,i,n,s,h){if(null!==this.tt)for(var r="",e=this.Su(h),u=null,a=n.from;a<n.to;a++){var o=i[a];o.Z!==r&&(t.fillStyle=o.Z,r=o.Z);var l=Math.round(o.g*h)-Math.floor(.5*this.au),f=l+this.au-1,c=Math.round(Math.min(o.Es,o.Ps)*h),v=Math.round(Math.max(o.Es,o.Ps)*h);if(null!==u&&(l=Math.max(u+1,l),l=Math.min(l,f)),this.tt.zr*h>2*e)V(t,l,c,f-l+1,v-c+1,e);else{var _=f-l+1;t.fillRect(l,c,_,v-c+1)}u=f}},t.prototype.xu=function(t,i,n,s){if(null!==this.tt)for(var h="",r=this.Su(s),e=n.from;e<n.to;e++){var u=i[e],a=Math.round(Math.min(u.Es,u.Ps)*s),o=Math.round(Math.max(u.Es,u.Ps)*s),l=Math.round(u.g*s)-Math.floor(.5*this.au),f=l+this.au-1;if(u.et!==h){var c=u.et;t.fillStyle=c,h=c}this.tt.Cu&&(l+=r,a+=r,f-=r,o-=r),a>o||t.fillRect(l,a,f-l+1,o-a+1)}},t}(),di=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new _i,i}return r(i,t),i.prototype.R=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={Hi:this.qe,zr:this.Ke.j().zr(),yu:n.wickVisible,Cu:n.borderVisible,M:this.He};return this.ot._(s),this.ot},i.prototype.Ge=function(){var t=this;this.qe.forEach((function(i){var n=t.Ye.su().du(i.S);i.et=n._u,i.Tu=n.Du,i.Z=n.Au}))},i.prototype.ru=function(t,i,n){var s=n.du(t);return e(e({},this.vu(t,i,n)),{et:s._u,Tu:s.Du,Z:s.Au})},i}(oi),wi=function(){function t(){this.tt=null,this.Bu=[]}return t.prototype._=function(t){this.tt=t,this.Bu=[]},t.prototype.h=function(t,i,n,s){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.Bu.length||this.Lu(i);for(var h=Math.max(1,Math.floor(i)),r=Math.round(this.tt.Eu*i)-Math.floor(h/2),e=r+h,u=this.tt.M.from;u<this.tt.M.to;u++){var a=this.tt.m[u],o=this.Bu[u-this.tt.M.from],l=Math.round(a.p*i);t.fillStyle=a.et;var f=void 0,c=void 0;l<=r?(f=l,c=e):(f=r,c=l-Math.floor(h/2)+h),t.fillRect(o.uh,f,o.ah-o.uh+1,c-f)}}},t.prototype.Lu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.zr*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.zr*t)-i;this.Bu=new Array(this.tt.M.to-this.tt.M.from);for(var s=this.tt.M.from;s<this.tt.M.to;s++){var h,r=this.tt.m[s],e=Math.round(r.g*t),u=void 0,a=void 0;if(n%2)u=e-(h=(n-1)/2),a=e+h;else u=e-(h=n/2),a=e+h-1;this.Bu[s-this.tt.M.from]={uh:u,ah:a,Fu:e,Ou:r.g*t,S:r.S}}for(s=this.tt.M.from+1;s<this.tt.M.to;s++){var o=this.Bu[s-this.tt.M.from],l=this.Bu[s-this.tt.M.from-1];o.S===l.S+1&&(o.uh-l.ah!==i+1&&(l.Fu>l.Ou?l.ah=o.uh-i-1:o.uh=l.ah+i+1))}var f=Math.ceil(this.tt.zr*t);for(s=this.tt.M.from;s<this.tt.M.to;s++){(o=this.Bu[s-this.tt.M.from]).ah<o.uh&&(o.ah=o.uh);var c=o.ah-o.uh+1;f=Math.min(c,f)}if(i>0&&f<4)for(s=this.tt.M.from;s<this.tt.M.to;s++){(c=(o=this.Bu[s-this.tt.M.from]).ah-o.uh+1)>f&&(o.Fu>o.Ou?o.ah-=1:o.uh+=1)}}else this.Bu=[]},t}();function Mi(t){return{m:[],zr:t,Eu:NaN,M:null}}function bi(t,i,n){return{S:t,T:i,g:NaN,p:NaN,et:n}}var mi=function(t){function i(i,n){var s=t.call(this,i,n,!1)||this;return s.D=new g,s.Pu=Mi(0),s.ot=new wi,s}return r(i,t),i.prototype.R=function(t,i){return this.Ye.q()?(this.Xe(),this.D):null},i.prototype.Ze=function(){var t=this.Ke.j().zr();this.Pu=Mi(t);for(var i=0,n=0,s=this.Ye.ct().color,h=0,r=this.Ye.Hi().hu();h<r.length;h++){var e=r[h],u=e.X[3],a=void 0!==e.et?e.et:s,o=bi(e.jh,u,a);++i<this.Pu.m.length?this.Pu.m[i]=o:this.Pu.m.push(o),this.qe[n++]={S:e.jh,g:0}}this.ot._(this.Pu),this.D.i([this.ot])},i.prototype.Ge=function(){},i.prototype.Qe=function(){t.prototype.Qe.call(this),this.Pu.M=null},i.prototype.iu=function(t,i,n){if(null!==this.He){var s=i.zr(),h=l(i.yr()),r=t.K(this.Ye.ct().base,n);i.Or(this.Pu.m),t.As(this.Pu.m,n),this.Pu.Eu=r,this.Pu.M=hi(this.Pu.m,h,!1),this.Pu.zr=s,this.ot._(this.Pu)}},i}(ri),gi=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.uu=new ii,s}return r(i,t),i.prototype.R=function(t,i){if(!this.Ye.q())return null;var n=this.Ye.ct();this.Xe();var s={m:this.qe,N:n.color,ut:n.lineStyle,Oe:n.lineType,rt:n.lineWidth,M:this.He,Ee:this.Ke.j().zr()};return this.uu._(s),this.uu},i.prototype.ru=function(t,i){return this.nu(t,i)},i}(ei),pi=/[2-9]/g,yi=function(){function t(t){void 0===t&&(t=50),this.Sh=new Map,this.Vu=0,this.Ru=Array.from(new Array(t))}return t.prototype.Wu=function(){this.Sh.clear(),this.Ru.fill(void 0)},t.prototype.Ot=function(t,i,n){var s=n||pi,h=String(i).replace(s,"0"),r=this.Sh.get(h);if(void 0===r){if(0===(r=t.measureText(h).width)&&0!==i.length)return 0;var e=this.Ru[this.Vu];void 0!==e&&this.Sh.delete(e),this.Ru[this.Vu]=h,this.Vu=(this.Vu+1)%this.Ru.length,this.Sh.set(h,r)}return r},t}(),ki=function(){function t(t){this.zu=null,this.ce=null,this.Iu="right",this.Jh=0,this.ju=t}return t.prototype.Uu=function(t,i,n,s){this.zu=t,this.ce=i,this.Jh=n,this.Iu=s},t.prototype.h=function(t,i){null!==this.ce&&null!==this.zu&&this.zu.h(t,this.ce,this.ju,this.Jh,this.Iu,i)},t}(),Ci=function(){function t(t,i,n){this.qu=t,this.ju=new yi(50),this.Hu=i,this.F=n,this._e=-1,this.ot=new ki(this.ju)}return t.prototype.R=function(t,i){var n=this.F.Yu(this.Hu);if(null===n)return null;var s=n.Ku(this.Hu)?n.$u():this.Hu.$();if(null===s)return null;var h=n.Xu(s);if("overlay"===h)return null;var r=this.F.Zu();return r.Vt!==this._e&&(this._e=r.Vt,this.ju.Wu()),this.ot.Uu(this.qu.Zt(),r,i,h),this.ot},t}(),Ni=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,h,r){if(null!==this.tt&&!1!==this.tt.q){var e=Math.round(this.tt.p*i);if(!(e<0||e>Math.ceil(this.tt.Mt*i))){var u=Math.ceil(this.tt.wt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),n(t,this.tt.ut),s(t,e,0,u)}}},t}(),Si=function(){function t(t){this.Ju={wt:0,Mt:0,p:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,q:!1},this.Gu=new Ni,this.L=!0,this.Ye=t,this.Ke=t.vt(),this.Gu._(this.Ju)}return t.prototype.P=function(){this.L=!0},t.prototype.R=function(t,i){return this.Ye.q()?(this.L&&(this.Qu(t,i),this.L=!1),this.Gu):null},t}(),xi=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype.Qu=function(t,i){this.Ju.q=!1;var n=this.Ye.$(),s=n.cs().cs;if(2===s||3===s){var h=this.Ye.ct();if(h.baseLineVisible&&this.Ye.q()){var r=this.Ye.H();null!==r&&(this.Ju.q=!0,this.Ju.p=n.K(r.X,r.X),this.Ju.wt=i,this.Ju.Mt=t,this.Ju.et=h.baseLineColor,this.Ju.rt=h.baseLineWidth,this.Ju.ut=h.baseLineStyle)}}},i}(Si),Ti=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.ta=function(){return this.tt},t.prototype.h=function(t,i,n,s){var h=this.tt;if(null!==h){t.save();var r=Math.max(1,Math.floor(i)),e=r%2/2,u=Math.round(h.Ou.x*i)+e,a=h.Ou.y*i;t.fillStyle=h.ia,t.beginPath();var o=Math.max(2,1.5*h.na)*i;t.arc(u,a,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=h.sa,t.beginPath(),t.arc(u,a,h.C*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=h.ha,t.beginPath(),t.arc(u,a,h.C*i+r/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),Di=[{ra:0,ea:.25,ua:4,aa:10,oa:.25,la:0,fa:.4,ca:.8},{ra:.25,ea:.525,ua:10,aa:14,oa:0,la:0,fa:.8,ca:0},{ra:.525,ea:1,ua:14,aa:14,oa:0,la:0,fa:0,ca:0}];function Ai(t,i,n,s){return function(t,i){if("transparent"===t)return t;var n=O(t),s=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*s,")")}(t,n+(s-n)*i)}function Bi(t,i){for(var n,s=t%2600/2600,h=0,r=Di;h<r.length;h++){var e=r[h];if(s>=e.ra&&s<=e.ea){n=e;break}}a(void 0!==n,"Last price animation internal logic error");var u,o,l,f=(s-n.ra)/(n.ea-n.ra);return{sa:Ai(i,f,n.oa,n.la),ha:Ai(i,f,n.fa,n.ca),C:(u=f,o=n.ua,l=n.aa,o+(l-o)*u)}}var Li=function(){function t(t){this.ot=new Ti,this.L=!0,this.va=!0,this._a=performance.now(),this.da=this._a-1,this.wa=t}return t.prototype.Ma=function(){this.da=this._a-1,this.P()},t.prototype.ba=function(){if(this.P(),2===this.wa.ct().lastPriceAnimation){var t=performance.now(),i=this.da-t;if(i>0)return void(i<650&&(this.da+=2600));this._a=t,this.da=t+2600}},t.prototype.P=function(){this.L=!0},t.prototype.ma=function(){this.va=!0},t.prototype.q=function(){return 0!==this.wa.ct().lastPriceAnimation},t.prototype.ga=function(){switch(this.wa.ct().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.da}},t.prototype.R=function(t,i){return this.L?(this.W(t,i),this.L=!1,this.va=!1):this.va&&(this.pa(),this.va=!1),this.ot},t.prototype.W=function(t,i){this.ot._(null);var n=this.wa.vt().j(),s=n.yr(),h=this.wa.H();if(null!==s&&null!==h){var r=this.wa.ya(!0);if(!r.ka&&s.Vh(r.jh)){var e={x:n.G(r.jh),y:this.wa.$().K(r.T,h.X)},u=r.et,a=this.wa.ct().lineWidth,o=Bi(this.Ca(),u);this.ot._({ia:u,na:a,sa:o.sa,ha:o.ha,C:o.C,Ou:e})}}},t.prototype.pa=function(){var t=this.ot.ta();if(null!==t){var i=Bi(this.Ca(),t.ia);t.sa=i.sa,t.ha=i.ha,t.C=i.C}},t.prototype.Ca=function(){return this.ga()?performance.now()-this._a:2599},t}();function Ei(t,i){return et(Math.min(Math.max(t,12),30)*i)}function Fi(t,i){switch(t){case"arrowDown":case"arrowUp":case"caretDown":case"caretUp":return Ei(i,1);case"circle":return Ei(i,.8);case"square":return Ei(i,.7)}}function Oi(t){return rt(Ei(t,1))}function Pi(t){return Math.max(Ei(t,.1),3)}function Vi(t,i,n,s,h){var r=Fi("square",n),e=(r-1)/2,u=t-e,a=i-e;return s>=u&&s<=u+r&&h>=a&&h<=a+r}function Ri(t,i,n,s,h){var r=(Fi("arrowUp",h)-1)/2,e=(et(h/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,s),i.lineTo(n,s-r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s+r),i.lineTo(n-e,s+r),i.lineTo(n-e,s)):(i.moveTo(n-r,s),i.lineTo(n,s+r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s-r),i.lineTo(n-e,s-r),i.lineTo(n-e,s)),i.fill()}function Wi(t,i,n,s,h,r){return Vi(i,n,s,h,r)}function zi(t,i,n,s,h){var r=(Fi("caretUp",h)-1)/2,e=r/2;i.beginPath(),t?(i.moveTo(n-r,s+e),i.lineTo(n,s-e),i.lineTo(n+r,s+e)):(i.moveTo(n-r,s-e),i.lineTo(n,s+e),i.lineTo(n+r,s-e)),i.fill()}function Ii(t,i,n,s,h,r){return Vi(i,n,s,h,r)}var ji=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.ju=new yi,i._e=-1,i.de="",i.Na="",i}return r(i,t),i.prototype._=function(t){this.tt=t},i.prototype.Uu=function(t,i){this._e===t&&this.de===i||(this._e=t,this.de=i,this.Na=Yt(t,i),this.ju.Wu())},i.prototype.Sa=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var s=this.tt.m[n];if(qi(s,t,i))return{xa:s.Ta,Da:s.Da}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.Na;for(var s=this.tt.M.from;s<this.tt.M.to;s++){var h=this.tt.m[s];void 0!==h.Ft&&(h.Ft.wt=this.ju.Ot(t,h.Ft.Aa),h.Ft.Mt=this._e),Ui(h,t)}}},i}(p);function Ui(t,i){i.fillStyle=t.et,void 0!==t.Ft&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.Ft.Aa,t.g-t.Ft.wt/2,t.Ft.p),function(t,i){if(0===t.tu)return;switch(t.Ba){case"arrowDown":return void Ri(!1,i,t.g,t.p,t.tu);case"arrowUp":return void Ri(!0,i,t.g,t.p,t.tu);case"caretDown":return void zi(!1,i,t.g,t.p,t.tu);case"caretUp":return void zi(!0,i,t.g,t.p,t.tu);case"circle":return void function(t,i,n,s){var h=(Fi("circle",s)-1)/2;t.beginPath(),t.arc(i,n,h,0,2*Math.PI,!1),t.fill()}(i,t.g,t.p,t.tu);case"square":return void function(t,i,n,s){var h=Fi("square",s),r=(h-1)/2,e=i-r,u=n-r;t.fillRect(e,u,h,h)}(i,t.g,t.p,t.tu)}t.Ba}(t,i)}function qi(t,i,n){return!(void 0===t.Ft||!function(t,i,n,s,h,r){var e=s/2;return h>=t&&h<=t+n&&r>=i-e&&r<=i+e}(t.g,t.Ft.p,t.Ft.wt,t.Ft.Mt,i,n))||function(t,i,n){if(0===t.tu)return!1;switch(t.Ba){case"arrowDown":case"arrowUp":return Wi(0,t.g,t.p,t.tu,i,n);case"caretDown":case"caretUp":return Ii(0,t.g,t.p,t.tu,i,n);case"circle":return function(t,i,n,s,h){var r=2+Fi("circle",n)/2,e=t-s,u=i-h;return Math.sqrt(e*e+u*u)<=r}(t.g,t.p,t.tu,i,n);case"square":return Vi(t.g,t.p,t.tu,i,n)}}(t,i,n)}function Hi(t,i,n,s,h,r,e,u,a){var o=v(n)?n:n.close,l=v(n)?n:n.high,f=v(n)?n:n.low,c=v(i.size)?Math.max(i.size,0):1,_=Oi(u.zr())*c,d=_/2;switch(t.tu=_,i.position){case"inBar":return t.p=e.K(o,a),void(void 0!==t.Ft&&(t.Ft.p=t.p+d+r+.6*h));case"aboveBar":return t.p=e.K(l,a)-d-s.La,void 0!==t.Ft&&(t.Ft.p=t.p-d-.6*h,s.La+=1.2*h),void(s.La+=_+r);case"belowBar":return t.p=e.K(f,a)+d+s.Ea,void 0!==t.Ft&&(t.Ft.p=t.p+d+r+.6*h,s.Ea+=1.2*h),void(s.Ea+=_+r);case"onPrice":return t.p=e.K(i.price,a),void(void 0!==t.Ft&&(t.Ft.p=t.p+r+.6*h))}i.position}var Yi=function(){function t(t,i){this.L=!0,this.Fa=!0,this.Oa=!0,this.Pa=null,this.ot=new ji,this.wa=t,this.hi=i,this.tt={m:[],M:null}}return t.prototype.P=function(t){this.L=!0,this.Oa=!0,"data"===t&&(this.Fa=!0)},t.prototype.R=function(t,i,n){if(!this.wa.q())return null;this.L&&this.Xe();var s=this.hi.ct().layout;return this.ot.Uu(s.fontSize,s.fontFamily),this.ot._(this.tt),this.ot},t.prototype.Va=function(){if(this.Oa){if(this.wa.Ra().length>0){var t=this.hi.j().zr(),i=Pi(t),n=1.5*Oi(t)+2*i;this.Pa={above:n,below:n}}else this.Pa=null;this.Oa=!1}return this.Pa},t.prototype.Xe=function(){var t=this.wa.$(),i=this.hi.j(),n=this.wa.Ra();this.Fa&&(this.tt.m=n.map((function(t){return{S:t.time,g:0,p:0,tu:0,Ba:t.shape,et:t.color,Ta:t.Ta,Da:t.id,Ft:void 0}})),this.Fa=!1);var s=this.hi.ct().layout;this.tt.M=null;var h=i.yr();if(null!==h){var r=this.wa.H();if(null!==r&&0!==this.tt.m.length){var e=NaN,u=Pi(i.zr()),a={La:u,Ea:u};this.tt.M=hi(this.tt.m,h,!0);for(var o=this.tt.M.from;o<this.tt.M.to;o++){var l=n[o];l.time!==e&&(a.La=u,a.Ea=u,e=l.time);var f=this.tt.m[o];f.g=i.G(l.time),void 0!==l.text&&l.text.length>0&&(f.Ft={Aa:l.text,p:0,wt:0,Mt:0});var c=this.wa.Wa(l.time);null!==c&&Hi(f,l,c,a,s.fontSize,u,t,i,r.X)}this.L=!1}}},t}(),Ki=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype.Qu=function(t,i){var n=this.Ju;n.q=!1;var s=this.Ye.ct();if(s.priceLineVisible&&this.Ye.q()){var h=this.Ye.ya(0===s.priceLineSource);h.ka||(n.q=!0,n.p=h.Rt,n.et=this.Ye.za(h.et),n.wt=i,n.Mt=t,n.rt=s.priceLineWidth,n.ut=s.priceLineStyle)}},i}(Si),$i=function(t){function i(i){var n=t.call(this)||this;return n.lt=i,n}return r(i,t),i.prototype.Jt=function(t,i,n){t.q=!1,i.q=!1;var s=this.lt;if(s.q()){var h=s.ct(),r=h.lastValueVisible,e=""!==s.Ia(),u=0===h.seriesLastValueMode,a=s.ya(!1);if(!a.ka){r&&(t.Ft=this.ja(a,r,u),t.q=0!==t.Ft.length),(e||u)&&(i.Ft=this.Ua(a,r,e,u),i.q=i.Ft.length>0);var o=s.za(a.et),l=P(o);n.yt=l.yt,n.et=l.kt,n.Rt=a.Rt,i.Z=s.vt().J(a.Rt/s.$().Mt()),t.Z=o}}},i.prototype.Ua=function(t,i,n,s){var h="",r=this.lt.Ia();return n&&0!==r.length&&(h+="".concat(r," ")),i&&s&&(h+=this.lt.$().ds()?t.qa:t.Ha),h.trim()},i.prototype.ja=function(t,i,n){return i?n?this.lt.$().ds()?t.Ha:t.qa:t.Ft:""},i}(U),Xi=function(){function t(t,i){this.Rn=t,this.Ya=i||null}return t.prototype.xs=function(){return this.Rn},t.prototype.oh=function(){return this.Ya},t.prototype.Mn=function(){return null===this.Rn?null:{priceRange:this.Rn.Mn(),margins:this.Ya||void 0}},t.bn=function(i){return null===i?null:new t(it.bn(i.priceRange),i.margins)},t}(),Zi=function(t){function i(i,n){var s=t.call(this,i)||this;return s.Ka=n,s}return r(i,t),i.prototype.Qu=function(t,i){var n=this.Ju;if(n.q=!1,this.Ye.q()){var s=this.Ka.$a();if(null!==s){var h=this.Ka.ct();n.q=!0,n.p=s,n.et=h.color,n.wt=i,n.Mt=t,n.rt=h.lineWidth,n.ut=h.lineStyle}}},i}(Si),Ji=function(t){function i(i,n){var s=t.call(this)||this;return s.wa=i,s.Ka=n,s}return r(i,t),i.prototype.Jt=function(t,i,n){t.q=!1,i.q=!1;var s=this.Ka.ct(),h=s.axisLabelVisible,r=""!==s.title,e=this.wa;if(h&&e.q()){var u=this.Ka.$a();if(null!==u){r&&(i.Ft=s.title,i.q=!0),i.Z=e.vt().J(u/e.$().Mt()),t.Ft=e.$().Qs(s.price),t.q=!0;var a=P(s.color);n.yt=a.yt,n.et=a.kt,n.Rt=u}}},i}(U),Gi=function(){function t(t,i){this.wa=t,this.ki=i,this.Xa=new Zi(t,this),this.qu=new Ji(t,this),this.Za=new Ci(this.qu,t,t.vt())}return t.prototype.os=function(t){c(this.ki,t),this.P(),this.wa.vt().Wr()},t.prototype.ct=function(){return this.ki},t.prototype.Ri=function(){return[this.Xa,this.Za]},t.prototype.Ja=function(){return this.qu},t.prototype.P=function(){this.Xa.P(),this.qu.P()},t.prototype.$a=function(){var t=this.wa,i=t.$();if(t.vt().j().ti()||i.ti())return null;var n=t.H();return null===n?null:i.K(this.ki.price,n.X)},t}(),Qi=function(t){function i(i){var n=t.call(this)||this;return n.hi=i,n}return r(i,t),i.prototype.vt=function(){return this.hi},i}($),tn={_u:"",Au:"",Du:""},nn=function(){function t(t){this.wa=t}return t.prototype.du=function(t,i){var n=this.wa.Ga(),s=this.wa.ct();switch(n){case"Line":return this.Qa(s);case"Area":return this.io(s);case"Baseline":return this.no(s,t,i);case"Bar":return this.so(s,t,i);case"Candlestick":return this.ho(s,t,i);case"Histogram":return this.ro(s,t,i)}throw new Error("Unknown chart style")},t.prototype.so=function(t,i,n){var s=e({},tn),h=t.upColor,r=t.downColor,u=h,a=r,o=l(this.eo(i,n)),c=f(o.X[0])<=f(o.X[3]);return s._u=c?h:r,s.Au=c?u:a,s},t.prototype.ho=function(t,i,n){var s=e({},tn),h=t.upColor,r=t.downColor,u=t.borderUpColor,a=t.borderDownColor,o=t.wickUpColor,c=t.wickDownColor,v=l(this.eo(i,n)),_=f(v.X[0])<=f(v.X[3]);return s._u=_?h:r,s.Au=_?u:a,s.Du=_?o:c,s},t.prototype.io=function(t){return e(e({},tn),{_u:t.lineColor})},t.prototype.no=function(t,i,n){var s=l(this.eo(i,n)).X[3]>=t.baseValue.price;return e(e({},tn),{_u:s?t.topLineColor:t.bottomLineColor})},t.prototype.Qa=function(t){return e(e({},tn),{_u:t.color})},t.prototype.ro=function(t,i,n){var s=e({},tn),h=l(this.eo(i,n));return s._u=void 0!==h.et?h.et:t.color,s},t.prototype.eo=function(t,i){return void 0!==i?i.X:this.wa.Hi().uo(t)},t}(),sn=30,hn=function(){function t(){this.ao=[],this.oo=new Map,this.lo=new Map}return t.prototype.fo=function(){return this.tu()>0?this.ao[this.ao.length-1]:null},t.prototype.co=function(){return this.tu()>0?this.vo(0):null},t.prototype.qi=function(){return this.tu()>0?this.vo(this.ao.length-1):null},t.prototype.tu=function(){return this.ao.length},t.prototype.ti=function(){return 0===this.tu()},t.prototype.Vh=function(t){return null!==this._o(t,0)},t.prototype.uo=function(t){return this.do(t)},t.prototype.do=function(t,i){void 0===i&&(i=0);var n=this._o(t,i);return null===n?null:e(e({},this.wo(n)),{jh:this.vo(n)})},t.prototype.hu=function(){return this.ao},t.prototype.Mo=function(t,i,n){if(this.ti())return null;for(var s=null,h=0,r=n;h<r.length;h++){var e=r[h];s=rn(s,this.bo(t,i,e))}return s},t.prototype._=function(t){this.lo.clear(),this.oo.clear(),this.ao=t},t.prototype.vo=function(t){return this.ao[t].jh},t.prototype.wo=function(t){return this.ao[t]},t.prototype._o=function(t,i){var n=this.mo(t);if(null===n&&0!==i)switch(i){case-1:return this.po(t);case 1:return this.yo(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.po=function(t){var i=this.ko(t);return i>0&&(i-=1),i!==this.ao.length&&this.vo(i)<t?i:null},t.prototype.yo=function(t){var i=this.Co(t);return i!==this.ao.length&&t<this.vo(i)?i:null},t.prototype.mo=function(t){var i=this.ko(t);return i===this.ao.length||t<this.ao[i].jh?null:i},t.prototype.ko=function(t){return Et(this.ao,t,(function(t,i){return t.jh<i}))},t.prototype.Co=function(t){return Ft(this.ao,t,(function(t,i){return i.jh>t}))},t.prototype.No=function(t,i,n){for(var s=null,h=t;h<i;h++){var r=this.ao[h].X[n];Number.isNaN(r)||(null===s?s={So:r,xo:r}:(r<s.So&&(s.So=r),r>s.xo&&(s.xo=r)))}return s},t.prototype.bo=function(t,i,n){if(this.ti())return null;var s=null,h=l(this.co()),r=l(this.qi()),e=Math.max(t,h),u=Math.min(i,r),a=Math.ceil(e/sn)*sn,o=Math.max(a,Math.floor(u/sn)*sn),f=this.ko(e),c=this.Co(Math.min(u,a,i));s=rn(s,this.No(f,c,n));var v=this.oo.get(n);void 0===v&&(v=new Map,this.oo.set(n,v));for(var _=Math.max(a+1,e);_<o;_+=sn){var d=Math.floor(_/sn),w=v.get(d);if(void 0===w){var M=this.ko(d*sn),b=this.Co((d+1)*sn-1);w=this.No(M,b,n),v.set(d,w)}s=rn(s,w)}f=this.ko(o),c=this.Co(u);return s=rn(s,this.No(f,c,n))},t}();function rn(t,i){return null===t?i:null===i?t:{So:Math.min(t.So,i.So),xo:Math.max(t.xo,i.xo)}}var en=function(t){function i(i,n,s){var h=t.call(this,i)||this;h.tt=new hn,h.Xa=new Ki(h),h.To=[],h.Do=new xi(h),h.Ao=null,h.Bo=null,h.Lo=[],h.Eo=[],h.Fo=null,h.ki=n,h.Oo=s;var r=new $i(h);return h.Mi=[r],h.Za=new Ci(r,h,i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.Ao=new Li(h)),h.Po(),h.Vo(),h}return r(i,t),i.prototype.en=function(){null!==this.Fo&&clearTimeout(this.Fo)},i.prototype.za=function(t){return this.ki.priceLineColor||t},i.prototype.ya=function(t){var i={ka:!0},n=this.$();if(this.vt().j().ti()||n.ti()||this.tt.ti())return i;var s,h,r=this.vt().j().yr(),e=this.H();if(null===r||null===e)return i;if(t){var u=this.tt.fo();if(null===u)return i;s=u,h=u.jh}else{var a=this.tt.do(r.ah(),-1);if(null===a)return i;if(null===(s=this.tt.uo(a.jh)))return i;h=a.jh}var o=s.X[3],l=this.su().du(h,{X:s}),f=n.K(o,e.X);return{ka:!1,T:o,Ft:n.ii(o,e.X),qa:n.Qs(o),Ha:n.ih(o,e.X),et:l._u,Rt:f,jh:h}},i.prototype.su=function(){return null!==this.Bo||(this.Bo=new nn(this)),this.Bo},i.prototype.ct=function(){return this.ki},i.prototype.os=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.ki.priceScaleId&&this.vt().Ro(this,i),c(this.ki,t),null!==this.ui&&void 0!==t.scaleMargins&&this.ui.os({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.Po(),this.vt().Wo(this),this.vt().zo(),this.Di.P("options")},i.prototype._=function(t,i){this.tt._(t),this.Io(),this.Di.P("data"),this.Ci.P("data"),null!==this.Ao&&(i&&i.jo?this.Ao.ba():0===t.length&&this.Ao.Ma());var n=this.vt().Yu(this);this.vt().Uo(n),this.vt().Wo(this),this.vt().zo(),this.vt().Wr()},i.prototype.qo=function(t){this.Lo=t.map((function(t){return e({},t)})),this.Io();var i=this.vt().Yu(this);this.Ci.P("data"),this.vt().Uo(i),this.vt().Wo(this),this.vt().zo(),this.vt().Wr()},i.prototype.Ra=function(){return this.Eo},i.prototype.Ho=function(t){var i=new Gi(this,t);return this.To.push(i),this.vt().Wo(this),i},i.prototype.Yo=function(t){var i=this.To.indexOf(t);-1!==i&&this.To.splice(i,1),this.vt().Wo(this)},i.prototype.Ga=function(){return this.Oo},i.prototype.H=function(){var t=this.Ko();return null===t?null:{X:t.X[3],Us:t.S}},i.prototype.Ko=function(){var t=this.vt().j().yr();if(null===t)return null;var i=t.uh();return this.tt.do(i,1)},i.prototype.Hi=function(){return this.tt},i.prototype.Wa=function(t){var i=this.tt.uo(t);return null===i?null:"Bar"===this.Oo||"Candlestick"===this.Oo?{open:i.X[0],high:i.X[1],low:i.X[2],close:i.X[3]}:i.X[3]},i.prototype.$o=function(t){var i=this,n=this.Ao;return null!==n&&n.q()?(null===this.Fo&&n.ga()&&(this.Fo=setTimeout((function(){i.Fo=null,i.vt().Xo()}),0)),n.ma(),[n]):[]},i.prototype.Ri=function(){var t=[];this.Zo()||t.push(this.Do);for(var i=0,n=this.To;i<n.length;i++){var s=n[i];t.push.apply(t,s.Ri())}return t.push(this.Di,this.Xa,this.Za,this.Ci),t},i.prototype.Wi=function(t,i){if(i!==this.ui&&!this.Zo())return[];for(var n=u([],this.Mi,!0),s=0,h=this.To;s<h.length;s++){var r=h[s];n.push(r.Ja())}return n},i.prototype.eh=function(t,i){var n=this;if(void 0!==this.ki.autoscaleInfoProvider){var s=this.ki.autoscaleInfoProvider((function(){var s=n.Jo(t,i);return null===s?null:s.Mn()}));return Xi.bn(s)}return this.Jo(t,i)},i.prototype.hh=function(){return this.ki.priceFormat.minMove},i.prototype.Js=function(){return this.Gn},i.prototype.Ii=function(){var t;this.Di.P(),this.Ci.P();for(var i=0,n=this.Mi;i<n.length;i++){n[i].P()}for(var s=0,h=this.To;s<h.length;s++){h[s].P()}this.Xa.P(),this.Do.P(),null===(t=this.Ao)||void 0===t||t.P()},i.prototype.$=function(){return l(t.prototype.$.call(this))},i.prototype.U=function(t){if(!(("Line"===this.Oo||"Area"===this.Oo||"Baseline"===this.Oo)&&this.ki.crosshairMarkerVisible))return null;var i=this.tt.uo(t);return null===i?null:{T:i.X[3],C:this.Go(),Z:this.Qo(),Y:this.tl(t)}},i.prototype.Ia=function(){return this.ki.title},i.prototype.q=function(){return this.ki.visible},i.prototype.Zo=function(){return!$t(this.$().us())},i.prototype.Jo=function(t,i){if(!_(t)||!_(i)||this.tt.ti())return null;var n="Line"===this.Oo||"Area"===this.Oo||"Baseline"===this.Oo||"Histogram"===this.Oo?[3]:[2,1],s=this.tt.Mo(t,i,n),h=null!==s?new it(s.So,s.xo):null;if("Histogram"===this.Ga()){var r=this.ki.base,e=new it(r,r);h=null!==h?h._n(e):e}return new Xi(h,this.Ci.Va())},i.prototype.Go=function(){switch(this.Oo){case"Line":case"Area":case"Baseline":return this.ki.crosshairMarkerRadius}return 0},i.prototype.Qo=function(){switch(this.Oo){case"Line":case"Area":case"Baseline":var t=this.ki.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.tl=function(t){switch(this.Oo){case"Line":case"Area":case"Baseline":var i=this.ki.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.su().du(t)._u},i.prototype.Po=function(){switch(this.ki.priceFormat.type){case"custom":this.Gn={format:this.ki.priceFormat.formatter};break;case"volume":this.Gn=new Zt(this.ki.priceFormat.precision);break;case"percent":this.Gn=new Q(this.ki.priceFormat.precision);break;default:var t=Math.pow(10,this.ki.priceFormat.precision);this.Gn=new G(t,this.ki.priceFormat.minMove*t)}null!==this.ui&&this.ui.ls()},i.prototype.Io=function(){var t=this,i=this.vt().j();if(i.ti()||0===this.tt.tu())this.Eo=[];else{var n=l(this.tt.co());this.Eo=this.Lo.map((function(s,h){var r=l(i.pr(s.time,!0)),e=r<n?1:-1;return{time:l(t.tt.do(r,e)).jh,price:s.price,position:s.position,shape:s.shape,color:s.color,id:s.id,Ta:h,text:s.text,size:s.size}}))}},i.prototype.Vo=function(){switch(this.Ci=new Yi(this,this.vt()),this.Oo){case"Bar":this.Di=new li(this,this.vt());break;case"Candlestick":this.Di=new di(this,this.vt());break;case"Line":this.Di=new gi(this,this.vt());break;case"Area":this.Di=new ui(this,this.vt());break;case"Baseline":this.Di=new vi(this,this.vt());break;case"Histogram":this.Di=new mi(this,this.vt());break;default:throw Error("Unknown chart style assigned: "+this.Oo)}},i}(Qi),un=function(){function t(t){this.ki=t}return t.prototype.il=function(t,i,n){var s=t;if(0===this.ki.mode)return s;var h=n.Si(),r=h.H();if(null===r)return s;var e=h.K(t,r),u=n.Rs().filter((function(t){return t instanceof en})).reduce((function(t,s){if(n.Ku(s)||!s.q())return t;var h=s.$(),r=s.Hi();if(h.ti()||!r.Vh(i))return t;var e=r.uo(i);if(null===e)return t;var u=f(s.H());return t.concat([h.K(e.X[3],u.X)])}),[]);if(0===u.length)return s;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var a=u[0];return s=h.xi(a,r)},t}(),an=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,s,h){var r=this;if(null!==this.tt){var e=Math.max(1,Math.floor(i));t.lineWidth=e;var u=Math.ceil(this.tt.ht*i),a=Math.ceil(this.tt.st*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var s=l(r.tt);if(s.nl){t.strokeStyle=s.sl,n(t,s.hl),t.beginPath();for(var h=0,o=s.rl;h<o.length;h++){var f=o[h],c=Math.round(f.Bn*i);t.moveTo(c,-e),t.lineTo(c,u+e)}t.stroke()}if(s.el){t.strokeStyle=s.ul,n(t,s.al),t.beginPath();for(var v=0,_=s.ol;v<_.length;v++){var d=_[v],w=Math.round(d.Bn*i);t.moveTo(-e,w),t.lineTo(a+e,w)}t.stroke()}}))}},t}(),on=function(){function t(t){this.ot=new an,this.L=!0,this.vi=t}return t.prototype.P=function(){this.L=!0},t.prototype.R=function(t,i){if(this.L){var n=this.vi.vt().ct().grid,s={ht:t,st:i,el:n.horzLines.visible,nl:n.vertLines.visible,ul:n.horzLines.color,sl:n.vertLines.color,al:n.horzLines.style,hl:n.vertLines.style,ol:this.vi.Si().On(),rl:this.vi.vt().j().On()||[]};this.ot._(s),this.L=!1}return this.ot},t}(),ln=function(){function t(t){this.Di=new on(t)}return t.prototype.ll=function(){return this.Di},t}(),fn=function(){function t(t,i){this.Kn=[],this.fl=new Map,this.Pn=0,this.Jh=0,this.cl=1e3,this.$n=null,this.vl=new tt,this._l=t,this.hi=i,this.dl=new ln(this);var n=i.ct();this.wl=this.Ml("left",n.leftPriceScale),this.bl=this.Ml("right",n.rightPriceScale),this.wl.ys().Ji(this.ml.bind(this,this.wl),this),this.bl.ys().Ji(this.ml.bind(this,this.wl),this),this.gl(n)}return t.prototype.gl=function(t){if(t.leftPriceScale&&this.wl.os(t.leftPriceScale),t.rightPriceScale&&this.bl.os(t.rightPriceScale),t.localization&&(this.wl.ls(),this.bl.ls()),t.overlayPriceScales)for(var i=0,n=Array.from(this.fl.values());i<n.length;i++){var s=l(n[i][0].$());s.os(t.overlayPriceScales),t.localization&&s.ls()}},t.prototype.pl=function(t){switch(t){case"left":return this.wl;case"right":return this.bl}return this.fl.has(t)?o(this.fl.get(t))[0].$():null},t.prototype.en=function(){this.vt().yl().sn(this),this.wl.ys().sn(this),this.bl.ys().sn(this),this.Kn.forEach((function(t){t.en&&t.en()})),this.vl.hn()},t.prototype.kl=function(){return this.cl},t.prototype.Cl=function(t){this.cl=t},t.prototype.vt=function(){return this.hi},t.prototype.wt=function(){return this.Jh},t.prototype.Mt=function(){return this.Pn},t.prototype.Br=function(t){this.Jh=t,this.Nl()},t.prototype.ks=function(t){var i=this;this.Pn=t,this.wl.ks(t),this.bl.ks(t),this.Kn.forEach((function(n){if(i.Ku(n)){var s=n.$();null!==s&&s.ks(t)}})),this.Nl()},t.prototype.Rs=function(){return this.Kn},t.prototype.Ku=function(t){var i=t.$();return null===i||this.wl!==i&&this.bl!==i},t.prototype.zs=function(t,i,n){var s=void 0!==n?n:this.xl().Sl+1;this.Tl(t,i,s)},t.prototype.js=function(t){var i=this.Kn.indexOf(t);a(-1!==i,"removeDataSource: invalid data source"),this.Kn.splice(i,1);var n=l(t.$()).us();if(this.fl.has(n)){var s=o(this.fl.get(n)),h=s.indexOf(t);-1!==h&&(s.splice(h,1),0===s.length&&this.fl.delete(n))}var r=t.$();r&&r.Rs().indexOf(t)>=0&&r.js(t),null!==r&&(r.Is(),this.Dl(r)),this.$n=null},t.prototype.Xu=function(t){return t===this.wl?"left":t===this.bl?"right":"overlay"},t.prototype.Al=function(){return this.wl},t.prototype.Bl=function(){return this.bl},t.prototype.Ll=function(t,i){t.Hs(i)},t.prototype.El=function(t,i){t.Ys(i),this.Nl()},t.prototype.Fl=function(t){t.Ks()},t.prototype.Ol=function(t,i){t.$s(i)},t.prototype.Pl=function(t,i){t.Xs(i),this.Nl()},t.prototype.Vl=function(t){t.Zs()},t.prototype.Nl=function(){this.Kn.forEach((function(t){t.Ii()}))},t.prototype.Si=function(){var t=null;return this.hi.ct().rightPriceScale.visible&&0!==this.bl.Rs().length?t=this.bl:this.hi.ct().leftPriceScale.visible&&0!==this.wl.Rs().length?t=this.wl:0!==this.Kn.length&&(t=this.Kn[0].$()),null===t&&(t=this.bl),t},t.prototype.$u=function(){var t=null;return this.hi.ct().rightPriceScale.visible?t=this.bl:this.hi.ct().leftPriceScale.visible&&(t=this.wl),t},t.prototype.Dl=function(t){null!==t&&t._s()&&this.Rl(t)},t.prototype.Wl=function(t){var i=this._l.yr();t.fs({Ms:!0}),null!==i&&t.sh(i),this.Nl()},t.prototype.zl=function(){this.Rl(this.wl),this.Rl(this.bl)},t.prototype.Il=function(){var t=this;this.Dl(this.wl),this.Dl(this.bl),this.Kn.forEach((function(i){t.Ku(i)&&t.Dl(i.$())})),this.Nl(),this.hi.Wr()},t.prototype.Ws=function(){return null===this.$n&&(this.$n=gt(this.Kn)),this.$n},t.prototype.jl=function(){return this.vl},t.prototype.Ul=function(){return this.dl},t.prototype.Rl=function(t){var i=t.nh();if(i&&i.length>0&&!this._l.ti()){var n=this._l.yr();null!==n&&t.sh(n)}t.Ii()},t.prototype.xl=function(){var t=this.Ws();if(0===t.length)return{ql:0,Sl:0};for(var i=0,n=0,s=0;s<t.length;s++){var h=t[s].oi();null!==h&&(h<i&&(i=h),h>n&&(n=h))}return{ql:i,Sl:n}},t.prototype.Tl=function(t,i,n){var s=this.pl(i);if(null===s&&(s=this.Ml(i,this.hi.ct().overlayPriceScales)),this.Kn.push(t),!$t(i)){var h=this.fl.get(i)||[];h.push(t),this.fl.set(i,h)}s.zs(t),t.fi(s),t.li(n),this.Dl(s),this.$n=null},t.prototype.ml=function(t,i,n){i.cs!==n.cs&&this.Rl(t)},t.prototype.Ml=function(t,i){var n=e({visible:!0,autoScale:!0},M(i)),s=new Nt(t,n,this.hi.ct().layout,this.hi.ct().localization);return s.ks(this.Mt()),s},t}(),cn=function(t){function i(i){var n=t.call(this)||this;return n.Hl=new Map,n.tt=i,n}return r(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.q){t.save();for(var i=0,n=0,s=this.tt.Yl;n<s.length;n++){if(0!==(a=s[n]).Ft.length){t.font=a.Nt;var h=this.Kl(t,a.Ft);h>this.tt.wt?a.Kr=this.tt.wt/h:a.Kr=1,i+=a.$l*a.Kr}}var r=0;switch(this.tt.Xl){case"top":r=0;break;case"center":r=Math.max((this.tt.Mt-i)/2,0);break;case"bottom":r=Math.max(this.tt.Mt-i,0)}t.fillStyle=this.tt.et;for(var e=0,u=this.tt.Yl;e<u.length;e++){var a=u[e];t.save();var o=0;switch(this.tt.Zl){case"left":t.textAlign="left",o=a.$l/2;break;case"center":t.textAlign="center",o=this.tt.wt/2;break;case"right":t.textAlign="right",o=this.tt.wt-1-a.$l/2}t.translate(o,r),t.textBaseline="top",t.font=a.Nt,t.scale(a.Kr,a.Kr),t.fillText(a.Ft,0,a.Jl),t.restore(),r+=a.$l*a.Kr}t.restore()}},i.prototype.Kl=function(t,i){var n=this.Gl(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},i.prototype.Gl=function(t){var i=this.Hl.get(t);return void 0===i&&(i=new Map,this.Hl.set(t,i)),i},i}(p),vn=function(){function t(t){this.L=!0,this.at={q:!1,et:"",Mt:0,wt:0,Yl:[],Xl:"center",Zl:"center"},this.ot=new cn(this.at),this.lt=t}return t.prototype.P=function(){this.L=!0},t.prototype.R=function(t,i){return this.L&&(this.W(t,i),this.L=!1),this.ot},t.prototype.W=function(t,i){var n=this.lt.ct(),s=this.at;s.q=n.visible,s.q&&(s.et=n.color,s.wt=i,s.Mt=t,s.Zl=n.horzAlign,s.Xl=n.vertAlign,s.Yl=[{Ft:n.text,Nt:Yt(n.fontSize,n.fontFamily,n.fontStyle),$l:1.2*n.fontSize,Jl:0,Kr:0}])},t}(),_n=function(t){function i(i,n){var s=t.call(this)||this;return s.ki=n,s.Di=new vn(s),s}return r(i,t),i.prototype.Wi=function(){return[]},i.prototype.Ri=function(){return[this.Di]},i.prototype.ct=function(){return this.ki},i.prototype.Ii=function(){this.Di.P()},i}($),dn=function(){function t(t,i){this.Ql=[],this.tf=[],this.Jh=0,this.if=null,this.nf=null,this.sf=new tt,this.hf=new tt,this.rf=null,this.ef=t,this.ki=i,this.uf=new Kt(this),this._l=new jt(this,i.timeScale,this.ki.localization),this.O=new X(this,i.crosshair),this.af=new un(i.crosshair),this.lf=new _n(this,i.watermark),this.ff(),this.Ql[0].Cl(2e3),this.cf=this.vf(0),this._f=this.vf(1)}return t.prototype.df=function(){this.wf(new Xt(3))},t.prototype.Wr=function(){this.wf(new Xt(2))},t.prototype.Xo=function(){this.wf(new Xt(1))},t.prototype.Wo=function(t){var i=this.Mf(t);this.wf(i)},t.prototype.bf=function(){return this.nf},t.prototype.mf=function(t){var i=this.nf;this.nf=t,null!==i&&this.Wo(i.gf),null!==t&&this.Wo(t.gf)},t.prototype.ct=function(){return this.ki},t.prototype.os=function(t){c(this.ki,t),this.Ql.forEach((function(i){return i.gl(t)})),void 0!==t.timeScale&&this._l.os(t.timeScale),void 0!==t.localization&&this._l.dr(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sf.hn(),this.cf=this.vf(0),this._f=this.vf(1),this.df()},t.prototype.pf=function(t,i){if("left"!==t)if("right"!==t){var n=this.yf(t);null!==n&&(n.$.os(i),this.sf.hn())}else this.os({rightPriceScale:i});else this.os({leftPriceScale:i})},t.prototype.yf=function(t){for(var i=0,n=this.Ql;i<n.length;i++){var s=n[i],h=s.pl(t);if(null!==h)return{ft:s,$:h}}return null},t.prototype.j=function(){return this._l},t.prototype.kf=function(){return this.Ql},t.prototype.Cf=function(){return this.lf},t.prototype.Nf=function(){return this.O},t.prototype.Sf=function(){return this.hf},t.prototype.xf=function(t,i){t.ks(i),this.Rr()},t.prototype.Br=function(t){this.Jh=t,this._l.Br(this.Jh),this.Ql.forEach((function(i){return i.Br(t)})),this.Rr()},t.prototype.ff=function(t){var i=new fn(this._l,this);void 0!==t?this.Ql.splice(t,0,i):this.Ql.push(i);var n=void 0===t?this.Ql.length-1:t,s=new Xt(3);return s.pe(n,{ye:0,Ms:!0}),this.wf(s),i},t.prototype.Ll=function(t,i,n){t.Ll(i,n)},t.prototype.El=function(t,i,n){t.El(i,n),this.zo(),this.wf(this.Tf(t,2))},t.prototype.Fl=function(t,i){t.Fl(i),this.wf(this.Tf(t,2))},t.prototype.Ol=function(t,i,n){i._s()||t.Ol(i,n)},t.prototype.Pl=function(t,i,n){i._s()||(t.Pl(i,n),this.zo(),this.wf(this.Tf(t,2)))},t.prototype.Vl=function(t,i){i._s()||(t.Vl(i),this.wf(this.Tf(t,2)))},t.prototype.Wl=function(t,i){t.Wl(i),this.wf(this.Tf(t,2))},t.prototype.Df=function(t){this._l.Hs(t)},t.prototype.Af=function(t,i){var n=this.j();if(!n.ti()&&0!==i){var s=n.wt();t=Math.max(1,Math.min(t,s)),n.Kr(t,i),this.Rr()}},t.prototype.Bf=function(t){this.Lf(0),this.Ef(t),this.Ff()},t.prototype.Of=function(t){this._l.Ys(t),this.Rr()},t.prototype.Pf=function(){this._l.Ks(),this.Wr()},t.prototype.Lf=function(t){this.if=t,this._l.$s(t)},t.prototype.Ef=function(t){var i=!1;return null!==this.if&&Math.abs(t-this.if)>20&&(this.if=null,i=!0),this._l.Xs(t),this.Rr(),i},t.prototype.Ff=function(){this._l.Zs(),this.Wr(),this.if=null},t.prototype.V=function(){return this.tf},t.prototype.Vf=function(t,i,n){this.O.Ai(t,i);var s=NaN,h=this._l.Pr(t),r=this._l.yr();null!==r&&(h=Math.min(Math.max(r.uh(),h),r.ah()));var e=n.Si(),u=e.H();null!==u&&(s=e.xi(i,u)),s=this.af.il(s,h,n),this.O.Fi(h,s,n),this.Xo(),this.hf.hn(this.O.I(),{x:t,y:i})},t.prototype.Rf=function(){this.Nf().Pi(),this.Xo(),this.hf.hn(null,null)},t.prototype.zo=function(){var t=this.O.ft();if(null!==t){var i=this.O.Li(),n=this.O.Ei();this.Vf(i,n,t)}this.O.Ii()},t.prototype.Wf=function(t,i,n){var s=this._l.ri(0);void 0!==i&&void 0!==n&&this._l.P(i,n);var h=this._l.ri(0),r=this._l.Fr(),e=this._l.yr();if(null!==e&&null!==s&&null!==h){var u=e.Vh(r),a=s.Bh>h.Bh,o=null!==t&&t>r&&!a,l=u&&this._l.ct().shiftVisibleRangeOnNewBar;if(o&&!l){var f=t-r;this._l.gr(this._l.jr()-f)}}this._l.Yr(t)},t.prototype.Uo=function(t){null!==t&&t.Il()},t.prototype.Yu=function(t){var i=this.Ql.find((function(i){return i.Ws().includes(t)}));return void 0===i?null:i},t.prototype.Rr=function(){this.lf.Ii(),this.Ql.forEach((function(t){return t.Il()})),this.zo()},t.prototype.en=function(){this.Ql.forEach((function(t){return t.en()})),this.Ql.length=0,this.ki.localization.priceFormatter=void 0,this.ki.localization.timeFormatter=void 0},t.prototype.zf=function(){return this.uf},t.prototype.Zu=function(){return this.uf.ct()},t.prototype.yl=function(){return this.sf},t.prototype.If=function(t,i){var n=this.Ql[0],s=this.jf(i,t,n);return this.tf.push(s),1===this.tf.length?this.df():this.Wr(),s},t.prototype.Uf=function(t){var i=this.Yu(t),n=this.tf.indexOf(t);a(-1!==n,"Series not found"),this.tf.splice(n,1),l(i).js(t),t.en&&t.en()},t.prototype.Ro=function(t,i){var n=l(this.Yu(t));n.js(t);var s=this.yf(i);if(null===s){var h=t.oi();n.zs(t,i,h)}else{h=s.ft===n?t.oi():void 0;s.ft.zs(t,i,h)}},t.prototype.ne=function(){var t=new Xt(2);t.Ne(),this.wf(t)},t.prototype.qf=function(t){var i=new Xt(2);i.xe(t),this.wf(i)},t.prototype.Te=function(){var t=new Xt(2);t.Te(),this.wf(t)},t.prototype.mr=function(t){var i=new Xt(2);i.mr(t),this.wf(i)},t.prototype.gr=function(t){var i=new Xt(2);i.gr(t),this.wf(i)},t.prototype.Hf=function(){return this.ki.rightPriceScale.visible?"right":"left"},t.prototype.Yf=function(){return this._f},t.prototype.Kf=function(){return this.cf},t.prototype.J=function(t){var i=this._f,n=this.cf;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.rf||this.rf.Re!==n||this.rf.We!==i)this.rf={Re:n,We:i,$f:new Map};else{var s=this.rf.$f.get(t);if(void 0!==s)return s}var h=function(t,i,n){var s=O(t),h=s[0],r=s[1],e=s[2],u=s[3],a=O(i),o=a[0],l=a[1],f=a[2],c=a[3],v=[D(h+n*(o-h)),D(r+n*(l-r)),D(e+n*(f-e)),A(u+n*(c-u))];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(v[3],")")}(n,i,t/100);return this.rf.$f.set(t,h),h},t.prototype.Tf=function(t,i){var n=new Xt(i);if(null!==t){var s=this.Ql.indexOf(t);n.pe(s,{ye:i})}return n},t.prototype.Mf=function(t,i){return void 0===i&&(i=2),this.Tf(this.Yu(t),i)},t.prototype.wf=function(t){this.ef&&this.ef(t),this.Ql.forEach((function(t){return t.Ul().ll().P()}))},t.prototype.jf=function(t,i,n){var s=new en(this,t,i),h=void 0!==t.priceScaleId?t.priceScaleId:this.Hf();return n.zs(s,h),$t(h)||s.os(t),s},t.prototype.vf=function(t){var i=this.ki.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}(),wn={allowDownsampling:!0};var Mn=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}(),bn=function(){function t(t,i){this.st=t,this.ht=i}return t.prototype.on=function(t){return this.st===t.st&&this.ht===t.ht},t}();function mn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function gn(t){var i=l(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function pn(t,i){var n=t.createElement("canvas"),s=mn(n);return n.style.width="".concat(i.st,"px"),n.style.height="".concat(i.ht,"px"),n.width=i.st*s,n.height=i.ht*s,n}function yn(t,i){var n=l(t.ownerDocument).createElement("canvas");t.appendChild(n);var s=function(t,i){return void 0===i&&(i=wn),new Mn(t,i)}(n);return s.resizeCanvas({width:i.st,height:i.ht}),s}function kn(t,i){return t.Xf-i.Xf}function Cn(t,i,n){var s=(t.Xf-i.Xf)/(t.S-i.S);return Math.sign(s)*Math.min(Math.abs(s),n)}var Nn=function(){function t(t,i,n,s){this.Zf=null,this.Jf=null,this.Gf=null,this.Qf=null,this.tc=null,this.ic=0,this.nc=0,this.sc=!1,this.hc=t,this.rc=i,this.ec=n,this.Yi=s}return t.prototype.uc=function(t,i){if(null!==this.Zf){if(this.Zf.S===i)return void(this.Zf.Xf=t);if(Math.abs(this.Zf.Xf-t)<this.Yi)return}this.Qf=this.Gf,this.Gf=this.Jf,this.Jf=this.Zf,this.Zf={S:i,Xf:t}},t.prototype.ra=function(t,i){if(null!==this.Zf&&null!==this.Jf&&!(i-this.Zf.S>50)){var n=0,s=Cn(this.Zf,this.Jf,this.rc),h=kn(this.Zf,this.Jf),r=[s],e=[h];if(n+=h,null!==this.Gf){var u=Cn(this.Jf,this.Gf,this.rc);if(Math.sign(u)===Math.sign(s)){var a=kn(this.Jf,this.Gf);if(r.push(u),e.push(a),n+=a,null!==this.Qf){var o=Cn(this.Gf,this.Qf,this.rc);if(Math.sign(o)===Math.sign(s)){var l=kn(this.Gf,this.Qf);r.push(o),e.push(l),n+=l}}}}for(var f,c,v,_=0,d=0;d<r.length;++d)_+=e[d]/n*r[d];if(!(Math.abs(_)<this.hc))this.tc={Xf:t,S:i},this.nc=_,this.ic=(f=Math.abs(_),c=this.ec,v=Math.log(c),Math.log(1*v/-f)/v)}},t.prototype.ac=function(t){var i=l(this.tc),n=t-i.S;return i.Xf+this.nc*(Math.pow(this.ec,n)-1)/Math.log(this.ec)},t.prototype.oc=function(t){return null===this.tc||this.lc(t)===this.ic},t.prototype.fc=function(){return this.sc},t.prototype.cc=function(){this.sc=!0},t.prototype.lc=function(t){var i=t-l(this.tc).S;return Math.min(i,this.ic)},t}(),Sn="undefined"!=typeof window;var xn=function(){if(!Sn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!Sn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}();var Tn=function(){if(!Sn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),Dn=function(){function t(t,i,n){this.vc=0,this._c=null,this.dc=null,this.wc=!1,this.Mc=null,this.bc=!1,this.mc=!1,this.gc=null,this.yc=null,this.kc=null,this.Cc=null,this.Nc=0,this.Sc=!1,this.xc=!1,this.Tc=!1,this.Dc=t,this.Ac=i,this.ki=n,this.Bc()}return t.prototype.en=function(){null!==this.gc&&(this.gc(),this.gc=null),null!==this.yc&&(this.yc(),this.yc=null),null!==this.kc&&(this.kc(),this.kc=null),this.Lc(),this.Ec()},t.prototype.Fc=function(t){var i=this;this.yc&&this.yc();var n=this.Oc.bind(this);this.yc=function(){i.Dc.removeEventListener("mousemove",n)},this.Dc.addEventListener("mousemove",n),Ln(t)&&this.Oc(t);var s=this.Pc(t);this.Vc(s,this.Ac.Rc)},t.prototype.Ec=function(){null!==this._c&&clearTimeout(this._c),this.vc=0,this._c=null},t.prototype.Oc=function(t){if(!this.Tc||Ln(t)){var i=this.Pc(t);this.Vc(i,this.Ac.Wc)}},t.prototype.zc=function(t){if((!("button"in t)||0===t.button)&&null===this.Cc){var i=Ln(t);if(!this.xc||!i){this.Sc=!0;var n=this.Pc(t),s=f(this.Mc),h=Math.abs(s.g-n.Ic),r=Math.abs(s.p-n.jc),e=h+r>5;if(e||!i){if(e&&!this.bc&&i){var u=.5*h,a=r>=u&&!this.ki.Uc,o=u>r&&!this.ki.qc;a||o||(this.xc=!0)}e&&(this.bc=!0,this.mc=!0,i&&this.Lc()),this.xc||(this.Vc(n,this.Ac.Hc),i&&En(t))}}}},t.prototype.Yc=function(t){if(!("button"in t)||0===t.button){var i=this.Pc(t);this.Lc(),this.Mc=null,this.Tc=!1,this.kc&&(this.kc(),this.kc=null),Ln(t)&&this.Kc(t),this.Vc(i,this.Ac.$c),++this.vc,this._c&&this.vc>1?(this.Vc(i,this.Ac.Xc),this.Ec()):this.mc||this.Vc(i,this.Ac.Zc),Ln(t)&&(En(t),this.Kc(t),0===t.touches.length&&(this.wc=!1))}},t.prototype.Lc=function(){null!==this.dc&&(clearTimeout(this.dc),this.dc=null)},t.prototype.Jc=function(t){if(!("button"in t)||0===t.button){var i=this.Pc(t);this.mc=!1,this.bc=!1,this.xc=!1,Ln(t)&&this.Fc(t),this.Mc={g:i.Ic,p:i.jc},this.kc&&(this.kc(),this.kc=null);var n=this.zc.bind(this),s=this.Yc.bind(this),h=this.Dc.ownerDocument.documentElement;this.kc=function(){h.removeEventListener("touchmove",n),h.removeEventListener("touchend",s),h.removeEventListener("mousemove",n),h.removeEventListener("mouseup",s)},h.addEventListener("touchmove",n,{passive:!1}),h.addEventListener("touchend",s,{passive:!1}),this.Lc(),Ln(t)&&1===t.touches.length?this.dc=setTimeout(this.Gc.bind(this,t),240):(h.addEventListener("mousemove",n),h.addEventListener("mouseup",s)),this.Tc=!0,this.Vc(i,this.Ac.Qc),this._c||(this.vc=0,this._c=setTimeout(this.Ec.bind(this),500))}},t.prototype.Bc=function(){var t=this;this.Dc.addEventListener("mouseenter",this.Fc.bind(this)),this.Dc.addEventListener("touchcancel",this.Lc.bind(this));var i=this.Dc.ownerDocument,n=function(i){t.Ac.tv&&(i.composed&&t.Dc.contains(i.composedPath()[0])||i.target&&t.Dc.contains(i.target)||t.Ac.tv())};this.gc=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.Dc.addEventListener("mouseleave",this.Kc.bind(this)),this.Dc.addEventListener("touchstart",this.Jc.bind(this),{passive:!0}),xn||this.Dc.addEventListener("mousedown",this.Jc.bind(this)),this.iv(),this.Dc.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.iv=function(){var t=this;void 0===this.Ac.nv&&void 0===this.Ac.sv&&void 0===this.Ac.hv||(this.Dc.addEventListener("touchstart",(function(i){return t.rv(i.touches)}),{passive:!0}),this.Dc.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.Cc&&void 0!==t.Ac.sv){var n=Bn(i.touches[0],i.touches[1])/t.Nc;t.Ac.sv(t.Cc,n),En(i)}}),{passive:!1}),this.Dc.addEventListener("touchend",(function(i){t.rv(i.touches)})))},t.prototype.rv=function(t){1===t.length&&(this.Sc=!1),2!==t.length||this.Sc||this.wc?this.ev():this.uv(t)},t.prototype.uv=function(t){var i=An(this.Dc);this.Cc={g:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Nc=Bn(t[0],t[1]),void 0!==this.Ac.nv&&this.Ac.nv(),this.Lc()},t.prototype.ev=function(){null!==this.Cc&&(this.Cc=null,void 0!==this.Ac.hv&&this.Ac.hv())},t.prototype.Kc=function(t){this.yc&&this.yc();var i=this.Pc(t);this.Vc(i,this.Ac.av)},t.prototype.Gc=function(t){var i=this.Pc(t);this.Vc(i,this.Ac.ov),this.mc=!0,this.wc=!0},t.prototype.Vc=function(t,i){i&&i.call(this.Ac,t)},t.prototype.Pc=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=An(this.Dc);return{lv:i.clientX,fv:i.clientY,Ic:i.pageX,jc:i.pageY,cv:i.screenX,vv:i.screenY,_v:i.clientX-n.left,dv:i.clientY-n.top,wv:t.ctrlKey,Mv:t.altKey,bv:t.shiftKey,mv:t.metaKey,Se:t.type.startsWith("mouse")?"mouse":"touch",gv:t.view}},t}();function An(t){return t.getBoundingClientRect()||{left:0,top:0}}function Bn(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Ln(t){return Boolean(t.touches)}function En(t){t.cancelable&&t.preventDefault()}var Fn=function(){function t(t,i,n,s){this.ju=new yi(200),this._e=0,this.pv="",this.Na="",this.Ru=[],this.yv=new Map,this._e=t,this.pv=i,this.Na=Yt(t,n,s)}return t.prototype.en=function(){this.ju.Wu(),this.Ru=[],this.yv.clear()},t.prototype.kv=function(t,i,n,s,h){var r=this.Cv(t,i);if("left"!==h){var e=mn(t.canvas);n-=Math.floor(r.Nv*e)}s-=Math.floor(r.Mt/2),t.drawImage(r.Sv,n,s,r.wt,r.Mt)},t.prototype.Cv=function(t,i){var n,s=this;if(this.yv.has(i))n=o(this.yv.get(i));else{if(this.Ru.length>=200){var h=o(this.Ru.shift());this.yv.delete(h)}var r=mn(t.canvas),e=Math.ceil(this._e/4.5),u=Math.round(this._e/10),a=Math.ceil(this.ju.Ot(t,i)),l=rt(Math.round(a+2*e)),f=rt(this._e+2*e),c=pn(document,new bn(l,f));n={Ft:i,Nv:Math.round(Math.max(1,a)),wt:Math.ceil(l*r),Mt:Math.ceil(f*r),Sv:c},0!==a&&(this.Ru.push(n.Ft),this.yv.set(n.Ft,n)),R(t=gn(n.Sv),r,(function(){t.font=s.Na,t.fillStyle=s.pv,t.fillText(i,0,f-e-u)}))}return n},t}(),On=function(){function t(t,i,n,s){var h=this;this.Gt=null,this.xv=null,this.Tv=null,this.Dv=!1,this.Av=new yi(50),this.Bv=new Fn(11,"#000"),this.pv=null,this.Na=null,this.Lv=0,this.Ev=function(){h.Fv(h.uf.ct()),h.vi.Ov().vt().Wr()},this.Pv=function(){h.vi.Ov().vt().Wr()},this.vi=t,this.ki=i,this.uf=n,this.Vv="left"===s,this.Rv=document.createElement("div"),this.Rv.style.height="100%",this.Rv.style.overflow="hidden",this.Rv.style.width="25px",this.Rv.style.left="0",this.Rv.style.position="relative",this.Wv=yn(this.Rv,new bn(16,16)),this.Wv.subscribeCanvasConfigured(this.Ev);var r=this.Wv.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.zv=yn(this.Rv,new bn(16,16)),this.zv.subscribeCanvasConfigured(this.Pv);var e=this.zv.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={Qc:this.Iv.bind(this),Hc:this.jv.bind(this),tv:this.Uv.bind(this),$c:this.qv.bind(this),Xc:this.Hv.bind(this),Rc:this.Yv.bind(this),av:this.Kv.bind(this)};this.$v=new Dn(this.zv.canvas,u,{Uc:!1,qc:!0})}return t.prototype.en=function(){this.$v.en(),this.zv.unsubscribeCanvasConfigured(this.Pv),this.zv.destroy(),this.Wv.unsubscribeCanvasConfigured(this.Ev),this.Wv.destroy(),null!==this.Gt&&this.Gt.qs().sn(this),this.Gt=null,null!==this.Tv&&(clearTimeout(this.Tv),this.Tv=null),this.Bv.en()},t.prototype.Xv=function(){return this.Rv},t.prototype.N=function(){return l(this.Gt).ct().borderColor},t.prototype.Zv=function(){return this.ki.textColor},t.prototype.Vt=function(){return this.ki.fontSize},t.prototype.Jv=function(){return Yt(this.Vt(),this.ki.fontFamily)},t.prototype.Gv=function(){var t=this.uf.ct(),i=this.pv!==t.et,n=this.Na!==t.Nt;return(i||n)&&(this.Fv(t),this.pv=t.et),n&&(this.Av.Wu(),this.Na=t.Nt),t},t.prototype.Qv=function(){if(null===this.Gt)return 0;var t=34,i=this.Gv(),n=gn(this.Wv.canvas),s=this.Gt.On();n.font=this.Jv(),s.length>0&&(t=Math.max(this.Av.Ot(n,s[0].Ln),this.Av.Ot(n,s[s.length-1].Ln)));for(var h=this.t_(),r=h.length;r--;){var e=this.Av.Ot(n,h[r].Ft());e>t&&(t=e)}var u=this.Gt.H();if(null!==u&&null!==this.xv){var a=this.Gt.xi(1,u),o=this.Gt.xi(this.xv.ht-2,u);t=Math.max(t,this.Av.Ot(n,this.Gt.ii(Math.floor(Math.min(a,o))+.11111111111111,u)),this.Av.Ot(n,this.Gt.ii(Math.ceil(Math.max(a,o))-.11111111111111,u)))}var l=Math.ceil(i.Dt+i.Tt+i.Lt+i.Et+t);return l+=l%2},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.xv&&this.xv.on(t)||(this.xv=t,this.Wv.resizeCanvas({width:t.st,height:t.ht}),this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.style.width=t.st+"px",this.Rv.style.height=t.ht+"px",this.Rv.style.minWidth=t.st+"px")},t.prototype.n_=function(){return l(this.xv).st},t.prototype.fi=function(t){this.Gt!==t&&(null!==this.Gt&&this.Gt.qs().sn(this),this.Gt=t,t.qs().Ji(this.Hn.bind(this),this))},t.prototype.$=function(){return this.Gt},t.prototype.Wu=function(){var t=this.vi.s_();this.vi.Ov().vt().Wl(t,l(this.$()))},t.prototype.h_=function(t){if(null!==this.xv){if(1!==t){var i=gn(this.Wv.canvas);this.r_(),this.e_(i,this.Wv.pixelRatio),this.Nu(i,this.Wv.pixelRatio),this.u_(i,this.Wv.pixelRatio),this.a_(i,this.Wv.pixelRatio)}var n=gn(this.zv.canvas),s=this.xv.st,h=this.xv.ht;R(n,this.zv.pixelRatio,(function(){n.clearRect(0,0,s,h)})),this.o_(n,this.zv.pixelRatio)}},t.prototype.l_=function(){return this.Wv.canvas},t.prototype.Iv=function(t){if(null!==this.Gt&&!this.Gt.ti()&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_();this.Dv=!0,i.Ll(n,this.Gt,t.dv)}},t.prototype.jv=function(t){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_(),s=this.Gt;i.El(n,s,t.dv)}},t.prototype.Uv=function(){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var t=this.vi.Ov().vt(),i=this.vi.s_(),n=this.Gt;this.Dv&&(this.Dv=!1,t.Fl(i,n))}},t.prototype.qv=function(t){if(null!==this.Gt&&this.vi.Ov().ct().handleScale.axisPressedMouseMove.price){var i=this.vi.Ov().vt(),n=this.vi.s_();this.Dv=!1,i.Fl(n,this.Gt)}},t.prototype.Hv=function(t){this.vi.Ov().ct().handleScale.axisDoubleClickReset&&this.Wu()},t.prototype.Yv=function(t){null!==this.Gt&&(!this.vi.Ov().vt().ct().handleScale.axisPressedMouseMove.price||this.Gt.ds()||this.Gt.ws()||this.f_(1))},t.prototype.Kv=function(t){this.f_(0)},t.prototype.t_=function(){var t=this,i=[],n=null===this.Gt?void 0:this.Gt;return function(s){for(var h=0;h<s.length;++h)for(var r=s[h].Wi(t.vi.s_(),n),e=0;e<r.length;e++)i.push(r[e])}(this.vi.s_().Ws()),i},t.prototype.e_=function(t,i){var n=this;if(null!==this.xv){var s=this.xv.st,h=this.xv.ht;R(t,i,(function(){var i=n.vi.s_().vt(),r=i.Kf(),e=i.Yf();r===e?W(t,0,0,s,h,r):z(t,0,0,s,h,r,e)}))}},t.prototype.Nu=function(t,i){if(null!==this.xv&&null!==this.Gt&&this.Gt.ct().borderVisible){t.save(),t.fillStyle=this.N();var n,s=Math.max(1,Math.floor(this.Gv().Dt*i));n=this.Vv?Math.floor(this.xv.st*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.xv.ht*i)),t.restore()}},t.prototype.u_=function(t,i){if(null!==this.xv&&null!==this.Gt){var n=this.Gt.On();t.save(),t.strokeStyle=this.N(),t.font=this.Jv(),t.fillStyle=this.N();var s=this.Gv(),h=this.Gt.ct().borderVisible&&this.Gt.ct().drawTicks,r=this.Vv?Math.floor((this.xv.st-s.Tt)*i-s.Dt*i):Math.floor(s.Dt*i),e=this.Vv?Math.round(r-s.Lt*i):Math.round(r+s.Tt*i+s.Lt*i),u=this.Vv?"right":"left",a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(h){var l=Math.round(s.Tt*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var v=c[f];t.rect(r,Math.round(v.Bn*i)-o,l,a)}t.fill()}t.fillStyle=this.Zv();for(var _=0,d=n;_<d.length;_++){v=d[_];this.Bv.kv(t,v.Ln,e,Math.round(v.Bn*i),u)}t.restore()}},t.prototype.r_=function(){if(null!==this.xv&&null!==this.Gt){var t=this.xv.ht/2,i=[],n=this.Gt.Ws().slice(),s=this.vi.s_(),h=this.Gv();this.Gt===s.$u()&&this.vi.s_().Ws().forEach((function(t){s.Ku(t)&&n.push(t)}));var r=this.Gt.Rs()[0],e=this.Gt;n.forEach((function(n){var h=n.Wi(s,e);h.forEach((function(t){t.Kt(null),t.$t()&&i.push(t)})),r===n&&h.length>0&&(t=h[0].Rt())}));var u=i.filter((function(i){return i.Rt()<=t})),a=i.filter((function(i){return i.Rt()>t}));if(u.sort((function(t,i){return i.Rt()-t.Rt()})),u.length&&a.length&&a.push(u[0]),a.sort((function(t,i){return t.Rt()-i.Rt()})),i.forEach((function(t){return t.Kt(t.Rt())})),this.Gt.ct().alignLabels){for(var o=1;o<u.length;o++){var l=u[o],f=(v=u[o-1]).Mt(h,!1);l.Rt()>(_=v.Yt())-f&&l.Kt(_-f)}for(var c=1;c<a.length;c++){var v,_;l=a[c],f=(v=a[c-1]).Mt(h,!0);l.Rt()<(_=v.Yt())+f&&l.Kt(_+f)}}}},t.prototype.a_=function(t,i){var n=this;if(null!==this.xv){t.save();var s=this.xv,h=this.t_(),r=this.Gv(),e=this.Vv?"right":"left";h.forEach((function(h){if(h.Xt()){var u=h.R(l(n.Gt));t.save(),u.h(t,r,n.Av,s.st,e,i),t.restore()}})),t.restore()}},t.prototype.o_=function(t,i){var n=this;if(null!==this.xv&&null!==this.Gt){t.save();var s=this.xv,h=this.vi.Ov().vt(),r=[],e=this.vi.s_(),u=h.Nf().Wi(e,this.Gt);u.length&&r.push(u);var a=this.Gv(),o=this.Vv?"right":"left";r.forEach((function(h){h.forEach((function(h){t.save(),h.R(l(n.Gt)).h(t,a,n.Av,s.st,o,i),t.restore()}))})),t.restore()}},t.prototype.f_=function(t){this.Rv.style.cursor=1===t?"ns-resize":"default"},t.prototype.Hn=function(){var t=this,i=this.Qv();if(this.Lv<i){var n=this.vi.Ov();null===this.Tv&&(this.Tv=setTimeout((function(){n&&n.vt().df(),t.Tv=null}),100))}this.Lv=i},t.prototype.Fv=function(t){this.Bv.en(),this.Bv=new Fn(t.Vt,t.et,t.ve)},t}(),Pn=Tn;function Vn(t,i,n,s,h){t.o&&t.o(i,n,s,h)}function Rn(t,i,n,s,h){t.h(i,n,s,h)}function Wn(t,i){return t.Ri(i)}function zn(t,i){return void 0!==t.$o?t.$o(i):[]}var In=function(){function t(t,i){var n=this;this.xv=new bn(0,0),this.c_=null,this.v_=null,this.__=null,this.d_=!1,this.w_=new tt,this.M_=0,this.b_=!1,this.m_=null,this.g_=!1,this.p_=null,this.y_=null,this.Ev=function(){return n.k_&&n.hi().Wr()},this.Pv=function(){return n.k_&&n.hi().Wr()},this.C_=t,this.k_=i,this.k_.jl().Ji(this.N_.bind(this),this,!0),this.S_=document.createElement("td"),this.S_.style.padding="0",this.S_.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.x_=document.createElement("td"),this.x_.style.padding="0",this.T_=document.createElement("td"),this.T_.style.padding="0",this.S_.appendChild(s),this.Wv=yn(s,new bn(16,16)),this.Wv.subscribeCanvasConfigured(this.Ev);var h=this.Wv.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.zv=yn(s,new bn(16,16)),this.zv.subscribeCanvasConfigured(this.Pv);var r=this.zv.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.D_=document.createElement("tr"),this.D_.appendChild(this.x_),this.D_.appendChild(this.S_),this.D_.appendChild(this.T_),this.A_();var e=this.Ov().ct().handleScroll;this.$v=new Dn(this.zv.canvas,this,{Uc:!e.vertTouchDrag,qc:!e.horzTouchDrag})}return t.prototype.en=function(){null!==this.c_&&this.c_.en(),null!==this.v_&&this.v_.en(),this.zv.unsubscribeCanvasConfigured(this.Pv),this.zv.destroy(),this.Wv.unsubscribeCanvasConfigured(this.Ev),this.Wv.destroy(),null!==this.k_&&this.k_.jl().sn(this),this.$v.en()},t.prototype.s_=function(){return l(this.k_)},t.prototype.B_=function(i){null!==this.k_&&this.k_.jl().sn(this),this.k_=i,null!==this.k_&&this.k_.jl().Ji(t.prototype.N_.bind(this),this,!0),this.A_()},t.prototype.Ov=function(){return this.C_},t.prototype.Xv=function(){return this.D_},t.prototype.A_=function(){if(null!==this.k_&&(this.L_(),0!==this.hi().V().length)){if(null!==this.c_){var t=this.k_.Al();this.c_.fi(l(t))}if(null!==this.v_){var i=this.k_.Bl();this.v_.fi(l(i))}}},t.prototype.kl=function(){return null!==this.k_?this.k_.kl():0},t.prototype.Cl=function(t){this.k_&&this.k_.Cl(t)},t.prototype.Rc=function(t){if(this.k_){var i=t._v,n=t.dv;xn||this.E_(i,n)}},t.prototype.Qc=function(t){if(this.b_=!1,this.g_=null!==this.m_,this.k_){if(this.F_(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)l(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.hi();if(!this.k_.Si().ti()&&!n.j().ti()){if(null!==this.m_){var s=n.Nf();this.p_={x:s.bt(),y:s.gt()},this.m_={x:t._v,y:t.dv}}xn||this.E_(t._v,t.dv)}}},t.prototype.Wc=function(t){if(this.k_){var i=t._v,n=t.dv;if(this.O_()&&this.P_(),!xn){this.E_(i,n);var s=this.Sa(i,n);this.hi().mf(s&&{gf:s.gf,V_:s.V_})}}},t.prototype.Zc=function(t){if(null!==this.k_){var i=t._v,n=t.dv;if(this.w_.rn()){var s=this.hi().Nf().I();this.w_.hn(s,{x:i,y:n})}this.R_()}},t.prototype.Hc=function(t){if(null!==this.k_){var i=this.hi(),n=t._v,s=t.dv;if(null!==this.m_){this.g_=!1;var h=l(this.p_),r=h.x+(n-this.m_.x),e=h.y+(s-this.m_.y);this.E_(r,e)}else this.O_()||this.E_(n,s);if(!i.j().ti()){var u=this.C_.ct(),a=u.handleScroll,o=u.kineticScroll;if(a.pressedMouseMove&&"touch"!==t.Se||(a.horzTouchDrag||a.vertTouchDrag)&&"mouse"!==t.Se){var f=this.k_.Si(),c=performance.now();null!==this.__||this.W_()||(this.__={x:t.lv,y:t.fv,Bh:c,_v:t._v,dv:t.dv}),null!==this.y_&&this.y_.uc(t._v,c),null===this.__||this.d_||this.__.x===t.lv&&this.__.y===t.fv||(null===this.y_&&("touch"===t.Se&&o.touch||"mouse"===t.Se&&o.mouse)&&(this.y_=new Nn(.2,7,.997,15),this.y_.uc(this.__._v,this.__.Bh),this.y_.uc(t._v,c)),f.ti()||i.Ol(this.k_,f,t.dv),i.Lf(t._v),this.d_=!0),this.d_&&(f.ti()||i.Pl(this.k_,f,t.dv),i.Ef(t._v))}}}},t.prototype.$c=function(t){null!==this.k_&&(this.b_=!1,this.z_(t))},t.prototype.ov=function(t){if(this.b_=!0,null===this.m_&&Pn){var i={x:t._v,y:t.dv};this.I_(i,i)}},t.prototype.av=function(t){null!==this.k_&&(this.k_.vt().mf(null),Tn||this.P_())},t.prototype.j_=function(){return this.w_},t.prototype.nv=function(){this.M_=1,this.F_()},t.prototype.sv=function(t,i){if(this.C_.ct().handleScale.pinch){var n=5*(i-this.M_);this.M_=i,this.hi().Af(t.g,n)}},t.prototype.Sa=function(t,i){var n=this.k_;if(null===n)return null;for(var s=0,h=n.Ws();s<h.length;s++){var r=h[s],e=this.U_(r.Ri(n),t,i);if(null!==e)return{gf:r,gv:e.gv,V_:e.V_}}return null},t.prototype.q_=function(t,i){l("left"===i?this.c_:this.v_).i_(new bn(t,this.xv.ht))},t.prototype.H_=function(){return this.xv},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.xv.on(t)||(this.xv=t,this.Wv.resizeCanvas({width:t.st,height:t.ht}),this.zv.resizeCanvas({width:t.st,height:t.ht}),this.S_.style.width=t.st+"px",this.S_.style.height=t.ht+"px")},t.prototype.Y_=function(){var t=l(this.k_);t.Dl(t.Al()),t.Dl(t.Bl());for(var i=0,n=t.Rs();i<n.length;i++){var s=n[i];if(t.Ku(s)){var h=s.$();null!==h&&t.Dl(h),s.Ii()}}},t.prototype.l_=function(){return this.Wv.canvas},t.prototype.h_=function(t){if(0!==t&&null!==this.k_){if(t>1&&this.Y_(),null!==this.c_&&this.c_.h_(t),null!==this.v_&&this.v_.h_(t),1!==t){var i=gn(this.Wv.canvas);i.save(),this.e_(i,this.Wv.pixelRatio),this.k_&&(this.K_(i,this.Wv.pixelRatio),this.X_(i,this.Wv.pixelRatio),this.Z_(i,this.Wv.pixelRatio,Wn)),i.restore()}var n=gn(this.zv.canvas);n.clearRect(0,0,Math.ceil(this.xv.st*this.zv.pixelRatio),Math.ceil(this.xv.ht*this.zv.pixelRatio)),this.Z_(n,this.Wv.pixelRatio,zn),this.J_(n,this.zv.pixelRatio)}},t.prototype.G_=function(){return this.c_},t.prototype.Q_=function(){return this.v_},t.prototype.N_=function(){null!==this.k_&&this.k_.jl().sn(this),this.k_=null},t.prototype.e_=function(t,i){var n=this;R(t,i,(function(){var i=n.hi(),s=i.Kf(),h=i.Yf();s===h?W(t,0,0,n.xv.st,n.xv.ht,h):z(t,0,0,n.xv.st,n.xv.ht,s,h)}))},t.prototype.K_=function(t,i){var n=l(this.k_),s=n.Ul().ll().R(n.Mt(),n.wt());null!==s&&(t.save(),s.h(t,i,!1),t.restore())},t.prototype.X_=function(t,i){var n=this.hi().Cf();this.td(t,i,Wn,Vn,n),this.td(t,i,Wn,Rn,n)},t.prototype.J_=function(t,i){this.td(t,i,Wn,Rn,this.hi().Nf())},t.prototype.Z_=function(t,i,n){for(var s=l(this.k_).Ws(),h=0,r=s;h<r.length;h++){var e=r[h];this.td(t,i,n,Vn,e)}for(var u=0,a=s;u<a.length;u++){e=a[u];this.td(t,i,n,Rn,e)}},t.prototype.td=function(t,i,n,s,h){for(var r=l(this.k_),e=n(h,r),u=r.Mt(),a=r.wt(),o=r.vt().bf(),f=null!==o&&o.gf===h,c=null!==o&&f&&void 0!==o.V_?o.V_.xa:void 0,v=0,_=e;v<_.length;v++){var d=_[v].R(u,a);null!==d&&(t.save(),s(d,t,i,f,c),t.restore())}},t.prototype.U_=function(t,i,n){for(var s=0,h=t;s<h.length;s++){var r=h[s],e=r.R(this.xv.ht,this.xv.st);if(null!==e&&e.Sa){var u=e.Sa(i,n);if(null!==u)return{gv:r,V_:u}}}return null},t.prototype.L_=function(){if(null!==this.k_){var t=this.C_,i=this.k_.Al().ct().visible,n=this.k_.Bl().ct().visible;i||null===this.c_||(this.x_.removeChild(this.c_.Xv()),this.c_.en(),this.c_=null),n||null===this.v_||(this.T_.removeChild(this.v_.Xv()),this.v_.en(),this.v_=null);var s=t.vt().zf();i&&null===this.c_&&(this.c_=new On(this,t.ct().layout,s,"left"),this.x_.appendChild(this.c_.Xv())),n&&null===this.v_&&(this.v_=new On(this,t.ct().layout,s,"right"),this.T_.appendChild(this.v_.Xv()))}},t.prototype.O_=function(){return Pn&&null===this.m_},t.prototype.W_=function(){return Pn&&this.b_||null!==this.m_},t.prototype.nd=function(t){return Math.max(0,Math.min(t,this.xv.st-1))},t.prototype.sd=function(t){return Math.max(0,Math.min(t,this.xv.ht-1))},t.prototype.E_=function(t,i){this.hi().Vf(this.nd(t),this.sd(i),l(this.k_))},t.prototype.P_=function(){this.hi().Rf()},t.prototype.R_=function(){this.g_&&(this.m_=null,this.P_())},t.prototype.I_=function(t,i){this.m_=t,this.g_=!1,this.E_(i.x,i.y);var n=this.hi().Nf();this.p_={x:n.bt(),y:n.gt()}},t.prototype.hi=function(){return this.C_.vt()},t.prototype.hd=function(){var t=this.hi(),i=this.s_(),n=i.Si();t.Vl(i,n),t.Ff(),this.__=null,this.d_=!1},t.prototype.z_=function(t){var i=this;if(this.d_){var n=performance.now();if(null!==this.y_&&this.y_.ra(t._v,n),null===this.y_||this.y_.oc(n))this.hd();else{var s=this.hi(),h=s.j(),r=this.y_,e=function(){if(!r.fc()){var t=performance.now(),n=r.oc(t);if(!r.fc()){var u=h.jr();s.Ef(r.ac(t)),u===h.jr()&&(n=!0,i.y_=null)}n?i.hd():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.F_=function(){var t=performance.now(),i=null===this.y_||this.y_.oc(t);null!==this.y_&&(i||this.hd()),null!==this.y_&&(this.y_.cc(),this.y_=null)},t}(),jn=function(){function t(t,i,n,s,h){var r=this;this.L=!0,this.xv=new bn(0,0),this.Ev=function(){return r.h_(3)},this.Vv="left"===t,this.uf=n.zf,this.ki=i,this.rd=s,this.ed=h,this.Rv=document.createElement("div"),this.Rv.style.width="25px",this.Rv.style.height="100%",this.Rv.style.overflow="hidden",this.Wv=yn(this.Rv,new bn(16,16)),this.Wv.subscribeCanvasConfigured(this.Ev)}return t.prototype.en=function(){this.Wv.unsubscribeCanvasConfigured(this.Ev),this.Wv.destroy()},t.prototype.Xv=function(){return this.Rv},t.prototype.H_=function(){return this.xv},t.prototype.i_=function(t){if(t.st<0||t.ht<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.xv.on(t)||(this.xv=t,this.Wv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.style.width="".concat(t.st,"px"),this.Rv.style.minWidth="".concat(t.st,"px"),this.Rv.style.height="".concat(t.ht,"px"),this.L=!0)},t.prototype.h_=function(t){if((!(t<3)||this.L)&&0!==this.xv.st&&0!==this.xv.ht){this.L=!1;var i=gn(this.Wv.canvas);this.e_(i,this.Wv.pixelRatio),this.Nu(i,this.Wv.pixelRatio)}},t.prototype.l_=function(){return this.Wv.canvas},t.prototype.Nu=function(t,i){if(this.rd()){var n=this.xv.st;t.save(),t.fillStyle=this.ki.timeScale.borderColor;var s=Math.floor(this.uf.ct().Dt*i),h=this.Vv?Math.round(n*i)-s:0;t.fillRect(h,0,s,s),t.restore()}},t.prototype.e_=function(t,i){var n=this;R(t,i,(function(){W(t,0,0,n.xv.st,n.xv.ht,n.ed())}))},t}();function Un(t,i){return t.Uh>i.Uh?t:i}var qn=function(){function t(t){var i=this;this.ud=null,this.ad=null,this.ce=null,this.od=!1,this.xv=new bn(0,0),this.ld=new tt,this.Av=new yi(5),this.Ev=function(){return i.C_.vt().Wr()},this.Pv=function(){return i.C_.vt().Wr()},this.C_=t,this.ki=t.ct().layout,this.fd=document.createElement("tr"),this.vd=document.createElement("td"),this.vd.style.padding="0",this._d=document.createElement("td"),this._d.style.padding="0",this.Rv=document.createElement("td"),this.Rv.style.height="25px",this.Rv.style.padding="0",this.dd=document.createElement("div"),this.dd.style.width="100%",this.dd.style.height="100%",this.dd.style.position="relative",this.dd.style.overflow="hidden",this.Rv.appendChild(this.dd),this.Wv=yn(this.dd,new bn(16,16)),this.Wv.subscribeCanvasConfigured(this.Ev);var n=this.Wv.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.zv=yn(this.dd,new bn(16,16)),this.zv.subscribeCanvasConfigured(this.Pv);var s=this.zv.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.fd.appendChild(this.vd),this.fd.appendChild(this.Rv),this.fd.appendChild(this._d),this.wd(),this.C_.vt().yl().Ji(this.wd.bind(this),this),this.$v=new Dn(this.zv.canvas,this,{Uc:!0,qc:!1})}return t.prototype.en=function(){this.$v.en(),null!==this.ud&&this.ud.en(),null!==this.ad&&this.ad.en(),this.zv.unsubscribeCanvasConfigured(this.Pv),this.zv.destroy(),this.Wv.unsubscribeCanvasConfigured(this.Ev),this.Wv.destroy()},t.prototype.Xv=function(){return this.fd},t.prototype.Md=function(){return this.ud},t.prototype.bd=function(){return this.ad},t.prototype.Qc=function(t){if(!this.od){this.od=!0;var i=this.C_.vt();!i.j().ti()&&this.C_.ct().handleScale.axisPressedMouseMove.time&&i.Df(t._v)}},t.prototype.tv=function(){var t=this.C_.vt();!t.j().ti()&&this.od&&(this.od=!1,this.C_.ct().handleScale.axisPressedMouseMove.time&&t.Pf())},t.prototype.Hc=function(t){var i=this.C_.vt();!i.j().ti()&&this.C_.ct().handleScale.axisPressedMouseMove.time&&i.Of(t._v)},t.prototype.$c=function(t){this.od=!1;var i=this.C_.vt();i.j().ti()&&!this.C_.ct().handleScale.axisPressedMouseMove.time||i.Pf()},t.prototype.Xc=function(){this.C_.ct().handleScale.axisDoubleClickReset&&this.C_.vt().Te()},t.prototype.Rc=function(t){this.C_.vt().ct().handleScale.axisPressedMouseMove.time&&this.f_(1)},t.prototype.av=function(t){this.f_(0)},t.prototype.H_=function(){return this.xv},t.prototype.md=function(){return this.ld},t.prototype.gd=function(t,i,n){this.xv&&this.xv.on(t)||(this.xv=t,this.Wv.resizeCanvas({width:t.st,height:t.ht}),this.zv.resizeCanvas({width:t.st,height:t.ht}),this.Rv.style.width=t.st+"px",this.Rv.style.height=t.ht+"px",this.ld.hn(t)),null!==this.ud&&this.ud.i_(new bn(i,t.ht)),null!==this.ad&&this.ad.i_(new bn(n,t.ht))},t.prototype.pd=function(){var t=this.yd();return Math.ceil(t.Dt+t.Tt+t.Vt+t.At+t.Bt)},t.prototype.P=function(){this.C_.vt().j().On()},t.prototype.l_=function(){return this.Wv.canvas},t.prototype.h_=function(t){if(0!==t){if(1!==t){var i=gn(this.Wv.canvas);this.e_(i,this.Wv.pixelRatio),this.Nu(i,this.Wv.pixelRatio),this.u_(i,this.Wv.pixelRatio),null!==this.ud&&this.ud.h_(t),null!==this.ad&&this.ad.h_(t)}var n=gn(this.zv.canvas),s=this.zv.pixelRatio;n.clearRect(0,0,Math.ceil(this.xv.st*s),Math.ceil(this.xv.ht*s)),this.kd([this.C_.vt().Nf()],n,s)}},t.prototype.e_=function(t,i){var n=this;R(t,i,(function(){W(t,0,0,n.xv.st,n.xv.ht,n.C_.vt().Yf())}))},t.prototype.Nu=function(t,i){if(this.C_.ct().timeScale.borderVisible){t.save(),t.fillStyle=this.Cd();var n=Math.max(1,Math.floor(this.yd().Dt*i));t.fillRect(0,0,Math.ceil(this.xv.st*i),n),t.restore()}},t.prototype.u_=function(t,i){var n=this,s=this.C_.vt().j().On();if(s&&0!==s.length){var h=s.reduce(Un,s[0]).Uh;h>30&&h<50&&(h=30),t.save(),t.strokeStyle=this.Cd();var r=this.yd(),e=r.Dt+r.Tt+r.At+r.Vt-r.Pt;t.textAlign="center",t.fillStyle=this.Cd();var u=Math.floor(this.yd().Dt*i),a=Math.max(1,Math.floor(i)),o=Math.floor(.5*i);if(this.C_.vt().j().ct().borderVisible){t.beginPath();for(var l=Math.round(r.Tt*i),f=s.length;f--;){var c=Math.round(s[f].Bn*i);t.rect(c-o,u,a,l)}t.fill()}t.fillStyle=this.we(),R(t,i,(function(){t.font=n.Nd();for(var i=0,r=s;i<r.length;i++){if((l=r[i]).Uh<h){var u=l.qr?n.Sd(t,l.Bn,l.Ln):l.Bn;t.fillText(l.Ln,u,e)}}t.font=n.xd();for(var a=0,o=s;a<o.length;a++){var l;if((l=o[a]).Uh>=h){u=l.qr?n.Sd(t,l.Bn,l.Ln):l.Bn;t.fillText(l.Ln,u,e)}}}))}},t.prototype.Sd=function(t,i,n){var s=this.Av.Ot(t,n),h=s/2,r=Math.floor(i-h)+.5;return r<0?i+=Math.abs(0-r):r+s>this.xv.st&&(i-=Math.abs(this.xv.st-(r+s))),i},t.prototype.kd=function(t,i,n){for(var s=this.yd(),h=0,r=t;h<r.length;h++)for(var e=0,u=r[h].ci();e<u.length;e++){var a=u[e];i.save(),a.R().h(i,s,n),i.restore()}},t.prototype.Cd=function(){return this.C_.ct().timeScale.borderColor},t.prototype.we=function(){return this.ki.textColor},t.prototype._e=function(){return this.ki.fontSize},t.prototype.Nd=function(){return Yt(this._e(),this.ki.fontFamily)},t.prototype.xd=function(){return Yt(this._e(),this.ki.fontFamily,"bold")},t.prototype.yd=function(){null===this.ce&&(this.ce={Dt:1,Pt:NaN,At:NaN,Bt:NaN,si:NaN,Tt:3,Vt:NaN,Nt:"",ni:new yi});var t=this.ce,i=this.Nd();if(t.Nt!==i){var n=this._e();t.Vt=n,t.Nt=i,t.At=Math.ceil(n/2.5),t.Bt=t.At,t.si=Math.ceil(n/2),t.Pt=Math.round(this._e()/5),t.ni.Wu()}return this.ce},t.prototype.f_=function(t){this.Rv.style.cursor=1===t?"ew-resize":"default"},t.prototype.wd=function(){var t=this.C_.vt(),i=t.ct();i.leftPriceScale.visible||null===this.ud||(this.vd.removeChild(this.ud.Xv()),this.ud.en(),this.ud=null),i.rightPriceScale.visible||null===this.ad||(this._d.removeChild(this.ad.Xv()),this.ad.en(),this.ad=null);var n={zf:this.C_.vt().zf()},s=function(){return i.leftPriceScale.borderVisible&&t.j().ct().borderVisible},h=function(){return t.Yf()};i.leftPriceScale.visible&&null===this.ud&&(this.ud=new jn("left",i,n,s,h),this.vd.appendChild(this.ud.Xv())),i.rightPriceScale.visible&&null===this.ad&&(this.ad=new jn("right",i,n,s,h),this._d.appendChild(this.ad.Xv()))},t}(),Hn=function(){function t(t,i){var n;this.Td=[],this.Dd=0,this.Pn=0,this.Jh=0,this.Ad=0,this.Bd=0,this.Ld=null,this.Ed=!1,this.w_=new tt,this.hf=new tt,this.ki=i,this.fd=document.createElement("div"),this.fd.classList.add("tv-lightweight-charts"),this.fd.style.overflow="hidden",this.fd.style.width="100%",this.fd.style.height="100%",(n=this.fd).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Fd=document.createElement("table"),this.Fd.setAttribute("cellspacing","0"),this.fd.appendChild(this.Fd),this.Od=this.Pd.bind(this),this.fd.addEventListener("wheel",this.Od,{passive:!1}),this.hi=new dn(this.ef.bind(this),this.ki),this.vt().Sf().Ji(this.Vd.bind(this),this),this.Rd=new qn(this),this.Fd.appendChild(this.Rd.Xv());var s=this.ki.width,h=this.ki.height;if(0===s||0===h){var r=t.getBoundingClientRect();0===s&&(s=Math.floor(r.width),s-=s%2),0===h&&(h=Math.floor(r.height),h-=h%2)}this.Wd(s,h),this.zd(),t.appendChild(this.fd),this.Id(),this.hi.j().te().Ji(this.hi.df.bind(this.hi),this),this.hi.yl().Ji(this.hi.df.bind(this.hi),this)}return t.prototype.vt=function(){return this.hi},t.prototype.ct=function(){return this.ki},t.prototype.jd=function(){return this.Td},t.prototype.Ud=function(){return this.Rd},t.prototype.en=function(){this.fd.removeEventListener("wheel",this.Od),0!==this.Dd&&window.cancelAnimationFrame(this.Dd),this.hi.Sf().sn(this),this.hi.j().te().sn(this),this.hi.yl().sn(this),this.hi.en();for(var t=0,i=this.Td;t<i.length;t++){var n=i[t];this.Fd.removeChild(n.Xv()),n.j_().sn(this),n.en()}this.Td=[],l(this.Rd).en(),null!==this.fd.parentElement&&this.fd.parentElement.removeChild(this.fd),this.hf.en(),this.w_.en()},t.prototype.Wd=function(t,i,n){if(void 0===n&&(n=!1),this.Pn!==i||this.Jh!==t){this.Pn=i,this.Jh=t;var s=i+"px",h=t+"px";l(this.fd).style.height=s,l(this.fd).style.width=h,this.Fd.style.height=s,this.Fd.style.width=h,n?this.qd(new Xt(3)):this.hi.df()}},t.prototype.h_=function(t){void 0===t&&(t=new Xt(3));for(var i=0;i<this.Td.length;i++)this.Td[i].h_(t.Ce(i).ye);this.ki.timeScale.visible&&this.Rd.h_(t.ke())},t.prototype.os=function(t){this.hi.os(t),this.Id();var i=t.width||this.Jh,n=t.height||this.Pn;this.Wd(i,n)},t.prototype.j_=function(){return this.w_},t.prototype.Sf=function(){return this.hf},t.prototype.Hd=function(){var t=this;null!==this.Ld&&(this.qd(this.Ld),this.Ld=null);var i=this.Td[0],n=pn(document,new bn(this.Jh,this.Pn)),s=gn(n),h=mn(n);return R(s,h,(function(){var n=0,h=0,r=function(i){for(var r=0;r<t.Td.length;r++){var e=t.Td[r],u=e.H_().ht,a=l("left"===i?e.G_():e.Q_()),o=a.l_();s.drawImage(o,n,h,a.n_(),u),h+=u}};t.Yd()&&(r("left"),n=l(i.G_()).n_()),h=0;for(var e=0;e<t.Td.length;e++){var u=t.Td[e],a=u.H_(),o=u.l_();s.drawImage(o,n,h,a.st,a.ht),h+=a.ht}n+=i.H_().st,t.Kd()&&(h=0,r("right"));var f=function(i){var r=l("left"===i?t.Rd.Md():t.Rd.bd()),e=r.H_(),u=r.l_();s.drawImage(u,n,h,e.st,e.ht)};if(t.ki.timeScale.visible){n=0,t.Yd()&&(f("left"),n=l(i.G_()).n_());var c=t.Rd.H_();o=t.Rd.l_();s.drawImage(o,n,h,c.st,c.ht),t.Kd()&&(n+=i.H_().st,f("right"),s.restore())}})),n},t.prototype.$d=function(t){return"none"===t?0:("left"!==t||this.Yd())&&("right"!==t||this.Kd())?0===this.Td.length?0:l("left"===t?this.Td[0].G_():this.Td[0].Q_()).n_():0},t.prototype.Xd=function(){for(var t=0,i=0,n=0,s=0,h=this.Td;s<h.length;s++){var r=h[s];this.Yd()&&(i=Math.max(i,l(r.G_()).Qv())),this.Kd()&&(n=Math.max(n,l(r.Q_()).Qv())),t+=r.kl()}var e=this.Jh,u=this.Pn,a=Math.max(e-i-n,0),o=this.ki.timeScale.visible,f=o?this.Rd.pd():0;f%2&&(f+=1);for(var c=0+f,v=u<c?0:u-c,_=v/t,d=0,w=0;w<this.Td.length;++w){(r=this.Td[w]).B_(this.hi.kf()[w]);var M,b=0;b=w===this.Td.length-1?v-d:Math.round(r.kl()*_),d+=M=Math.max(b,2),r.i_(new bn(a,M)),this.Yd()&&r.q_(i,"left"),this.Kd()&&r.q_(n,"right"),r.s_()&&this.hi.xf(r.s_(),M)}this.Rd.gd(new bn(o?a:0,f),o?i:0,o?n:0),this.hi.Br(a),this.Ad!==i&&(this.Ad=i),this.Bd!==n&&(this.Bd=n)},t.prototype.Pd=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.ki.handleScroll.mouseWheel||0!==n&&this.ki.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.ki.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.fd.getBoundingClientRect().left;this.vt().Af(h,s)}0!==i&&this.ki.handleScroll.mouseWheel&&this.vt().Bf(-80*i)}},t.prototype.qd=function(t){var i=t.ke();if(3===i&&this.Zd(),3===i||2===i){for(var n=this.hi.kf(),s=0;s<n.length;s++)t.Ce(s).Ms&&n[s].zl();for(var h=t.De(),r=0,e=h;r<e.length;r++){var u=e[r];this.Ae(u)}h.length>0&&(this.hi.Rr(),this.hi.zo(),this.hi.Wr()),this.Rd.P()}this.h_(t)},t.prototype.Ae=function(t){var i=this.hi.j();switch(t.Se){case 0:i.ne();break;case 1:i.se(t.X);break;case 2:i.mr(t.X);break;case 3:i.gr(t.X);break;case 4:i.Hr()}},t.prototype.ef=function(t){var i=this;null!==this.Ld?this.Ld._n(t):this.Ld=t,this.Ed||(this.Ed=!0,this.Dd=window.requestAnimationFrame((function(){i.Ed=!1,i.Dd=0,null!==i.Ld&&(i.qd(i.Ld),i.Ld=null)})))},t.prototype.Zd=function(){this.zd()},t.prototype.zd=function(){for(var t=this.hi.kf(),i=t.length,n=this.Td.length,s=i;s<n;s++){var h=o(this.Td.pop());this.Fd.removeChild(h.Xv()),h.j_().sn(this),h.en()}for(s=n;s<i;s++){(h=new In(this,t[s])).j_().Ji(this.Jd.bind(this),this),this.Td.push(h),this.Fd.insertBefore(h.Xv(),this.Rd.Xv())}for(s=0;s<i;s++){var r=t[s];(h=this.Td[s]).s_()!==r?h.B_(r):h.A_()}this.Id(),this.Xd()},t.prototype.Gd=function(t,i){var n,s=new Map;null!==t&&this.hi.V().forEach((function(i){var n=i.Wa(t);null!==n&&s.set(i,n)}));if(null!==t){var h=this.hi.j().ri(t);null!==h&&(n=h)}var r=this.vt().bf(),e=null!==r&&r.gf instanceof en?r.gf:void 0,u=null!==r&&void 0!==r.V_?r.V_.Da:void 0;return{S:n,Qd:i||void 0,tw:e,iw:s,nw:u}},t.prototype.Jd=function(t,i){var n=this;this.w_.hn((function(){return n.Gd(t,i)}))},t.prototype.Vd=function(t,i){var n=this;this.hf.hn((function(){return n.Gd(t,i)}))},t.prototype.Id=function(){var t=this.ki.timeScale.visible?"":"none";this.Rd.Xv().style.display=t},t.prototype.Yd=function(){return this.Td[0].s_().Al().ct().visible},t.prototype.Kd=function(){return this.Td[0].s_().Bl().ct().visible},t}();function Yn(t,i,n){var s=n.value,h={jh:i,S:t,X:[s,s,s,s]};return"color"in n&&void 0!==n.color&&(h.et=n.color),h}function Kn(t,i,n){return{jh:i,S:t,X:[n.open,n.high,n.low,n.close]}}function $n(t){return void 0!==t.X}function Xn(t){return function(i,n,s){return void 0===(h=s).open&&void 0===h.value?{S:i,jh:n}:t(i,n,s);var h}}var Zn={Candlestick:Xn(Kn),Bar:Xn(Kn),Area:Xn(Yn),Baseline:Xn(Yn),Histogram:Xn(Yn),Line:Xn(Yn)};function Jn(t){return Zn[t]}function Gn(t){return 60*t*60*1e3}function Qn(t){return 60*t*1e3}var ts,is=[{sw:(ts=1,1e3*ts),Uh:10},{sw:Qn(1),Uh:20},{sw:Qn(5),Uh:21},{sw:Qn(30),Uh:22},{sw:Gn(1),Uh:30},{sw:Gn(3),Uh:31},{sw:Gn(6),Uh:32},{sw:Gn(12),Uh:33}];function ns(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=is.length-1;n>=0;--n)if(Math.floor(i.getTime()/is[n].sw)!==Math.floor(t.getTime()/is[n].sw))return is[n].Uh;return 0}function ss(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].S.Bh,s=null!==n?new Date(1e3*n):null,h=0,r=i;r<t.length;++r){var e=t[r],u=new Date(1e3*e.S.Bh);null!==s&&(e.Ih=ns(u,s)),h+=e.S.Bh-(n||e.S.Bh),n=e.S.Bh,s=u}if(0===i&&t.length>1){var a=Math.ceil(h/(t.length-1)),o=new Date(1e3*(t[0].S.Bh-a));t[0].Ih=ns(new Date(1e3*t[0].S.Bh),o)}}}function hs(t){if(!Ut(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Bh:Math.round(i.getTime()/1e3),Ah:t}}function rs(t){if(!qt(t))throw new Error("time must be of type isUTCTimestamp");return{Bh:t}}function es(t){return 0===t.length?null:Ut(t[0].time)?hs:rs}function us(t){return qt(t)?rs(t):Ut(t)?hs(t):hs(as(t))}function as(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function os(t){d(t.time)&&(t.time=as(t.time))}function ls(t){return{jh:0,hw:new Map,Us:t}}function fs(t){if(void 0!==t&&0!==t.length)return{rw:t[0].S.Bh,ew:t[t.length-1].S.Bh}}var cs=function(){function t(){this.uw=new Map,this.aw=new Map,this.ow=new Map,this.lw=[]}return t.prototype.en=function(){this.uw.clear(),this.aw.clear(),this.ow.clear(),this.lw=[]},t.prototype.fw=function(t,i){var n=this,s=0!==this.uw.size,h=!1,r=this.aw.get(t);if(void 0!==r)if(1===this.aw.size)s=!1,h=!0,this.uw.clear();else for(var e=0,u=this.lw;e<u.length;e++){u[e].pointData.hw.delete(t)&&(h=!0)}var a=[];if(0!==i.length){!function(t){t.forEach(os)}(i);var o=l(es(i)),f=Jn(t.Ga());a=i.map((function(i){var s=o(i.time),r=n.uw.get(s.Bh);void 0===r&&(r=ls(s),n.uw.set(s.Bh,r),h=!0);var e=f(s,r.jh,i);return r.hw.set(t,e),e}))}s&&this.cw(),this._w(t,a);var c=-1;if(h){var v=[];this.uw.forEach((function(t){v.push({Ih:0,S:t.Us,pointData:t})})),v.sort((function(t,i){return t.S.Bh-i.S.Bh})),c=this.dw(v)}return this.ww(t,c,function(t,i){var n=fs(t),s=fs(i);if(void 0!==n&&void 0!==s)return{jo:n.ew>=s.ew&&n.rw>=s.rw}}(this.aw.get(t),r))},t.prototype.Uf=function(t){return this.fw(t,[])},t.prototype.Mw=function(t,i){os(i);var n=l(es([i]))(i.time),s=this.ow.get(t);if(void 0!==s&&n.Bh<s.Bh)throw new Error("Cannot update oldest data, last time=".concat(s.Bh,", new time=").concat(n.Bh));var h=this.uw.get(n.Bh),r=void 0===h;void 0===h&&(h=ls(n),this.uw.set(n.Bh,h));var e=Jn(t.Ga())(n,h.jh,i);h.hw.set(t,e),this.bw(t,e);var u={jo:$n(e)};if(!r)return this.ww(t,-1,u);var a={Ih:0,S:h.Us,pointData:h},o=Et(this.lw,a.S.Bh,(function(t,i){return t.S.Bh<i}));this.lw.splice(o,0,a);for(var f=o;f<this.lw.length;++f)vs(this.lw[f].pointData,f);return ss(this.lw,o),this.ww(t,o,u)},t.prototype.bw=function(t,i){var n=this.aw.get(t);void 0===n&&(n=[],this.aw.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.S.Bh>s.S.Bh?$n(i)&&n.push(i):$n(i)?n[n.length-1]=i:n.splice(-1,1),this.ow.set(t,i.S)},t.prototype._w=function(t,i){0!==i.length?(this.aw.set(t,i.filter($n)),this.ow.set(t,i[i.length-1].S)):(this.aw.delete(t),this.ow.delete(t))},t.prototype.cw=function(){for(var t=0,i=this.lw;t<i.length;t++){var n=i[t];0===n.pointData.hw.size&&this.uw.delete(n.S.Bh)}},t.prototype.dw=function(t){for(var i=-1,n=0;n<this.lw.length&&n<t.length;++n){var s=this.lw[n],h=t[n];if(s.S.Bh!==h.S.Bh){i=n;break}h.Ih=s.Ih,vs(h.pointData,n)}if(-1===i&&this.lw.length!==t.length&&(i=Math.min(this.lw.length,t.length)),-1===i)return-1;for(n=i;n<t.length;++n)vs(t[n].pointData,n);return ss(t,i),this.lw=t,i},t.prototype.mw=function(){if(0===this.aw.size)return null;var t=0;return this.aw.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].jh))})),t},t.prototype.ww=function(t,i,n){var s={gw:new Map,j:{Fr:this.mw()}};if(-1!==i)this.aw.forEach((function(i,h){s.gw.set(h,{ta:i,pw:h===t?n:void 0})})),this.aw.has(t)||s.gw.set(t,{ta:[],pw:n}),s.j.yw=this.lw,s.j.kw=i;else{var h=this.aw.get(t);s.gw.set(t,{ta:h||[],pw:n})}return s},t}();function vs(t,i){t.jh=i,t.hw.forEach((function(t){t.jh=i}))}var _s={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},ds=function(){function t(t){this.Ka=t}return t.prototype.applyOptions=function(t){this.Ka.os(t)},t.prototype.options=function(){return this.Ka.ct()},t.prototype.Cw=function(){return this.Ka},t}();function ws(t){var i=t.overlay,n=function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(s=Object.getOwnPropertySymbols(t);h<s.length;h++)i.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(t,s[h])&&(n[s[h]]=t[s[h]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Ms=function(){function t(t,i,n){this.Ye=t,this.Nw=i,this.Sw=n}return t.prototype.priceFormatter=function(){return this.Ye.Js()},t.prototype.priceToCoordinate=function(t){var i=this.Ye.H();return null===i?null:this.Ye.$().K(t,i.X)},t.prototype.coordinateToPrice=function(t){var i=this.Ye.H();return null===i?null:this.Ye.$().xi(t,i.X)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new zt(new Pt(t.from,t.to)).$h(),n=this.Ye.Hi();if(n.ti())return null;var s=n.do(i.uh(),1),h=n.do(i.ah(),-1),r=l(n.co()),e=l(n.qi());if(null!==s&&null!==h&&s.jh>h.jh)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===s||s.jh===r?t.from-r:s.jh-r,barsAfter:null===h||h.jh===e?e-t.to:e-h.jh};return null!==s&&null!==h&&(u.from=s.S.Ah||s.S.Bh,u.to=h.S.Ah||h.S.Bh),u},t.prototype.setData=function(t){this.Ye.Ga(),this.Nw.xw(this.Ye,t)},t.prototype.update=function(t){this.Ye.Ga(),this.Nw.Tw(this.Ye,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return e(e({},t),{time:us(t.time)})}));this.Ye.qo(i)},t.prototype.applyOptions=function(t){var i=ws(t);this.Ye.os(i)},t.prototype.options=function(){return M(this.Ye.ct())},t.prototype.priceScale=function(){return this.Sw.priceScale(this.Ye.$().us())},t.prototype.createPriceLine=function(t){var i=c(M(_s),t),n=this.Ye.Ho(i);return new ds(n)},t.prototype.removePriceLine=function(t){this.Ye.Yo(t.Cw())},t.prototype.seriesType=function(){return this.Ye.Ga()},t}(),bs=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.applyOptions=function(i){St(i),t.prototype.applyOptions.call(this,i)},i}(Ms),ms={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},gs={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Ht,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},ps={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:Ht},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:e({},ms),leftPriceScale:e(e({},ms),{visible:!1}),rightPriceScale:e(e({},ms),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:gs,localization:{locale:Sn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0}},ys={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},ks={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Cs={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ns={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ss={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},xs={color:"#26a69a",base:0},Ts={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Ds=function(){function t(t,i){this.Dw=t,this.Aw=i}return t.prototype.applyOptions=function(t){this.Dw.vt().pf(this.Aw,t)},t.prototype.options=function(){return this.Gt().ct()},t.prototype.width=function(){return $t(this.Aw)?this.Dw.$d("left"===this.Aw?"left":"right"):0},t.prototype.Gt=function(){return l(this.Dw.vt().yf(this.Aw)).$},t}(),As=function(){function t(t,i){this.Bw=new tt,this.rr=new tt,this.ld=new tt,this.hi=t,this._l=t.j(),this.Rd=i,this._l.Gr().Ji(this.Lw.bind(this)),this._l.Qr().Ji(this.Ew.bind(this)),this.Rd.md().Ji(this.Fw.bind(this))}return t.prototype.en=function(){this._l.Gr().sn(this),this._l.Qr().sn(this),this.Rd.md().sn(this),this.Bw.en(),this.rr.en(),this.ld.en()},t.prototype.scrollPosition=function(){return this._l.jr()},t.prototype.scrollToPosition=function(t,i){i?this._l.Jr(t,1e3):this.hi.gr(t)},t.prototype.scrollToRealTime=function(){this._l.Zr()},t.prototype.getVisibleRange=function(){var t,i,n=this._l.Nr();return null===n?null:{from:null!==(t=n.from.Ah)&&void 0!==t?t:n.from.Bh,to:null!==(i=n.to.Ah)&&void 0!==i?i:n.to.Bh}},t.prototype.setVisibleRange=function(t){var i={from:us(t.from),to:us(t.to)},n=this._l.Ar(i);this.hi.qf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this._l.Cr();return null===t?null:{from:t.uh(),to:t.ah()}},t.prototype.setVisibleLogicalRange=function(t){a(t.from<=t.to,"The from index cannot be after the to index."),this.hi.qf(t)},t.prototype.resetTimeScale=function(){this.hi.Te()},t.prototype.fitContent=function(){this.hi.ne()},t.prototype.logicalToCoordinate=function(t){var i=this.hi.j();return i.ti()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){return this._l.ti()?null:this._l.Pr(t)},t.prototype.timeToCoordinate=function(t){var i=us(t),n=this._l.pr(i,!1);return null===n?null:this._l.G(n)},t.prototype.coordinateToTime=function(t){var i,n=this.hi.j(),s=n.Pr(t),h=n.ri(s);return null===h?null:null!==(i=h.Ah)&&void 0!==i?i:h.Bh},t.prototype.width=function(){return this.Rd.H_().st},t.prototype.height=function(){return this.Rd.H_().ht},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Bw.Ji(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Bw.nn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.rr.Ji(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.rr.nn(t)},t.prototype.subscribeSizeChange=function(t){this.ld.Ji(t)},t.prototype.unsubscribeSizeChange=function(t){this.ld.nn(t)},t.prototype.applyOptions=function(t){this._l.os(t)},t.prototype.options=function(){return M(this._l.ct())},t.prototype.Lw=function(){this.Bw.rn()&&this.Bw.hn(this.getVisibleRange())},t.prototype.Ew=function(){this.rr.rn()&&this.rr.hn(this.getVisibleLogicalRange())},t.prototype.Fw=function(t){this.ld.hn(t.st,t.ht)},t}();function Bs(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Ls(t){return function(t){if(w(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&w(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;w(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=c(t.leftPriceScale,t.priceScale),t.rightPriceScale=c(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),function(t){t.layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor})}(t),t}var Es=function(){function t(t,i){var n=this;this.Ow=new cs,this.Pw=new Map,this.Vw=new Map,this.Rw=new tt,this.Ww=new tt;var s=void 0===i?M(ps):c(M(ps),Ls(i));this.Dw=new Hn(t,s),this.Dw.j_().Ji((function(t){n.Rw.rn()&&n.Rw.hn(n.zw(t()))}),this),this.Dw.Sf().Ji((function(t){n.Ww.rn()&&n.Ww.hn(n.zw(t()))}),this);var h=this.Dw.vt();this.Iw=new As(h,this.Dw.Ud())}return t.prototype.remove=function(){this.Dw.j_().sn(this),this.Dw.Sf().sn(this),this.Iw.en(),this.Dw.en(),this.Pw.clear(),this.Vw.clear(),this.Rw.en(),this.Ww.en(),this.Ow.en()},t.prototype.resize=function(t,i,n){this.Dw.Wd(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Bs((t=ws(t)).priceFormat);var i=c(M(Ts),Ns,t),n=this.Dw.vt().If("Area",i),s=new Ms(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),Bs((t=ws(t)).priceFormat);var i=c(M(Ts),M(Ss),t),n=this.Dw.vt().If("Baseline",i),s=new Ms(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Bs((t=ws(t)).priceFormat);var i=c(M(Ts),ks,t),n=this.Dw.vt().If("Bar",i),s=new Ms(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),St(t=ws(t)),Bs(t.priceFormat);var i=c(M(Ts),ys,t),n=this.Dw.vt().If("Candlestick",i),s=new bs(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Bs((t=ws(t)).priceFormat);var i=c(M(Ts),xs,t),n=this.Dw.vt().If("Histogram",i),s=new Ms(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Bs((t=ws(t)).priceFormat);var i=c(M(Ts),Cs,t),n=this.Dw.vt().If("Line",i),s=new Ms(n,this,this);return this.Pw.set(s,n),this.Vw.set(n,s),s},t.prototype.removeSeries=function(t){var i=o(this.Pw.get(t)),n=this.Ow.Uf(i);this.Dw.vt().Uf(i),this.jw(n),this.Pw.delete(t),this.Vw.delete(i)},t.prototype.xw=function(t,i){this.jw(this.Ow.fw(t,i))},t.prototype.Tw=function(t,i){this.jw(this.Ow.Mw(t,i))},t.prototype.subscribeClick=function(t){this.Rw.Ji(t)},t.prototype.unsubscribeClick=function(t){this.Rw.nn(t)},t.prototype.subscribeCrosshairMove=function(t){this.Ww.Ji(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.Ww.nn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.Dw.vt().Hf()),new Ds(this.Dw,t)},t.prototype.timeScale=function(){return this.Iw},t.prototype.applyOptions=function(t){this.Dw.os(Ls(t))},t.prototype.options=function(){return this.Dw.ct()},t.prototype.takeScreenshot=function(){return this.Dw.Hd()},t.prototype.jw=function(t){var i=this.Dw.vt();i.Wf(t.j.Fr,t.j.yw,t.j.kw),t.gw.forEach((function(t,i){return i._(t.ta,t.pw)})),i.Rr()},t.prototype.Uw=function(t){return o(this.Vw.get(t))},t.prototype.zw=function(t){var i=this,n=new Map;t.iw.forEach((function(t,s){n.set(i.Uw(s),t)}));var s=void 0===t.tw?void 0:this.Uw(t.tw);return{time:t.S&&(t.S.Ah||t.S.Bh),point:t.Qd,hoveredSeries:s,hoveredMarkerId:t.nw,seriesPrices:n}},t}();var Fs=Object.freeze({__proto__:null,version:function(){return"3.8.0-dev+202112201911"},get LineStyle(){return i},get LineType(){return t},get CrosshairMode(){return I},get PriceScaleMode(){return Mt},get PriceLineSource(){return yt},get LastPriceAnimationMode(){return pt},get LasPriceAnimationMode(){return pt},get TickMarkType(){return Rt},get ColorType(){return It},isBusinessDay:Ut,isUTCTimestamp:qt,createChart:function(t,i){var n;if(d(t)){var s=document.getElementById(t);a(null!==s,"Cannot find element in DOM with id=".concat(t)),n=s}else n=t;return new Es(n,i)}});window.LightweightCharts=Fs}();
